{"version":3,"file":"main.js","mappings":"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","sources":["webpack://pritunl/./node_modules/bufferutil/fallback.js","webpack://pritunl/./node_modules/bufferutil/index.js","webpack://pritunl/./node_modules/chownr/chownr.js","webpack://pritunl/./node_modules/fs-minipass/index.js","webpack://pritunl/./node_modules/minipass/index.js","webpack://pritunl/./node_modules/minizlib/constants.js","webpack://pritunl/./node_modules/minizlib/index.js","webpack://pritunl/./node_modules/mkdirp/index.js","webpack://pritunl/./node_modules/mkdirp/lib/find-made.js","webpack://pritunl/./node_modules/mkdirp/lib/mkdirp-manual.js","webpack://pritunl/./node_modules/mkdirp/lib/mkdirp-native.js","webpack://pritunl/./node_modules/mkdirp/lib/opts-arg.js","webpack://pritunl/./node_modules/mkdirp/lib/path-arg.js","webpack://pritunl/./node_modules/mkdirp/lib/use-native.js","webpack://pritunl/./node_modules/node-gyp-build/index.js","webpack://pritunl/./node_modules/tar/index.js","webpack://pritunl/./node_modules/tar/lib/create.js","webpack://pritunl/./node_modules/tar/lib/extract.js","webpack://pritunl/./node_modules/tar/lib/get-write-flag.js","webpack://pritunl/./node_modules/tar/lib/header.js","webpack://pritunl/./node_modules/tar/lib/high-level-opt.js","webpack://pritunl/./node_modules/tar/lib/large-numbers.js","webpack://pritunl/./node_modules/tar/lib/list.js","webpack://pritunl/./node_modules/tar/lib/mkdir.js","webpack://pritunl/./node_modules/tar/lib/mode-fix.js","webpack://pritunl/./node_modules/tar/lib/normalize-unicode.js","webpack://pritunl/./node_modules/tar/lib/normalize-windows-path.js","webpack://pritunl/./node_modules/tar/lib/pack.js","webpack://pritunl/./node_modules/tar/lib/parse.js","webpack://pritunl/./node_modules/tar/lib/path-reservations.js","webpack://pritunl/./node_modules/tar/lib/pax.js","webpack://pritunl/./node_modules/tar/lib/read-entry.js","webpack://pritunl/./node_modules/tar/lib/replace.js","webpack://pritunl/./node_modules/tar/lib/strip-absolute-path.js","webpack://pritunl/./node_modules/tar/lib/strip-trailing-slashes.js","webpack://pritunl/./node_modules/tar/lib/types.js","webpack://pritunl/./node_modules/tar/lib/unpack.js","webpack://pritunl/./node_modules/tar/lib/update.js","webpack://pritunl/./node_modules/tar/lib/warn-mixin.js","webpack://pritunl/./node_modules/tar/lib/winchars.js","webpack://pritunl/./node_modules/tar/lib/write-entry.js","webpack://pritunl/./node_modules/utf-8-validate/fallback.js","webpack://pritunl/./node_modules/utf-8-validate/index.js","webpack://pritunl/./node_modules/ws/lib/buffer-util.js","webpack://pritunl/./node_modules/ws/lib/constants.js","webpack://pritunl/./node_modules/ws/lib/event-target.js","webpack://pritunl/./node_modules/ws/lib/extension.js","webpack://pritunl/./node_modules/ws/lib/limiter.js","webpack://pritunl/./node_modules/ws/lib/permessage-deflate.js","webpack://pritunl/./node_modules/ws/lib/receiver.js","webpack://pritunl/./node_modules/ws/lib/sender.js","webpack://pritunl/./node_modules/ws/lib/stream.js","webpack://pritunl/./node_modules/ws/lib/subprotocol.js","webpack://pritunl/./node_modules/ws/lib/validation.js","webpack://pritunl/./node_modules/ws/lib/websocket-server.js","webpack://pritunl/./node_modules/ws/lib/websocket.js","webpack://pritunl/./node_modules/yallist/iterator.js","webpack://pritunl/./node_modules/yallist/yallist.js","webpack://pritunl/external node-commonjs \"assert\"","webpack://pritunl/external node-commonjs \"buffer\"","webpack://pritunl/external node-commonjs \"crypto\"","webpack://pritunl/external node-commonjs \"events\"","webpack://pritunl/external node-commonjs \"fs\"","webpack://pritunl/external node-commonjs \"http\"","webpack://pritunl/external node-commonjs \"https\"","webpack://pritunl/external node-commonjs \"net\"","webpack://pritunl/external node-commonjs \"os\"","webpack://pritunl/external node-commonjs \"path\"","webpack://pritunl/external node-commonjs \"stream\"","webpack://pritunl/external node-commonjs \"string_decoder\"","webpack://pritunl/external node-commonjs \"tls\"","webpack://pritunl/external node-commonjs \"url\"","webpack://pritunl/external node-commonjs \"util\"","webpack://pritunl/external node-commonjs \"zlib\"","webpack://pritunl/webpack/bootstrap","webpack://pritunl/webpack/runtime/compat get default export","webpack://pritunl/webpack/runtime/define property getters","webpack://pritunl/webpack/runtime/hasOwnProperty shorthand","webpack://pritunl/external node-commonjs \"process\"","webpack://pritunl/external node-commonjs \"electron\"","webpack://pritunl/external node-commonjs \"child_process\"","webpack://pritunl/./node_modules/ws/wrapper.mjs","webpack://pritunl/./main/Errors.ts","webpack://pritunl/./main/Logger.ts","webpack://pritunl/./main/Request.ts","webpack://pritunl/./app/Errors.ts","webpack://pritunl/./main/Service.ts","webpack://pritunl/./app/utils/MiscUtils.ts","webpack://pritunl/./main/Config.ts","webpack://pritunl/./main/Main.tsx","webpack://pritunl/./main/Utils.ts"],"sourcesContent":["'use strict';\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nconst mask = (source, mask, output, offset, length) => {\n  for (var i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n};\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nconst unmask = (buffer, mask) => {\n  // Required until https://github.com/nodejs/node/issues/9006 is resolved.\n  const length = buffer.length;\n  for (var i = 0; i < length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n};\n\nmodule.exports = { mask, unmask };\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict'\nconst fs = require('fs')\nconst path = require('path')\n\n/* istanbul ignore next */\nconst LCHOWN = fs.lchown ? 'lchown' : 'chown'\n/* istanbul ignore next */\nconst LCHOWNSYNC = fs.lchownSync ? 'lchownSync' : 'chownSync'\n\n/* istanbul ignore next */\nconst needEISDIRHandled = fs.lchown &&\n  !process.version.match(/v1[1-9]+\\./) &&\n  !process.version.match(/v10\\.[6-9]/)\n\nconst lchownSync = (path, uid, gid) => {\n  try {\n    return fs[LCHOWNSYNC](path, uid, gid)\n  } catch (er) {\n    if (er.code !== 'ENOENT')\n      throw er\n  }\n}\n\n/* istanbul ignore next */\nconst chownSync = (path, uid, gid) => {\n  try {\n    return fs.chownSync(path, uid, gid)\n  } catch (er) {\n    if (er.code !== 'ENOENT')\n      throw er\n  }\n}\n\n/* istanbul ignore next */\nconst handleEISDIR =\n  needEISDIRHandled ? (path, uid, gid, cb) => er => {\n    // Node prior to v10 had a very questionable implementation of\n    // fs.lchown, which would always try to call fs.open on a directory\n    // Fall back to fs.chown in those cases.\n    if (!er || er.code !== 'EISDIR')\n      cb(er)\n    else\n      fs.chown(path, uid, gid, cb)\n  }\n  : (_, __, ___, cb) => cb\n\n/* istanbul ignore next */\nconst handleEISDirSync =\n  needEISDIRHandled ? (path, uid, gid) => {\n    try {\n      return lchownSync(path, uid, gid)\n    } catch (er) {\n      if (er.code !== 'EISDIR')\n        throw er\n      chownSync(path, uid, gid)\n    }\n  }\n  : (path, uid, gid) => lchownSync(path, uid, gid)\n\n// fs.readdir could only accept an options object as of node v6\nconst nodeVersion = process.version\nlet readdir = (path, options, cb) => fs.readdir(path, options, cb)\nlet readdirSync = (path, options) => fs.readdirSync(path, options)\n/* istanbul ignore next */\nif (/^v4\\./.test(nodeVersion))\n  readdir = (path, options, cb) => fs.readdir(path, cb)\n\nconst chown = (cpath, uid, gid, cb) => {\n  fs[LCHOWN](cpath, uid, gid, handleEISDIR(cpath, uid, gid, er => {\n    // Skip ENOENT error\n    cb(er && er.code !== 'ENOENT' ? er : null)\n  }))\n}\n\nconst chownrKid = (p, child, uid, gid, cb) => {\n  if (typeof child === 'string')\n    return fs.lstat(path.resolve(p, child), (er, stats) => {\n      // Skip ENOENT error\n      if (er)\n        return cb(er.code !== 'ENOENT' ? er : null)\n      stats.name = child\n      chownrKid(p, stats, uid, gid, cb)\n    })\n\n  if (child.isDirectory()) {\n    chownr(path.resolve(p, child.name), uid, gid, er => {\n      if (er)\n        return cb(er)\n      const cpath = path.resolve(p, child.name)\n      chown(cpath, uid, gid, cb)\n    })\n  } else {\n    const cpath = path.resolve(p, child.name)\n    chown(cpath, uid, gid, cb)\n  }\n}\n\n\nconst chownr = (p, uid, gid, cb) => {\n  readdir(p, { withFileTypes: true }, (er, children) => {\n    // any error other than ENOTDIR or ENOTSUP means it's not readable,\n    // or doesn't exist.  give up.\n    if (er) {\n      if (er.code === 'ENOENT')\n        return cb()\n      else if (er.code !== 'ENOTDIR' && er.code !== 'ENOTSUP')\n        return cb(er)\n    }\n    if (er || !children.length)\n      return chown(p, uid, gid, cb)\n\n    let len = children.length\n    let errState = null\n    const then = er => {\n      if (errState)\n        return\n      if (er)\n        return cb(errState = er)\n      if (-- len === 0)\n        return chown(p, uid, gid, cb)\n    }\n\n    children.forEach(child => chownrKid(p, child, uid, gid, then))\n  })\n}\n\nconst chownrKidSync = (p, child, uid, gid) => {\n  if (typeof child === 'string') {\n    try {\n      const stats = fs.lstatSync(path.resolve(p, child))\n      stats.name = child\n      child = stats\n    } catch (er) {\n      if (er.code === 'ENOENT')\n        return\n      else\n        throw er\n    }\n  }\n\n  if (child.isDirectory())\n    chownrSync(path.resolve(p, child.name), uid, gid)\n\n  handleEISDirSync(path.resolve(p, child.name), uid, gid)\n}\n\nconst chownrSync = (p, uid, gid) => {\n  let children\n  try {\n    children = readdirSync(p, { withFileTypes: true })\n  } catch (er) {\n    if (er.code === 'ENOENT')\n      return\n    else if (er.code === 'ENOTDIR' || er.code === 'ENOTSUP')\n      return handleEISDirSync(p, uid, gid)\n    else\n      throw er\n  }\n\n  if (children && children.length)\n    children.forEach(child => chownrKidSync(p, child, uid, gid))\n\n  return handleEISDirSync(p, uid, gid)\n}\n\nmodule.exports = chownr\nchownr.sync = chownrSync\n","'use strict'\nconst MiniPass = require('minipass')\nconst EE = require('events').EventEmitter\nconst fs = require('fs')\n\nlet writev = fs.writev\n/* istanbul ignore next */\nif (!writev) {\n  // This entire block can be removed if support for earlier than Node.js\n  // 12.9.0 is not needed.\n  const binding = process.binding('fs')\n  const FSReqWrap = binding.FSReqWrap || binding.FSReqCallback\n\n  writev = (fd, iovec, pos, cb) => {\n    const done = (er, bw) => cb(er, bw, iovec)\n    const req = new FSReqWrap()\n    req.oncomplete = done\n    binding.writeBuffers(fd, iovec, pos, req)\n  }\n}\n\nconst _autoClose = Symbol('_autoClose')\nconst _close = Symbol('_close')\nconst _ended = Symbol('_ended')\nconst _fd = Symbol('_fd')\nconst _finished = Symbol('_finished')\nconst _flags = Symbol('_flags')\nconst _flush = Symbol('_flush')\nconst _handleChunk = Symbol('_handleChunk')\nconst _makeBuf = Symbol('_makeBuf')\nconst _mode = Symbol('_mode')\nconst _needDrain = Symbol('_needDrain')\nconst _onerror = Symbol('_onerror')\nconst _onopen = Symbol('_onopen')\nconst _onread = Symbol('_onread')\nconst _onwrite = Symbol('_onwrite')\nconst _open = Symbol('_open')\nconst _path = Symbol('_path')\nconst _pos = Symbol('_pos')\nconst _queue = Symbol('_queue')\nconst _read = Symbol('_read')\nconst _readSize = Symbol('_readSize')\nconst _reading = Symbol('_reading')\nconst _remain = Symbol('_remain')\nconst _size = Symbol('_size')\nconst _write = Symbol('_write')\nconst _writing = Symbol('_writing')\nconst _defaultFlag = Symbol('_defaultFlag')\nconst _errored = Symbol('_errored')\n\nclass ReadStream extends MiniPass {\n  constructor (path, opt) {\n    opt = opt || {}\n    super(opt)\n\n    this.readable = true\n    this.writable = false\n\n    if (typeof path !== 'string')\n      throw new TypeError('path must be a string')\n\n    this[_errored] = false\n    this[_fd] = typeof opt.fd === 'number' ? opt.fd : null\n    this[_path] = path\n    this[_readSize] = opt.readSize || 16*1024*1024\n    this[_reading] = false\n    this[_size] = typeof opt.size === 'number' ? opt.size : Infinity\n    this[_remain] = this[_size]\n    this[_autoClose] = typeof opt.autoClose === 'boolean' ?\n      opt.autoClose : true\n\n    if (typeof this[_fd] === 'number')\n      this[_read]()\n    else\n      this[_open]()\n  }\n\n  get fd () { return this[_fd] }\n  get path () { return this[_path] }\n\n  write () {\n    throw new TypeError('this is a readable stream')\n  }\n\n  end () {\n    throw new TypeError('this is a readable stream')\n  }\n\n  [_open] () {\n    fs.open(this[_path], 'r', (er, fd) => this[_onopen](er, fd))\n  }\n\n  [_onopen] (er, fd) {\n    if (er)\n      this[_onerror](er)\n    else {\n      this[_fd] = fd\n      this.emit('open', fd)\n      this[_read]()\n    }\n  }\n\n  [_makeBuf] () {\n    return Buffer.allocUnsafe(Math.min(this[_readSize], this[_remain]))\n  }\n\n  [_read] () {\n    if (!this[_reading]) {\n      this[_reading] = true\n      const buf = this[_makeBuf]()\n      /* istanbul ignore if */\n      if (buf.length === 0)\n        return process.nextTick(() => this[_onread](null, 0, buf))\n      fs.read(this[_fd], buf, 0, buf.length, null, (er, br, buf) =>\n        this[_onread](er, br, buf))\n    }\n  }\n\n  [_onread] (er, br, buf) {\n    this[_reading] = false\n    if (er)\n      this[_onerror](er)\n    else if (this[_handleChunk](br, buf))\n      this[_read]()\n  }\n\n  [_close] () {\n    if (this[_autoClose] && typeof this[_fd] === 'number') {\n      const fd = this[_fd]\n      this[_fd] = null\n      fs.close(fd, er => er ? this.emit('error', er) : this.emit('close'))\n    }\n  }\n\n  [_onerror] (er) {\n    this[_reading] = true\n    this[_close]()\n    this.emit('error', er)\n  }\n\n  [_handleChunk] (br, buf) {\n    let ret = false\n    // no effect if infinite\n    this[_remain] -= br\n    if (br > 0)\n      ret = super.write(br < buf.length ? buf.slice(0, br) : buf)\n\n    if (br === 0 || this[_remain] <= 0) {\n      ret = false\n      this[_close]()\n      super.end()\n    }\n\n    return ret\n  }\n\n  emit (ev, data) {\n    switch (ev) {\n      case 'prefinish':\n      case 'finish':\n        break\n\n      case 'drain':\n        if (typeof this[_fd] === 'number')\n          this[_read]()\n        break\n\n      case 'error':\n        if (this[_errored])\n          return\n        this[_errored] = true\n        return super.emit(ev, data)\n\n      default:\n        return super.emit(ev, data)\n    }\n  }\n}\n\nclass ReadStreamSync extends ReadStream {\n  [_open] () {\n    let threw = true\n    try {\n      this[_onopen](null, fs.openSync(this[_path], 'r'))\n      threw = false\n    } finally {\n      if (threw)\n        this[_close]()\n    }\n  }\n\n  [_read] () {\n    let threw = true\n    try {\n      if (!this[_reading]) {\n        this[_reading] = true\n        do {\n          const buf = this[_makeBuf]()\n          /* istanbul ignore next */\n          const br = buf.length === 0 ? 0\n            : fs.readSync(this[_fd], buf, 0, buf.length, null)\n          if (!this[_handleChunk](br, buf))\n            break\n        } while (true)\n        this[_reading] = false\n      }\n      threw = false\n    } finally {\n      if (threw)\n        this[_close]()\n    }\n  }\n\n  [_close] () {\n    if (this[_autoClose] && typeof this[_fd] === 'number') {\n      const fd = this[_fd]\n      this[_fd] = null\n      fs.closeSync(fd)\n      this.emit('close')\n    }\n  }\n}\n\nclass WriteStream extends EE {\n  constructor (path, opt) {\n    opt = opt || {}\n    super(opt)\n    this.readable = false\n    this.writable = true\n    this[_errored] = false\n    this[_writing] = false\n    this[_ended] = false\n    this[_needDrain] = false\n    this[_queue] = []\n    this[_path] = path\n    this[_fd] = typeof opt.fd === 'number' ? opt.fd : null\n    this[_mode] = opt.mode === undefined ? 0o666 : opt.mode\n    this[_pos] = typeof opt.start === 'number' ? opt.start : null\n    this[_autoClose] = typeof opt.autoClose === 'boolean' ?\n      opt.autoClose : true\n\n    // truncating makes no sense when writing into the middle\n    const defaultFlag = this[_pos] !== null ? 'r+' : 'w'\n    this[_defaultFlag] = opt.flags === undefined\n    this[_flags] = this[_defaultFlag] ? defaultFlag : opt.flags\n\n    if (this[_fd] === null)\n      this[_open]()\n  }\n\n  emit (ev, data) {\n    if (ev === 'error') {\n      if (this[_errored])\n        return\n      this[_errored] = true\n    }\n    return super.emit(ev, data)\n  }\n\n\n  get fd () { return this[_fd] }\n  get path () { return this[_path] }\n\n  [_onerror] (er) {\n    this[_close]()\n    this[_writing] = true\n    this.emit('error', er)\n  }\n\n  [_open] () {\n    fs.open(this[_path], this[_flags], this[_mode],\n      (er, fd) => this[_onopen](er, fd))\n  }\n\n  [_onopen] (er, fd) {\n    if (this[_defaultFlag] &&\n        this[_flags] === 'r+' &&\n        er && er.code === 'ENOENT') {\n      this[_flags] = 'w'\n      this[_open]()\n    } else if (er)\n      this[_onerror](er)\n    else {\n      this[_fd] = fd\n      this.emit('open', fd)\n      this[_flush]()\n    }\n  }\n\n  end (buf, enc) {\n    if (buf)\n      this.write(buf, enc)\n\n    this[_ended] = true\n\n    // synthetic after-write logic, where drain/finish live\n    if (!this[_writing] && !this[_queue].length &&\n        typeof this[_fd] === 'number')\n      this[_onwrite](null, 0)\n    return this\n  }\n\n  write (buf, enc) {\n    if (typeof buf === 'string')\n      buf = Buffer.from(buf, enc)\n\n    if (this[_ended]) {\n      this.emit('error', new Error('write() after end()'))\n      return false\n    }\n\n    if (this[_fd] === null || this[_writing] || this[_queue].length) {\n      this[_queue].push(buf)\n      this[_needDrain] = true\n      return false\n    }\n\n    this[_writing] = true\n    this[_write](buf)\n    return true\n  }\n\n  [_write] (buf) {\n    fs.write(this[_fd], buf, 0, buf.length, this[_pos], (er, bw) =>\n      this[_onwrite](er, bw))\n  }\n\n  [_onwrite] (er, bw) {\n    if (er)\n      this[_onerror](er)\n    else {\n      if (this[_pos] !== null)\n        this[_pos] += bw\n      if (this[_queue].length)\n        this[_flush]()\n      else {\n        this[_writing] = false\n\n        if (this[_ended] && !this[_finished]) {\n          this[_finished] = true\n          this[_close]()\n          this.emit('finish')\n        } else if (this[_needDrain]) {\n          this[_needDrain] = false\n          this.emit('drain')\n        }\n      }\n    }\n  }\n\n  [_flush] () {\n    if (this[_queue].length === 0) {\n      if (this[_ended])\n        this[_onwrite](null, 0)\n    } else if (this[_queue].length === 1)\n      this[_write](this[_queue].pop())\n    else {\n      const iovec = this[_queue]\n      this[_queue] = []\n      writev(this[_fd], iovec, this[_pos],\n        (er, bw) => this[_onwrite](er, bw))\n    }\n  }\n\n  [_close] () {\n    if (this[_autoClose] && typeof this[_fd] === 'number') {\n      const fd = this[_fd]\n      this[_fd] = null\n      fs.close(fd, er => er ? this.emit('error', er) : this.emit('close'))\n    }\n  }\n}\n\nclass WriteStreamSync extends WriteStream {\n  [_open] () {\n    let fd\n    // only wrap in a try{} block if we know we'll retry, to avoid\n    // the rethrow obscuring the error's source frame in most cases.\n    if (this[_defaultFlag] && this[_flags] === 'r+') {\n      try {\n        fd = fs.openSync(this[_path], this[_flags], this[_mode])\n      } catch (er) {\n        if (er.code === 'ENOENT') {\n          this[_flags] = 'w'\n          return this[_open]()\n        } else\n          throw er\n      }\n    } else\n      fd = fs.openSync(this[_path], this[_flags], this[_mode])\n\n    this[_onopen](null, fd)\n  }\n\n  [_close] () {\n    if (this[_autoClose] && typeof this[_fd] === 'number') {\n      const fd = this[_fd]\n      this[_fd] = null\n      fs.closeSync(fd)\n      this.emit('close')\n    }\n  }\n\n  [_write] (buf) {\n    // throw the original, but try to close if it fails\n    let threw = true\n    try {\n      this[_onwrite](null,\n        fs.writeSync(this[_fd], buf, 0, buf.length, this[_pos]))\n      threw = false\n    } finally {\n      if (threw)\n        try { this[_close]() } catch (_) {}\n    }\n  }\n}\n\nexports.ReadStream = ReadStream\nexports.ReadStreamSync = ReadStreamSync\n\nexports.WriteStream = WriteStream\nexports.WriteStreamSync = WriteStreamSync\n","'use strict'\nconst proc = typeof process === 'object' && process ? process : {\n  stdout: null,\n  stderr: null,\n}\nconst EE = require('events')\nconst Stream = require('stream')\nconst Yallist = require('yallist')\nconst SD = require('string_decoder').StringDecoder\n\nconst EOF = Symbol('EOF')\nconst MAYBE_EMIT_END = Symbol('maybeEmitEnd')\nconst EMITTED_END = Symbol('emittedEnd')\nconst EMITTING_END = Symbol('emittingEnd')\nconst EMITTED_ERROR = Symbol('emittedError')\nconst CLOSED = Symbol('closed')\nconst READ = Symbol('read')\nconst FLUSH = Symbol('flush')\nconst FLUSHCHUNK = Symbol('flushChunk')\nconst ENCODING = Symbol('encoding')\nconst DECODER = Symbol('decoder')\nconst FLOWING = Symbol('flowing')\nconst PAUSED = Symbol('paused')\nconst RESUME = Symbol('resume')\nconst BUFFERLENGTH = Symbol('bufferLength')\nconst BUFFERPUSH = Symbol('bufferPush')\nconst BUFFERSHIFT = Symbol('bufferShift')\nconst OBJECTMODE = Symbol('objectMode')\nconst DESTROYED = Symbol('destroyed')\n\n// TODO remove when Node v8 support drops\nconst doIter = global._MP_NO_ITERATOR_SYMBOLS_  !== '1'\nconst ASYNCITERATOR = doIter && Symbol.asyncIterator\n  || Symbol('asyncIterator not implemented')\nconst ITERATOR = doIter && Symbol.iterator\n  || Symbol('iterator not implemented')\n\n// events that mean 'the stream is over'\n// these are treated specially, and re-emitted\n// if they are listened for after emitting.\nconst isEndish = ev =>\n  ev === 'end' ||\n  ev === 'finish' ||\n  ev === 'prefinish'\n\nconst isArrayBuffer = b => b instanceof ArrayBuffer ||\n  typeof b === 'object' &&\n  b.constructor &&\n  b.constructor.name === 'ArrayBuffer' &&\n  b.byteLength >= 0\n\nconst isArrayBufferView = b => !Buffer.isBuffer(b) && ArrayBuffer.isView(b)\n\nmodule.exports = class Minipass extends Stream {\n  constructor (options) {\n    super()\n    this[FLOWING] = false\n    // whether we're explicitly paused\n    this[PAUSED] = false\n    this.pipes = new Yallist()\n    this.buffer = new Yallist()\n    this[OBJECTMODE] = options && options.objectMode || false\n    if (this[OBJECTMODE])\n      this[ENCODING] = null\n    else\n      this[ENCODING] = options && options.encoding || null\n    if (this[ENCODING] === 'buffer')\n      this[ENCODING] = null\n    this[DECODER] = this[ENCODING] ? new SD(this[ENCODING]) : null\n    this[EOF] = false\n    this[EMITTED_END] = false\n    this[EMITTING_END] = false\n    this[CLOSED] = false\n    this[EMITTED_ERROR] = null\n    this.writable = true\n    this.readable = true\n    this[BUFFERLENGTH] = 0\n    this[DESTROYED] = false\n  }\n\n  get bufferLength () { return this[BUFFERLENGTH] }\n\n  get encoding () { return this[ENCODING] }\n  set encoding (enc) {\n    if (this[OBJECTMODE])\n      throw new Error('cannot set encoding in objectMode')\n\n    if (this[ENCODING] && enc !== this[ENCODING] &&\n        (this[DECODER] && this[DECODER].lastNeed || this[BUFFERLENGTH]))\n      throw new Error('cannot change encoding')\n\n    if (this[ENCODING] !== enc) {\n      this[DECODER] = enc ? new SD(enc) : null\n      if (this.buffer.length)\n        this.buffer = this.buffer.map(chunk => this[DECODER].write(chunk))\n    }\n\n    this[ENCODING] = enc\n  }\n\n  setEncoding (enc) {\n    this.encoding = enc\n  }\n\n  get objectMode () { return this[OBJECTMODE] }\n  set objectMode (om) { this[OBJECTMODE] = this[OBJECTMODE] || !!om }\n\n  write (chunk, encoding, cb) {\n    if (this[EOF])\n      throw new Error('write after end')\n\n    if (this[DESTROYED]) {\n      this.emit('error', Object.assign(\n        new Error('Cannot call write after a stream was destroyed'),\n        { code: 'ERR_STREAM_DESTROYED' }\n      ))\n      return true\n    }\n\n    if (typeof encoding === 'function')\n      cb = encoding, encoding = 'utf8'\n\n    if (!encoding)\n      encoding = 'utf8'\n\n    // convert array buffers and typed array views into buffers\n    // at some point in the future, we may want to do the opposite!\n    // leave strings and buffers as-is\n    // anything else switches us into object mode\n    if (!this[OBJECTMODE] && !Buffer.isBuffer(chunk)) {\n      if (isArrayBufferView(chunk))\n        chunk = Buffer.from(chunk.buffer, chunk.byteOffset, chunk.byteLength)\n      else if (isArrayBuffer(chunk))\n        chunk = Buffer.from(chunk)\n      else if (typeof chunk !== 'string')\n        // use the setter so we throw if we have encoding set\n        this.objectMode = true\n    }\n\n    // this ensures at this point that the chunk is a buffer or string\n    // don't buffer it up or send it to the decoder\n    if (!this.objectMode && !chunk.length) {\n      if (this[BUFFERLENGTH] !== 0)\n        this.emit('readable')\n      if (cb)\n        cb()\n      return this.flowing\n    }\n\n    // fast-path writing strings of same encoding to a stream with\n    // an empty buffer, skipping the buffer/decoder dance\n    if (typeof chunk === 'string' && !this[OBJECTMODE] &&\n        // unless it is a string already ready for us to use\n        !(encoding === this[ENCODING] && !this[DECODER].lastNeed)) {\n      chunk = Buffer.from(chunk, encoding)\n    }\n\n    if (Buffer.isBuffer(chunk) && this[ENCODING])\n      chunk = this[DECODER].write(chunk)\n\n    if (this.flowing) {\n      // if we somehow have something in the buffer, but we think we're\n      // flowing, then we need to flush all that out first, or we get\n      // chunks coming in out of order.  Can't emit 'drain' here though,\n      // because we're mid-write, so that'd be bad.\n      if (this[BUFFERLENGTH] !== 0)\n        this[FLUSH](true)\n\n      // if we are still flowing after flushing the buffer we can emit the\n      // chunk otherwise we have to buffer it.\n      this.flowing\n        ? this.emit('data', chunk)\n        : this[BUFFERPUSH](chunk)\n    } else\n      this[BUFFERPUSH](chunk)\n\n    if (this[BUFFERLENGTH] !== 0)\n      this.emit('readable')\n\n    if (cb)\n      cb()\n\n    return this.flowing\n  }\n\n  read (n) {\n    if (this[DESTROYED])\n      return null\n\n    try {\n      if (this[BUFFERLENGTH] === 0 || n === 0 || n > this[BUFFERLENGTH])\n        return null\n\n      if (this[OBJECTMODE])\n        n = null\n\n      if (this.buffer.length > 1 && !this[OBJECTMODE]) {\n        if (this.encoding)\n          this.buffer = new Yallist([\n            Array.from(this.buffer).join('')\n          ])\n        else\n          this.buffer = new Yallist([\n            Buffer.concat(Array.from(this.buffer), this[BUFFERLENGTH])\n          ])\n      }\n\n      return this[READ](n || null, this.buffer.head.value)\n    } finally {\n      this[MAYBE_EMIT_END]()\n    }\n  }\n\n  [READ] (n, chunk) {\n    if (n === chunk.length || n === null)\n      this[BUFFERSHIFT]()\n    else {\n      this.buffer.head.value = chunk.slice(n)\n      chunk = chunk.slice(0, n)\n      this[BUFFERLENGTH] -= n\n    }\n\n    this.emit('data', chunk)\n\n    if (!this.buffer.length && !this[EOF])\n      this.emit('drain')\n\n    return chunk\n  }\n\n  end (chunk, encoding, cb) {\n    if (typeof chunk === 'function')\n      cb = chunk, chunk = null\n    if (typeof encoding === 'function')\n      cb = encoding, encoding = 'utf8'\n    if (chunk)\n      this.write(chunk, encoding)\n    if (cb)\n      this.once('end', cb)\n    this[EOF] = true\n    this.writable = false\n\n    // if we haven't written anything, then go ahead and emit,\n    // even if we're not reading.\n    // we'll re-emit if a new 'end' listener is added anyway.\n    // This makes MP more suitable to write-only use cases.\n    if (this.flowing || !this[PAUSED])\n      this[MAYBE_EMIT_END]()\n    return this\n  }\n\n  // don't let the internal resume be overwritten\n  [RESUME] () {\n    if (this[DESTROYED])\n      return\n\n    this[PAUSED] = false\n    this[FLOWING] = true\n    this.emit('resume')\n    if (this.buffer.length)\n      this[FLUSH]()\n    else if (this[EOF])\n      this[MAYBE_EMIT_END]()\n    else\n      this.emit('drain')\n  }\n\n  resume () {\n    return this[RESUME]()\n  }\n\n  pause () {\n    this[FLOWING] = false\n    this[PAUSED] = true\n  }\n\n  get destroyed () {\n    return this[DESTROYED]\n  }\n\n  get flowing () {\n    return this[FLOWING]\n  }\n\n  get paused () {\n    return this[PAUSED]\n  }\n\n  [BUFFERPUSH] (chunk) {\n    if (this[OBJECTMODE])\n      this[BUFFERLENGTH] += 1\n    else\n      this[BUFFERLENGTH] += chunk.length\n    return this.buffer.push(chunk)\n  }\n\n  [BUFFERSHIFT] () {\n    if (this.buffer.length) {\n      if (this[OBJECTMODE])\n        this[BUFFERLENGTH] -= 1\n      else\n        this[BUFFERLENGTH] -= this.buffer.head.value.length\n    }\n    return this.buffer.shift()\n  }\n\n  [FLUSH] (noDrain) {\n    do {} while (this[FLUSHCHUNK](this[BUFFERSHIFT]()))\n\n    if (!noDrain && !this.buffer.length && !this[EOF])\n      this.emit('drain')\n  }\n\n  [FLUSHCHUNK] (chunk) {\n    return chunk ? (this.emit('data', chunk), this.flowing) : false\n  }\n\n  pipe (dest, opts) {\n    if (this[DESTROYED])\n      return\n\n    const ended = this[EMITTED_END]\n    opts = opts || {}\n    if (dest === proc.stdout || dest === proc.stderr)\n      opts.end = false\n    else\n      opts.end = opts.end !== false\n\n    const p = { dest: dest, opts: opts, ondrain: _ => this[RESUME]() }\n    this.pipes.push(p)\n\n    dest.on('drain', p.ondrain)\n    this[RESUME]()\n    // piping an ended stream ends immediately\n    if (ended && p.opts.end)\n      p.dest.end()\n    return dest\n  }\n\n  addListener (ev, fn) {\n    return this.on(ev, fn)\n  }\n\n  on (ev, fn) {\n    try {\n      return super.on(ev, fn)\n    } finally {\n      if (ev === 'data' && !this.pipes.length && !this.flowing)\n        this[RESUME]()\n      else if (isEndish(ev) && this[EMITTED_END]) {\n        super.emit(ev)\n        this.removeAllListeners(ev)\n      } else if (ev === 'error' && this[EMITTED_ERROR]) {\n        fn.call(this, this[EMITTED_ERROR])\n      }\n    }\n  }\n\n  get emittedEnd () {\n    return this[EMITTED_END]\n  }\n\n  [MAYBE_EMIT_END] () {\n    if (!this[EMITTING_END] &&\n        !this[EMITTED_END] &&\n        !this[DESTROYED] &&\n        this.buffer.length === 0 &&\n        this[EOF]) {\n      this[EMITTING_END] = true\n      this.emit('end')\n      this.emit('prefinish')\n      this.emit('finish')\n      if (this[CLOSED])\n        this.emit('close')\n      this[EMITTING_END] = false\n    }\n  }\n\n  emit (ev, data) {\n    // error and close are only events allowed after calling destroy()\n    if (ev !== 'error' && ev !== 'close' && ev !== DESTROYED && this[DESTROYED])\n      return\n    else if (ev === 'data') {\n      if (!data)\n        return\n\n      if (this.pipes.length)\n        this.pipes.forEach(p =>\n          p.dest.write(data) === false && this.pause())\n    } else if (ev === 'end') {\n      // only actual end gets this treatment\n      if (this[EMITTED_END] === true)\n        return\n\n      this[EMITTED_END] = true\n      this.readable = false\n\n      if (this[DECODER]) {\n        data = this[DECODER].end()\n        if (data) {\n          this.pipes.forEach(p => p.dest.write(data))\n          super.emit('data', data)\n        }\n      }\n\n      this.pipes.forEach(p => {\n        p.dest.removeListener('drain', p.ondrain)\n        if (p.opts.end)\n          p.dest.end()\n      })\n    } else if (ev === 'close') {\n      this[CLOSED] = true\n      // don't emit close before 'end' and 'finish'\n      if (!this[EMITTED_END] && !this[DESTROYED])\n        return\n    } else if (ev === 'error') {\n      this[EMITTED_ERROR] = data\n    }\n\n    // TODO: replace with a spread operator when Node v4 support drops\n    const args = new Array(arguments.length)\n    args[0] = ev\n    args[1] = data\n    if (arguments.length > 2) {\n      for (let i = 2; i < arguments.length; i++) {\n        args[i] = arguments[i]\n      }\n    }\n\n    try {\n      return super.emit.apply(this, args)\n    } finally {\n      if (!isEndish(ev))\n        this[MAYBE_EMIT_END]()\n      else\n        this.removeAllListeners(ev)\n    }\n  }\n\n  // const all = await stream.collect()\n  collect () {\n    const buf = []\n    if (!this[OBJECTMODE])\n      buf.dataLength = 0\n    // set the promise first, in case an error is raised\n    // by triggering the flow here.\n    const p = this.promise()\n    this.on('data', c => {\n      buf.push(c)\n      if (!this[OBJECTMODE])\n        buf.dataLength += c.length\n    })\n    return p.then(() => buf)\n  }\n\n  // const data = await stream.concat()\n  concat () {\n    return this[OBJECTMODE]\n      ? Promise.reject(new Error('cannot concat in objectMode'))\n      : this.collect().then(buf =>\n          this[OBJECTMODE]\n            ? Promise.reject(new Error('cannot concat in objectMode'))\n            : this[ENCODING] ? buf.join('') : Buffer.concat(buf, buf.dataLength))\n  }\n\n  // stream.promise().then(() => done, er => emitted error)\n  promise () {\n    return new Promise((resolve, reject) => {\n      this.on(DESTROYED, () => reject(new Error('stream destroyed')))\n      this.on('error', er => reject(er))\n      this.on('end', () => resolve())\n    })\n  }\n\n  // for await (let chunk of stream)\n  [ASYNCITERATOR] () {\n    const next = () => {\n      const res = this.read()\n      if (res !== null)\n        return Promise.resolve({ done: false, value: res })\n\n      if (this[EOF])\n        return Promise.resolve({ done: true })\n\n      let resolve = null\n      let reject = null\n      const onerr = er => {\n        this.removeListener('data', ondata)\n        this.removeListener('end', onend)\n        reject(er)\n      }\n      const ondata = value => {\n        this.removeListener('error', onerr)\n        this.removeListener('end', onend)\n        this.pause()\n        resolve({ value: value, done: !!this[EOF] })\n      }\n      const onend = () => {\n        this.removeListener('error', onerr)\n        this.removeListener('data', ondata)\n        resolve({ done: true })\n      }\n      const ondestroy = () => onerr(new Error('stream destroyed'))\n      return new Promise((res, rej) => {\n        reject = rej\n        resolve = res\n        this.once(DESTROYED, ondestroy)\n        this.once('error', onerr)\n        this.once('end', onend)\n        this.once('data', ondata)\n      })\n    }\n\n    return { next }\n  }\n\n  // for (let chunk of stream)\n  [ITERATOR] () {\n    const next = () => {\n      const value = this.read()\n      const done = value === null\n      return { value, done }\n    }\n    return { next }\n  }\n\n  destroy (er) {\n    if (this[DESTROYED]) {\n      if (er)\n        this.emit('error', er)\n      else\n        this.emit(DESTROYED)\n      return this\n    }\n\n    this[DESTROYED] = true\n\n    // throw away all buffered data, it's never coming out\n    this.buffer = new Yallist()\n    this[BUFFERLENGTH] = 0\n\n    if (typeof this.close === 'function' && !this[CLOSED])\n      this.close()\n\n    if (er)\n      this.emit('error', er)\n    else // if no error to emit, still reject pending promises\n      this.emit(DESTROYED)\n\n    return this\n  }\n\n  static isStream (s) {\n    return !!s && (s instanceof Minipass || s instanceof Stream ||\n      s instanceof EE && (\n        typeof s.pipe === 'function' || // readable\n        (typeof s.write === 'function' && typeof s.end === 'function') // writable\n      ))\n  }\n}\n","// Update with any zlib constants that are added or changed in the future.\n// Node v6 didn't export this, so we just hard code the version and rely\n// on all the other hard-coded values from zlib v4736.  When node v6\n// support drops, we can just export the realZlibConstants object.\nconst realZlibConstants = require('zlib').constants ||\n  /* istanbul ignore next */ { ZLIB_VERNUM: 4736 }\n\nmodule.exports = Object.freeze(Object.assign(Object.create(null), {\n  Z_NO_FLUSH: 0,\n  Z_PARTIAL_FLUSH: 1,\n  Z_SYNC_FLUSH: 2,\n  Z_FULL_FLUSH: 3,\n  Z_FINISH: 4,\n  Z_BLOCK: 5,\n  Z_OK: 0,\n  Z_STREAM_END: 1,\n  Z_NEED_DICT: 2,\n  Z_ERRNO: -1,\n  Z_STREAM_ERROR: -2,\n  Z_DATA_ERROR: -3,\n  Z_MEM_ERROR: -4,\n  Z_BUF_ERROR: -5,\n  Z_VERSION_ERROR: -6,\n  Z_NO_COMPRESSION: 0,\n  Z_BEST_SPEED: 1,\n  Z_BEST_COMPRESSION: 9,\n  Z_DEFAULT_COMPRESSION: -1,\n  Z_FILTERED: 1,\n  Z_HUFFMAN_ONLY: 2,\n  Z_RLE: 3,\n  Z_FIXED: 4,\n  Z_DEFAULT_STRATEGY: 0,\n  DEFLATE: 1,\n  INFLATE: 2,\n  GZIP: 3,\n  GUNZIP: 4,\n  DEFLATERAW: 5,\n  INFLATERAW: 6,\n  UNZIP: 7,\n  BROTLI_DECODE: 8,\n  BROTLI_ENCODE: 9,\n  Z_MIN_WINDOWBITS: 8,\n  Z_MAX_WINDOWBITS: 15,\n  Z_DEFAULT_WINDOWBITS: 15,\n  Z_MIN_CHUNK: 64,\n  Z_MAX_CHUNK: Infinity,\n  Z_DEFAULT_CHUNK: 16384,\n  Z_MIN_MEMLEVEL: 1,\n  Z_MAX_MEMLEVEL: 9,\n  Z_DEFAULT_MEMLEVEL: 8,\n  Z_MIN_LEVEL: -1,\n  Z_MAX_LEVEL: 9,\n  Z_DEFAULT_LEVEL: -1,\n  BROTLI_OPERATION_PROCESS: 0,\n  BROTLI_OPERATION_FLUSH: 1,\n  BROTLI_OPERATION_FINISH: 2,\n  BROTLI_OPERATION_EMIT_METADATA: 3,\n  BROTLI_MODE_GENERIC: 0,\n  BROTLI_MODE_TEXT: 1,\n  BROTLI_MODE_FONT: 2,\n  BROTLI_DEFAULT_MODE: 0,\n  BROTLI_MIN_QUALITY: 0,\n  BROTLI_MAX_QUALITY: 11,\n  BROTLI_DEFAULT_QUALITY: 11,\n  BROTLI_MIN_WINDOW_BITS: 10,\n  BROTLI_MAX_WINDOW_BITS: 24,\n  BROTLI_LARGE_MAX_WINDOW_BITS: 30,\n  BROTLI_DEFAULT_WINDOW: 22,\n  BROTLI_MIN_INPUT_BLOCK_BITS: 16,\n  BROTLI_MAX_INPUT_BLOCK_BITS: 24,\n  BROTLI_PARAM_MODE: 0,\n  BROTLI_PARAM_QUALITY: 1,\n  BROTLI_PARAM_LGWIN: 2,\n  BROTLI_PARAM_LGBLOCK: 3,\n  BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING: 4,\n  BROTLI_PARAM_SIZE_HINT: 5,\n  BROTLI_PARAM_LARGE_WINDOW: 6,\n  BROTLI_PARAM_NPOSTFIX: 7,\n  BROTLI_PARAM_NDIRECT: 8,\n  BROTLI_DECODER_RESULT_ERROR: 0,\n  BROTLI_DECODER_RESULT_SUCCESS: 1,\n  BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT: 2,\n  BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT: 3,\n  BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION: 0,\n  BROTLI_DECODER_PARAM_LARGE_WINDOW: 1,\n  BROTLI_DECODER_NO_ERROR: 0,\n  BROTLI_DECODER_SUCCESS: 1,\n  BROTLI_DECODER_NEEDS_MORE_INPUT: 2,\n  BROTLI_DECODER_NEEDS_MORE_OUTPUT: 3,\n  BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE: -1,\n  BROTLI_DECODER_ERROR_FORMAT_RESERVED: -2,\n  BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE: -3,\n  BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET: -4,\n  BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME: -5,\n  BROTLI_DECODER_ERROR_FORMAT_CL_SPACE: -6,\n  BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE: -7,\n  BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT: -8,\n  BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1: -9,\n  BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2: -10,\n  BROTLI_DECODER_ERROR_FORMAT_TRANSFORM: -11,\n  BROTLI_DECODER_ERROR_FORMAT_DICTIONARY: -12,\n  BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS: -13,\n  BROTLI_DECODER_ERROR_FORMAT_PADDING_1: -14,\n  BROTLI_DECODER_ERROR_FORMAT_PADDING_2: -15,\n  BROTLI_DECODER_ERROR_FORMAT_DISTANCE: -16,\n  BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET: -19,\n  BROTLI_DECODER_ERROR_INVALID_ARGUMENTS: -20,\n  BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES: -21,\n  BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS: -22,\n  BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP: -25,\n  BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1: -26,\n  BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2: -27,\n  BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES: -30,\n  BROTLI_DECODER_ERROR_UNREACHABLE: -31,\n}, realZlibConstants))\n","'use strict'\n\nconst assert = require('assert')\nconst Buffer = require('buffer').Buffer\nconst realZlib = require('zlib')\n\nconst constants = exports.constants = require('./constants.js')\nconst Minipass = require('minipass')\n\nconst OriginalBufferConcat = Buffer.concat\n\nconst _superWrite = Symbol('_superWrite')\nclass ZlibError extends Error {\n  constructor (err) {\n    super('zlib: ' + err.message)\n    this.code = err.code\n    this.errno = err.errno\n    /* istanbul ignore if */\n    if (!this.code)\n      this.code = 'ZLIB_ERROR'\n\n    this.message = 'zlib: ' + err.message\n    Error.captureStackTrace(this, this.constructor)\n  }\n\n  get name () {\n    return 'ZlibError'\n  }\n}\n\n// the Zlib class they all inherit from\n// This thing manages the queue of requests, and returns\n// true or false if there is anything in the queue when\n// you call the .write() method.\nconst _opts = Symbol('opts')\nconst _flushFlag = Symbol('flushFlag')\nconst _finishFlushFlag = Symbol('finishFlushFlag')\nconst _fullFlushFlag = Symbol('fullFlushFlag')\nconst _handle = Symbol('handle')\nconst _onError = Symbol('onError')\nconst _sawError = Symbol('sawError')\nconst _level = Symbol('level')\nconst _strategy = Symbol('strategy')\nconst _ended = Symbol('ended')\nconst _defaultFullFlush = Symbol('_defaultFullFlush')\n\nclass ZlibBase extends Minipass {\n  constructor (opts, mode) {\n    if (!opts || typeof opts !== 'object')\n      throw new TypeError('invalid options for ZlibBase constructor')\n\n    super(opts)\n    this[_sawError] = false\n    this[_ended] = false\n    this[_opts] = opts\n\n    this[_flushFlag] = opts.flush\n    this[_finishFlushFlag] = opts.finishFlush\n    // this will throw if any options are invalid for the class selected\n    try {\n      this[_handle] = new realZlib[mode](opts)\n    } catch (er) {\n      // make sure that all errors get decorated properly\n      throw new ZlibError(er)\n    }\n\n    this[_onError] = (err) => {\n      // no sense raising multiple errors, since we abort on the first one.\n      if (this[_sawError])\n        return\n\n      this[_sawError] = true\n\n      // there is no way to cleanly recover.\n      // continuing only obscures problems.\n      this.close()\n      this.emit('error', err)\n    }\n\n    this[_handle].on('error', er => this[_onError](new ZlibError(er)))\n    this.once('end', () => this.close)\n  }\n\n  close () {\n    if (this[_handle]) {\n      this[_handle].close()\n      this[_handle] = null\n      this.emit('close')\n    }\n  }\n\n  reset () {\n    if (!this[_sawError]) {\n      assert(this[_handle], 'zlib binding closed')\n      return this[_handle].reset()\n    }\n  }\n\n  flush (flushFlag) {\n    if (this.ended)\n      return\n\n    if (typeof flushFlag !== 'number')\n      flushFlag = this[_fullFlushFlag]\n    this.write(Object.assign(Buffer.alloc(0), { [_flushFlag]: flushFlag }))\n  }\n\n  end (chunk, encoding, cb) {\n    if (chunk)\n      this.write(chunk, encoding)\n    this.flush(this[_finishFlushFlag])\n    this[_ended] = true\n    return super.end(null, null, cb)\n  }\n\n  get ended () {\n    return this[_ended]\n  }\n\n  write (chunk, encoding, cb) {\n    // process the chunk using the sync process\n    // then super.write() all the outputted chunks\n    if (typeof encoding === 'function')\n      cb = encoding, encoding = 'utf8'\n\n    if (typeof chunk === 'string')\n      chunk = Buffer.from(chunk, encoding)\n\n    if (this[_sawError])\n      return\n    assert(this[_handle], 'zlib binding closed')\n\n    // _processChunk tries to .close() the native handle after it's done, so we\n    // intercept that by temporarily making it a no-op.\n    const nativeHandle = this[_handle]._handle\n    const originalNativeClose = nativeHandle.close\n    nativeHandle.close = () => {}\n    const originalClose = this[_handle].close\n    this[_handle].close = () => {}\n    // It also calls `Buffer.concat()` at the end, which may be convenient\n    // for some, but which we are not interested in as it slows us down.\n    Buffer.concat = (args) => args\n    let result\n    try {\n      const flushFlag = typeof chunk[_flushFlag] === 'number'\n        ? chunk[_flushFlag] : this[_flushFlag]\n      result = this[_handle]._processChunk(chunk, flushFlag)\n      // if we don't throw, reset it back how it was\n      Buffer.concat = OriginalBufferConcat\n    } catch (err) {\n      // or if we do, put Buffer.concat() back before we emit error\n      // Error events call into user code, which may call Buffer.concat()\n      Buffer.concat = OriginalBufferConcat\n      this[_onError](new ZlibError(err))\n    } finally {\n      if (this[_handle]) {\n        // Core zlib resets `_handle` to null after attempting to close the\n        // native handle. Our no-op handler prevented actual closure, but we\n        // need to restore the `._handle` property.\n        this[_handle]._handle = nativeHandle\n        nativeHandle.close = originalNativeClose\n        this[_handle].close = originalClose\n        // `_processChunk()` adds an 'error' listener. If we don't remove it\n        // after each call, these handlers start piling up.\n        this[_handle].removeAllListeners('error')\n        // make sure OUR error listener is still attached tho\n      }\n    }\n\n    if (this[_handle])\n      this[_handle].on('error', er => this[_onError](new ZlibError(er)))\n\n    let writeReturn\n    if (result) {\n      if (Array.isArray(result) && result.length > 0) {\n        // The first buffer is always `handle._outBuffer`, which would be\n        // re-used for later invocations; so, we always have to copy that one.\n        writeReturn = this[_superWrite](Buffer.from(result[0]))\n        for (let i = 1; i < result.length; i++) {\n          writeReturn = this[_superWrite](result[i])\n        }\n      } else {\n        writeReturn = this[_superWrite](Buffer.from(result))\n      }\n    }\n\n    if (cb)\n      cb()\n    return writeReturn\n  }\n\n  [_superWrite] (data) {\n    return super.write(data)\n  }\n}\n\nclass Zlib extends ZlibBase {\n  constructor (opts, mode) {\n    opts = opts || {}\n\n    opts.flush = opts.flush || constants.Z_NO_FLUSH\n    opts.finishFlush = opts.finishFlush || constants.Z_FINISH\n    super(opts, mode)\n\n    this[_fullFlushFlag] = constants.Z_FULL_FLUSH\n    this[_level] = opts.level\n    this[_strategy] = opts.strategy\n  }\n\n  params (level, strategy) {\n    if (this[_sawError])\n      return\n\n    if (!this[_handle])\n      throw new Error('cannot switch params when binding is closed')\n\n    // no way to test this without also not supporting params at all\n    /* istanbul ignore if */\n    if (!this[_handle].params)\n      throw new Error('not supported in this implementation')\n\n    if (this[_level] !== level || this[_strategy] !== strategy) {\n      this.flush(constants.Z_SYNC_FLUSH)\n      assert(this[_handle], 'zlib binding closed')\n      // .params() calls .flush(), but the latter is always async in the\n      // core zlib. We override .flush() temporarily to intercept that and\n      // flush synchronously.\n      const origFlush = this[_handle].flush\n      this[_handle].flush = (flushFlag, cb) => {\n        this.flush(flushFlag)\n        cb()\n      }\n      try {\n        this[_handle].params(level, strategy)\n      } finally {\n        this[_handle].flush = origFlush\n      }\n      /* istanbul ignore else */\n      if (this[_handle]) {\n        this[_level] = level\n        this[_strategy] = strategy\n      }\n    }\n  }\n}\n\n// minimal 2-byte header\nclass Deflate extends Zlib {\n  constructor (opts) {\n    super(opts, 'Deflate')\n  }\n}\n\nclass Inflate extends Zlib {\n  constructor (opts) {\n    super(opts, 'Inflate')\n  }\n}\n\n// gzip - bigger header, same deflate compression\nconst _portable = Symbol('_portable')\nclass Gzip extends Zlib {\n  constructor (opts) {\n    super(opts, 'Gzip')\n    this[_portable] = opts && !!opts.portable\n  }\n\n  [_superWrite] (data) {\n    if (!this[_portable])\n      return super[_superWrite](data)\n\n    // we'll always get the header emitted in one first chunk\n    // overwrite the OS indicator byte with 0xFF\n    this[_portable] = false\n    data[9] = 255\n    return super[_superWrite](data)\n  }\n}\n\nclass Gunzip extends Zlib {\n  constructor (opts) {\n    super(opts, 'Gunzip')\n  }\n}\n\n// raw - no header\nclass DeflateRaw extends Zlib {\n  constructor (opts) {\n    super(opts, 'DeflateRaw')\n  }\n}\n\nclass InflateRaw extends Zlib {\n  constructor (opts) {\n    super(opts, 'InflateRaw')\n  }\n}\n\n// auto-detect header.\nclass Unzip extends Zlib {\n  constructor (opts) {\n    super(opts, 'Unzip')\n  }\n}\n\nclass Brotli extends ZlibBase {\n  constructor (opts, mode) {\n    opts = opts || {}\n\n    opts.flush = opts.flush || constants.BROTLI_OPERATION_PROCESS\n    opts.finishFlush = opts.finishFlush || constants.BROTLI_OPERATION_FINISH\n\n    super(opts, mode)\n\n    this[_fullFlushFlag] = constants.BROTLI_OPERATION_FLUSH\n  }\n}\n\nclass BrotliCompress extends Brotli {\n  constructor (opts) {\n    super(opts, 'BrotliCompress')\n  }\n}\n\nclass BrotliDecompress extends Brotli {\n  constructor (opts) {\n    super(opts, 'BrotliDecompress')\n  }\n}\n\nexports.Deflate = Deflate\nexports.Inflate = Inflate\nexports.Gzip = Gzip\nexports.Gunzip = Gunzip\nexports.DeflateRaw = DeflateRaw\nexports.InflateRaw = InflateRaw\nexports.Unzip = Unzip\n/* istanbul ignore else */\nif (typeof realZlib.BrotliCompress === 'function') {\n  exports.BrotliCompress = BrotliCompress\n  exports.BrotliDecompress = BrotliDecompress\n} else {\n  exports.BrotliCompress = exports.BrotliDecompress = class {\n    constructor () {\n      throw new Error('Brotli is not supported in this version of Node.js')\n    }\n  }\n}\n","const optsArg = require('./lib/opts-arg.js')\nconst pathArg = require('./lib/path-arg.js')\n\nconst {mkdirpNative, mkdirpNativeSync} = require('./lib/mkdirp-native.js')\nconst {mkdirpManual, mkdirpManualSync} = require('./lib/mkdirp-manual.js')\nconst {useNative, useNativeSync} = require('./lib/use-native.js')\n\n\nconst mkdirp = (path, opts) => {\n  path = pathArg(path)\n  opts = optsArg(opts)\n  return useNative(opts)\n    ? mkdirpNative(path, opts)\n    : mkdirpManual(path, opts)\n}\n\nconst mkdirpSync = (path, opts) => {\n  path = pathArg(path)\n  opts = optsArg(opts)\n  return useNativeSync(opts)\n    ? mkdirpNativeSync(path, opts)\n    : mkdirpManualSync(path, opts)\n}\n\nmkdirp.sync = mkdirpSync\nmkdirp.native = (path, opts) => mkdirpNative(pathArg(path), optsArg(opts))\nmkdirp.manual = (path, opts) => mkdirpManual(pathArg(path), optsArg(opts))\nmkdirp.nativeSync = (path, opts) => mkdirpNativeSync(pathArg(path), optsArg(opts))\nmkdirp.manualSync = (path, opts) => mkdirpManualSync(pathArg(path), optsArg(opts))\n\nmodule.exports = mkdirp\n","const {dirname} = require('path')\n\nconst findMade = (opts, parent, path = undefined) => {\n  // we never want the 'made' return value to be a root directory\n  if (path === parent)\n    return Promise.resolve()\n\n  return opts.statAsync(parent).then(\n    st => st.isDirectory() ? path : undefined, // will fail later\n    er => er.code === 'ENOENT'\n      ? findMade(opts, dirname(parent), parent)\n      : undefined\n  )\n}\n\nconst findMadeSync = (opts, parent, path = undefined) => {\n  if (path === parent)\n    return undefined\n\n  try {\n    return opts.statSync(parent).isDirectory() ? path : undefined\n  } catch (er) {\n    return er.code === 'ENOENT'\n      ? findMadeSync(opts, dirname(parent), parent)\n      : undefined\n  }\n}\n\nmodule.exports = {findMade, findMadeSync}\n","const {dirname} = require('path')\n\nconst mkdirpManual = (path, opts, made) => {\n  opts.recursive = false\n  const parent = dirname(path)\n  if (parent === path) {\n    return opts.mkdirAsync(path, opts).catch(er => {\n      // swallowed by recursive implementation on posix systems\n      // any other error is a failure\n      if (er.code !== 'EISDIR')\n        throw er\n    })\n  }\n\n  return opts.mkdirAsync(path, opts).then(() => made || path, er => {\n    if (er.code === 'ENOENT')\n      return mkdirpManual(parent, opts)\n        .then(made => mkdirpManual(path, opts, made))\n    if (er.code !== 'EEXIST' && er.code !== 'EROFS')\n      throw er\n    return opts.statAsync(path).then(st => {\n      if (st.isDirectory())\n        return made\n      else\n        throw er\n    }, () => { throw er })\n  })\n}\n\nconst mkdirpManualSync = (path, opts, made) => {\n  const parent = dirname(path)\n  opts.recursive = false\n\n  if (parent === path) {\n    try {\n      return opts.mkdirSync(path, opts)\n    } catch (er) {\n      // swallowed by recursive implementation on posix systems\n      // any other error is a failure\n      if (er.code !== 'EISDIR')\n        throw er\n      else\n        return\n    }\n  }\n\n  try {\n    opts.mkdirSync(path, opts)\n    return made || path\n  } catch (er) {\n    if (er.code === 'ENOENT')\n      return mkdirpManualSync(path, opts, mkdirpManualSync(parent, opts, made))\n    if (er.code !== 'EEXIST' && er.code !== 'EROFS')\n      throw er\n    try {\n      if (!opts.statSync(path).isDirectory())\n        throw er\n    } catch (_) {\n      throw er\n    }\n  }\n}\n\nmodule.exports = {mkdirpManual, mkdirpManualSync}\n","const {dirname} = require('path')\nconst {findMade, findMadeSync} = require('./find-made.js')\nconst {mkdirpManual, mkdirpManualSync} = require('./mkdirp-manual.js')\n\nconst mkdirpNative = (path, opts) => {\n  opts.recursive = true\n  const parent = dirname(path)\n  if (parent === path)\n    return opts.mkdirAsync(path, opts)\n\n  return findMade(opts, path).then(made =>\n    opts.mkdirAsync(path, opts).then(() => made)\n    .catch(er => {\n      if (er.code === 'ENOENT')\n        return mkdirpManual(path, opts)\n      else\n        throw er\n    }))\n}\n\nconst mkdirpNativeSync = (path, opts) => {\n  opts.recursive = true\n  const parent = dirname(path)\n  if (parent === path)\n    return opts.mkdirSync(path, opts)\n\n  const made = findMadeSync(opts, path)\n  try {\n    opts.mkdirSync(path, opts)\n    return made\n  } catch (er) {\n    if (er.code === 'ENOENT')\n      return mkdirpManualSync(path, opts)\n    else\n      throw er\n  }\n}\n\nmodule.exports = {mkdirpNative, mkdirpNativeSync}\n","const { promisify } = require('util')\nconst fs = require('fs')\nconst optsArg = opts => {\n  if (!opts)\n    opts = { mode: 0o777, fs }\n  else if (typeof opts === 'object')\n    opts = { mode: 0o777, fs, ...opts }\n  else if (typeof opts === 'number')\n    opts = { mode: opts, fs }\n  else if (typeof opts === 'string')\n    opts = { mode: parseInt(opts, 8), fs }\n  else\n    throw new TypeError('invalid options argument')\n\n  opts.mkdir = opts.mkdir || opts.fs.mkdir || fs.mkdir\n  opts.mkdirAsync = promisify(opts.mkdir)\n  opts.stat = opts.stat || opts.fs.stat || fs.stat\n  opts.statAsync = promisify(opts.stat)\n  opts.statSync = opts.statSync || opts.fs.statSync || fs.statSync\n  opts.mkdirSync = opts.mkdirSync || opts.fs.mkdirSync || fs.mkdirSync\n  return opts\n}\nmodule.exports = optsArg\n","const platform = process.env.__TESTING_MKDIRP_PLATFORM__ || process.platform\nconst { resolve, parse } = require('path')\nconst pathArg = path => {\n  if (/\\0/.test(path)) {\n    // simulate same failure that node raises\n    throw Object.assign(\n      new TypeError('path must be a string without null bytes'),\n      {\n        path,\n        code: 'ERR_INVALID_ARG_VALUE',\n      }\n    )\n  }\n\n  path = resolve(path)\n  if (platform === 'win32') {\n    const badWinChars = /[*|\"<>?:]/\n    const {root} = parse(path)\n    if (badWinChars.test(path.substr(root.length))) {\n      throw Object.assign(new Error('Illegal characters in path.'), {\n        path,\n        code: 'EINVAL',\n      })\n    }\n  }\n\n  return path\n}\nmodule.exports = pathArg\n","const fs = require('fs')\n\nconst version = process.env.__TESTING_MKDIRP_NODE_VERSION__ || process.version\nconst versArr = version.replace(/^v/, '').split('.')\nconst hasNative = +versArr[0] > 10 || +versArr[0] === 10 && +versArr[1] >= 12\n\nconst useNative = !hasNative ? () => false : opts => opts.mkdir === fs.mkdir\nconst useNativeSync = !hasNative ? () => false : opts => opts.mkdirSync === fs.mkdirSync\n\nmodule.exports = {useNative, useNativeSync}\n","var fs = require('fs')\nvar path = require('path')\nvar os = require('os')\n\n// Workaround to fix webpack's build warnings: 'the request of a dependency is an expression'\nvar runtimeRequire = typeof __webpack_require__ === 'function' ? __non_webpack_require__ : require // eslint-disable-line\n\nvar vars = (process.config && process.config.variables) || {}\nvar prebuildsOnly = !!process.env.PREBUILDS_ONLY\nvar abi = process.versions.modules // TODO: support old node where this is undef\nvar runtime = isElectron() ? 'electron' : 'node'\nvar arch = os.arch()\nvar platform = os.platform()\nvar libc = process.env.LIBC || (isAlpine(platform) ? 'musl' : 'glibc')\nvar armv = process.env.ARM_VERSION || (arch === 'arm64' ? '8' : vars.arm_version) || ''\nvar uv = (process.versions.uv || '').split('.')[0]\n\nmodule.exports = load\n\nfunction load (dir) {\n  return runtimeRequire(load.path(dir))\n}\n\nload.path = function (dir) {\n  dir = path.resolve(dir || '.')\n\n  try {\n    var name = runtimeRequire(path.join(dir, 'package.json')).name.toUpperCase().replace(/-/g, '_')\n    if (process.env[name + '_PREBUILD']) dir = process.env[name + '_PREBUILD']\n  } catch (err) {}\n\n  if (!prebuildsOnly) {\n    var release = getFirst(path.join(dir, 'build/Release'), matchBuild)\n    if (release) return release\n\n    var debug = getFirst(path.join(dir, 'build/Debug'), matchBuild)\n    if (debug) return debug\n  }\n\n  var prebuild = resolve(dir)\n  if (prebuild) return prebuild\n\n  var nearby = resolve(path.dirname(process.execPath))\n  if (nearby) return nearby\n\n  var target = [\n    'platform=' + platform,\n    'arch=' + arch,\n    'runtime=' + runtime,\n    'abi=' + abi,\n    'uv=' + uv,\n    armv ? 'armv=' + armv : '',\n    'libc=' + libc,\n    'node=' + process.versions.node,\n    process.versions.electron ? 'electron=' + process.versions.electron : '',\n    typeof __webpack_require__ === 'function' ? 'webpack=true' : '' // eslint-disable-line\n  ].filter(Boolean).join(' ')\n\n  throw new Error('No native build was found for ' + target + '\\n    loaded from: ' + dir + '\\n')\n\n  function resolve (dir) {\n    // Find matching \"prebuilds/<platform>-<arch>\" directory\n    var tuples = readdirSync(path.join(dir, 'prebuilds')).map(parseTuple)\n    var tuple = tuples.filter(matchTuple(platform, arch)).sort(compareTuples)[0]\n    if (!tuple) return\n\n    // Find most specific flavor first\n    var prebuilds = path.join(dir, 'prebuilds', tuple.name)\n    var parsed = readdirSync(prebuilds).map(parseTags)\n    var candidates = parsed.filter(matchTags(runtime, abi))\n    var winner = candidates.sort(compareTags(runtime))[0]\n    if (winner) return path.join(prebuilds, winner.file)\n  }\n}\n\nfunction readdirSync (dir) {\n  try {\n    return fs.readdirSync(dir)\n  } catch (err) {\n    return []\n  }\n}\n\nfunction getFirst (dir, filter) {\n  var files = readdirSync(dir).filter(filter)\n  return files[0] && path.join(dir, files[0])\n}\n\nfunction matchBuild (name) {\n  return /\\.node$/.test(name)\n}\n\nfunction parseTuple (name) {\n  // Example: darwin-x64+arm64\n  var arr = name.split('-')\n  if (arr.length !== 2) return\n\n  var platform = arr[0]\n  var architectures = arr[1].split('+')\n\n  if (!platform) return\n  if (!architectures.length) return\n  if (!architectures.every(Boolean)) return\n\n  return { name, platform, architectures }\n}\n\nfunction matchTuple (platform, arch) {\n  return function (tuple) {\n    if (tuple == null) return false\n    if (tuple.platform !== platform) return false\n    return tuple.architectures.includes(arch)\n  }\n}\n\nfunction compareTuples (a, b) {\n  // Prefer single-arch prebuilds over multi-arch\n  return a.architectures.length - b.architectures.length\n}\n\nfunction parseTags (file) {\n  var arr = file.split('.')\n  var extension = arr.pop()\n  var tags = { file: file, specificity: 0 }\n\n  if (extension !== 'node') return\n\n  for (var i = 0; i < arr.length; i++) {\n    var tag = arr[i]\n\n    if (tag === 'node' || tag === 'electron' || tag === 'node-webkit') {\n      tags.runtime = tag\n    } else if (tag === 'napi') {\n      tags.napi = true\n    } else if (tag.slice(0, 3) === 'abi') {\n      tags.abi = tag.slice(3)\n    } else if (tag.slice(0, 2) === 'uv') {\n      tags.uv = tag.slice(2)\n    } else if (tag.slice(0, 4) === 'armv') {\n      tags.armv = tag.slice(4)\n    } else if (tag === 'glibc' || tag === 'musl') {\n      tags.libc = tag\n    } else {\n      continue\n    }\n\n    tags.specificity++\n  }\n\n  return tags\n}\n\nfunction matchTags (runtime, abi) {\n  return function (tags) {\n    if (tags == null) return false\n    if (tags.runtime !== runtime && !runtimeAgnostic(tags)) return false\n    if (tags.abi !== abi && !tags.napi) return false\n    if (tags.uv && tags.uv !== uv) return false\n    if (tags.armv && tags.armv !== armv) return false\n    if (tags.libc && tags.libc !== libc) return false\n\n    return true\n  }\n}\n\nfunction runtimeAgnostic (tags) {\n  return tags.runtime === 'node' && tags.napi\n}\n\nfunction compareTags (runtime) {\n  // Precedence: non-agnostic runtime, abi over napi, then by specificity.\n  return function (a, b) {\n    if (a.runtime !== b.runtime) {\n      return a.runtime === runtime ? -1 : 1\n    } else if (a.abi !== b.abi) {\n      return a.abi ? -1 : 1\n    } else if (a.specificity !== b.specificity) {\n      return a.specificity > b.specificity ? -1 : 1\n    } else {\n      return 0\n    }\n  }\n}\n\nfunction isElectron () {\n  if (process.versions && process.versions.electron) return true\n  if (process.env.ELECTRON_RUN_AS_NODE) return true\n  return typeof window !== 'undefined' && window.process && window.process.type === 'renderer'\n}\n\nfunction isAlpine (platform) {\n  return platform === 'linux' && fs.existsSync('/etc/alpine-release')\n}\n\n// Exposed for unit tests\n// TODO: move to lib\nload.parseTags = parseTags\nload.matchTags = matchTags\nload.compareTags = compareTags\nload.parseTuple = parseTuple\nload.matchTuple = matchTuple\nload.compareTuples = compareTuples\n","'use strict'\n\n// high-level commands\nexports.c = exports.create = require('./lib/create.js')\nexports.r = exports.replace = require('./lib/replace.js')\nexports.t = exports.list = require('./lib/list.js')\nexports.u = exports.update = require('./lib/update.js')\nexports.x = exports.extract = require('./lib/extract.js')\n\n// classes\nexports.Pack = require('./lib/pack.js')\nexports.Unpack = require('./lib/unpack.js')\nexports.Parse = require('./lib/parse.js')\nexports.ReadEntry = require('./lib/read-entry.js')\nexports.WriteEntry = require('./lib/write-entry.js')\nexports.Header = require('./lib/header.js')\nexports.Pax = require('./lib/pax.js')\nexports.types = require('./lib/types.js')\n","'use strict'\n\n// tar -c\nconst hlo = require('./high-level-opt.js')\n\nconst Pack = require('./pack.js')\nconst fsm = require('fs-minipass')\nconst t = require('./list.js')\nconst path = require('path')\n\nmodule.exports = (opt_, files, cb) => {\n  if (typeof files === 'function')\n    cb = files\n\n  if (Array.isArray(opt_))\n    files = opt_, opt_ = {}\n\n  if (!files || !Array.isArray(files) || !files.length)\n    throw new TypeError('no files or directories specified')\n\n  files = Array.from(files)\n\n  const opt = hlo(opt_)\n\n  if (opt.sync && typeof cb === 'function')\n    throw new TypeError('callback not supported for sync tar functions')\n\n  if (!opt.file && typeof cb === 'function')\n    throw new TypeError('callback only supported with file option')\n\n  return opt.file && opt.sync ? createFileSync(opt, files)\n    : opt.file ? createFile(opt, files, cb)\n    : opt.sync ? createSync(opt, files)\n    : create(opt, files)\n}\n\nconst createFileSync = (opt, files) => {\n  const p = new Pack.Sync(opt)\n  const stream = new fsm.WriteStreamSync(opt.file, {\n    mode: opt.mode || 0o666,\n  })\n  p.pipe(stream)\n  addFilesSync(p, files)\n}\n\nconst createFile = (opt, files, cb) => {\n  const p = new Pack(opt)\n  const stream = new fsm.WriteStream(opt.file, {\n    mode: opt.mode || 0o666,\n  })\n  p.pipe(stream)\n\n  const promise = new Promise((res, rej) => {\n    stream.on('error', rej)\n    stream.on('close', res)\n    p.on('error', rej)\n  })\n\n  addFilesAsync(p, files)\n\n  return cb ? promise.then(cb, cb) : promise\n}\n\nconst addFilesSync = (p, files) => {\n  files.forEach(file => {\n    if (file.charAt(0) === '@') {\n      t({\n        file: path.resolve(p.cwd, file.substr(1)),\n        sync: true,\n        noResume: true,\n        onentry: entry => p.add(entry),\n      })\n    } else\n      p.add(file)\n  })\n  p.end()\n}\n\nconst addFilesAsync = (p, files) => {\n  while (files.length) {\n    const file = files.shift()\n    if (file.charAt(0) === '@') {\n      return t({\n        file: path.resolve(p.cwd, file.substr(1)),\n        noResume: true,\n        onentry: entry => p.add(entry),\n      }).then(_ => addFilesAsync(p, files))\n    } else\n      p.add(file)\n  }\n  p.end()\n}\n\nconst createSync = (opt, files) => {\n  const p = new Pack.Sync(opt)\n  addFilesSync(p, files)\n  return p\n}\n\nconst create = (opt, files) => {\n  const p = new Pack(opt)\n  addFilesAsync(p, files)\n  return p\n}\n","'use strict'\n\n// tar -x\nconst hlo = require('./high-level-opt.js')\nconst Unpack = require('./unpack.js')\nconst fs = require('fs')\nconst fsm = require('fs-minipass')\nconst path = require('path')\nconst stripSlash = require('./strip-trailing-slashes.js')\n\nmodule.exports = (opt_, files, cb) => {\n  if (typeof opt_ === 'function')\n    cb = opt_, files = null, opt_ = {}\n  else if (Array.isArray(opt_))\n    files = opt_, opt_ = {}\n\n  if (typeof files === 'function')\n    cb = files, files = null\n\n  if (!files)\n    files = []\n  else\n    files = Array.from(files)\n\n  const opt = hlo(opt_)\n\n  if (opt.sync && typeof cb === 'function')\n    throw new TypeError('callback not supported for sync tar functions')\n\n  if (!opt.file && typeof cb === 'function')\n    throw new TypeError('callback only supported with file option')\n\n  if (files.length)\n    filesFilter(opt, files)\n\n  return opt.file && opt.sync ? extractFileSync(opt)\n    : opt.file ? extractFile(opt, cb)\n    : opt.sync ? extractSync(opt)\n    : extract(opt)\n}\n\n// construct a filter that limits the file entries listed\n// include child entries if a dir is included\nconst filesFilter = (opt, files) => {\n  const map = new Map(files.map(f => [stripSlash(f), true]))\n  const filter = opt.filter\n\n  const mapHas = (file, r) => {\n    const root = r || path.parse(file).root || '.'\n    const ret = file === root ? false\n      : map.has(file) ? map.get(file)\n      : mapHas(path.dirname(file), root)\n\n    map.set(file, ret)\n    return ret\n  }\n\n  opt.filter = filter\n    ? (file, entry) => filter(file, entry) && mapHas(stripSlash(file))\n    : file => mapHas(stripSlash(file))\n}\n\nconst extractFileSync = opt => {\n  const u = new Unpack.Sync(opt)\n\n  const file = opt.file\n  const stat = fs.statSync(file)\n  // This trades a zero-byte read() syscall for a stat\n  // However, it will usually result in less memory allocation\n  const readSize = opt.maxReadSize || 16 * 1024 * 1024\n  const stream = new fsm.ReadStreamSync(file, {\n    readSize: readSize,\n    size: stat.size,\n  })\n  stream.pipe(u)\n}\n\nconst extractFile = (opt, cb) => {\n  const u = new Unpack(opt)\n  const readSize = opt.maxReadSize || 16 * 1024 * 1024\n\n  const file = opt.file\n  const p = new Promise((resolve, reject) => {\n    u.on('error', reject)\n    u.on('close', resolve)\n\n    // This trades a zero-byte read() syscall for a stat\n    // However, it will usually result in less memory allocation\n    fs.stat(file, (er, stat) => {\n      if (er)\n        reject(er)\n      else {\n        const stream = new fsm.ReadStream(file, {\n          readSize: readSize,\n          size: stat.size,\n        })\n        stream.on('error', reject)\n        stream.pipe(u)\n      }\n    })\n  })\n  return cb ? p.then(cb, cb) : p\n}\n\nconst extractSync = opt => new Unpack.Sync(opt)\n\nconst extract = opt => new Unpack(opt)\n","// Get the appropriate flag to use for creating files\n// We use fmap on Windows platforms for files less than\n// 512kb.  This is a fairly low limit, but avoids making\n// things slower in some cases.  Since most of what this\n// library is used for is extracting tarballs of many\n// relatively small files in npm packages and the like,\n// it can be a big boost on Windows platforms.\n// Only supported in Node v12.9.0 and above.\nconst platform = process.env.__FAKE_PLATFORM__ || process.platform\nconst isWindows = platform === 'win32'\nconst fs = global.__FAKE_TESTING_FS__ || require('fs')\n\n/* istanbul ignore next */\nconst { O_CREAT, O_TRUNC, O_WRONLY, UV_FS_O_FILEMAP = 0 } = fs.constants\n\nconst fMapEnabled = isWindows && !!UV_FS_O_FILEMAP\nconst fMapLimit = 512 * 1024\nconst fMapFlag = UV_FS_O_FILEMAP | O_TRUNC | O_CREAT | O_WRONLY\nmodule.exports = !fMapEnabled ? () => 'w'\n  : size => size < fMapLimit ? fMapFlag : 'w'\n","'use strict'\n// parse a 512-byte header block to a data object, or vice-versa\n// encode returns `true` if a pax extended header is needed, because\n// the data could not be faithfully encoded in a simple header.\n// (Also, check header.needPax to see if it needs a pax header.)\n\nconst types = require('./types.js')\nconst pathModule = require('path').posix\nconst large = require('./large-numbers.js')\n\nconst SLURP = Symbol('slurp')\nconst TYPE = Symbol('type')\n\nclass Header {\n  constructor (data, off, ex, gex) {\n    this.cksumValid = false\n    this.needPax = false\n    this.nullBlock = false\n\n    this.block = null\n    this.path = null\n    this.mode = null\n    this.uid = null\n    this.gid = null\n    this.size = null\n    this.mtime = null\n    this.cksum = null\n    this[TYPE] = '0'\n    this.linkpath = null\n    this.uname = null\n    this.gname = null\n    this.devmaj = 0\n    this.devmin = 0\n    this.atime = null\n    this.ctime = null\n\n    if (Buffer.isBuffer(data))\n      this.decode(data, off || 0, ex, gex)\n    else if (data)\n      this.set(data)\n  }\n\n  decode (buf, off, ex, gex) {\n    if (!off)\n      off = 0\n\n    if (!buf || !(buf.length >= off + 512))\n      throw new Error('need 512 bytes for header')\n\n    this.path = decString(buf, off, 100)\n    this.mode = decNumber(buf, off + 100, 8)\n    this.uid = decNumber(buf, off + 108, 8)\n    this.gid = decNumber(buf, off + 116, 8)\n    this.size = decNumber(buf, off + 124, 12)\n    this.mtime = decDate(buf, off + 136, 12)\n    this.cksum = decNumber(buf, off + 148, 12)\n\n    // if we have extended or global extended headers, apply them now\n    // See https://github.com/npm/node-tar/pull/187\n    this[SLURP](ex)\n    this[SLURP](gex, true)\n\n    // old tar versions marked dirs as a file with a trailing /\n    this[TYPE] = decString(buf, off + 156, 1)\n    if (this[TYPE] === '')\n      this[TYPE] = '0'\n    if (this[TYPE] === '0' && this.path.substr(-1) === '/')\n      this[TYPE] = '5'\n\n    // tar implementations sometimes incorrectly put the stat(dir).size\n    // as the size in the tarball, even though Directory entries are\n    // not able to have any body at all.  In the very rare chance that\n    // it actually DOES have a body, we weren't going to do anything with\n    // it anyway, and it'll just be a warning about an invalid header.\n    if (this[TYPE] === '5')\n      this.size = 0\n\n    this.linkpath = decString(buf, off + 157, 100)\n    if (buf.slice(off + 257, off + 265).toString() === 'ustar\\u000000') {\n      this.uname = decString(buf, off + 265, 32)\n      this.gname = decString(buf, off + 297, 32)\n      this.devmaj = decNumber(buf, off + 329, 8)\n      this.devmin = decNumber(buf, off + 337, 8)\n      if (buf[off + 475] !== 0) {\n        // definitely a prefix, definitely >130 chars.\n        const prefix = decString(buf, off + 345, 155)\n        this.path = prefix + '/' + this.path\n      } else {\n        const prefix = decString(buf, off + 345, 130)\n        if (prefix)\n          this.path = prefix + '/' + this.path\n        this.atime = decDate(buf, off + 476, 12)\n        this.ctime = decDate(buf, off + 488, 12)\n      }\n    }\n\n    let sum = 8 * 0x20\n    for (let i = off; i < off + 148; i++)\n      sum += buf[i]\n\n    for (let i = off + 156; i < off + 512; i++)\n      sum += buf[i]\n\n    this.cksumValid = sum === this.cksum\n    if (this.cksum === null && sum === 8 * 0x20)\n      this.nullBlock = true\n  }\n\n  [SLURP] (ex, global) {\n    for (const k in ex) {\n      // we slurp in everything except for the path attribute in\n      // a global extended header, because that's weird.\n      if (ex[k] !== null && ex[k] !== undefined &&\n          !(global && k === 'path'))\n        this[k] = ex[k]\n    }\n  }\n\n  encode (buf, off) {\n    if (!buf) {\n      buf = this.block = Buffer.alloc(512)\n      off = 0\n    }\n\n    if (!off)\n      off = 0\n\n    if (!(buf.length >= off + 512))\n      throw new Error('need 512 bytes for header')\n\n    const prefixSize = this.ctime || this.atime ? 130 : 155\n    const split = splitPrefix(this.path || '', prefixSize)\n    const path = split[0]\n    const prefix = split[1]\n    this.needPax = split[2]\n\n    this.needPax = encString(buf, off, 100, path) || this.needPax\n    this.needPax = encNumber(buf, off + 100, 8, this.mode) || this.needPax\n    this.needPax = encNumber(buf, off + 108, 8, this.uid) || this.needPax\n    this.needPax = encNumber(buf, off + 116, 8, this.gid) || this.needPax\n    this.needPax = encNumber(buf, off + 124, 12, this.size) || this.needPax\n    this.needPax = encDate(buf, off + 136, 12, this.mtime) || this.needPax\n    buf[off + 156] = this[TYPE].charCodeAt(0)\n    this.needPax = encString(buf, off + 157, 100, this.linkpath) || this.needPax\n    buf.write('ustar\\u000000', off + 257, 8)\n    this.needPax = encString(buf, off + 265, 32, this.uname) || this.needPax\n    this.needPax = encString(buf, off + 297, 32, this.gname) || this.needPax\n    this.needPax = encNumber(buf, off + 329, 8, this.devmaj) || this.needPax\n    this.needPax = encNumber(buf, off + 337, 8, this.devmin) || this.needPax\n    this.needPax = encString(buf, off + 345, prefixSize, prefix) || this.needPax\n    if (buf[off + 475] !== 0)\n      this.needPax = encString(buf, off + 345, 155, prefix) || this.needPax\n    else {\n      this.needPax = encString(buf, off + 345, 130, prefix) || this.needPax\n      this.needPax = encDate(buf, off + 476, 12, this.atime) || this.needPax\n      this.needPax = encDate(buf, off + 488, 12, this.ctime) || this.needPax\n    }\n\n    let sum = 8 * 0x20\n    for (let i = off; i < off + 148; i++)\n      sum += buf[i]\n\n    for (let i = off + 156; i < off + 512; i++)\n      sum += buf[i]\n\n    this.cksum = sum\n    encNumber(buf, off + 148, 8, this.cksum)\n    this.cksumValid = true\n\n    return this.needPax\n  }\n\n  set (data) {\n    for (const i in data) {\n      if (data[i] !== null && data[i] !== undefined)\n        this[i] = data[i]\n    }\n  }\n\n  get type () {\n    return types.name.get(this[TYPE]) || this[TYPE]\n  }\n\n  get typeKey () {\n    return this[TYPE]\n  }\n\n  set type (type) {\n    if (types.code.has(type))\n      this[TYPE] = types.code.get(type)\n    else\n      this[TYPE] = type\n  }\n}\n\nconst splitPrefix = (p, prefixSize) => {\n  const pathSize = 100\n  let pp = p\n  let prefix = ''\n  let ret\n  const root = pathModule.parse(p).root || '.'\n\n  if (Buffer.byteLength(pp) < pathSize)\n    ret = [pp, prefix, false]\n  else {\n    // first set prefix to the dir, and path to the base\n    prefix = pathModule.dirname(pp)\n    pp = pathModule.basename(pp)\n\n    do {\n      // both fit!\n      if (Buffer.byteLength(pp) <= pathSize &&\n          Buffer.byteLength(prefix) <= prefixSize)\n        ret = [pp, prefix, false]\n\n      // prefix fits in prefix, but path doesn't fit in path\n      else if (Buffer.byteLength(pp) > pathSize &&\n          Buffer.byteLength(prefix) <= prefixSize)\n        ret = [pp.substr(0, pathSize - 1), prefix, true]\n\n      else {\n        // make path take a bit from prefix\n        pp = pathModule.join(pathModule.basename(prefix), pp)\n        prefix = pathModule.dirname(prefix)\n      }\n    } while (prefix !== root && !ret)\n\n    // at this point, found no resolution, just truncate\n    if (!ret)\n      ret = [p.substr(0, pathSize - 1), '', true]\n  }\n  return ret\n}\n\nconst decString = (buf, off, size) =>\n  buf.slice(off, off + size).toString('utf8').replace(/\\0.*/, '')\n\nconst decDate = (buf, off, size) =>\n  numToDate(decNumber(buf, off, size))\n\nconst numToDate = num => num === null ? null : new Date(num * 1000)\n\nconst decNumber = (buf, off, size) =>\n  buf[off] & 0x80 ? large.parse(buf.slice(off, off + size))\n  : decSmallNumber(buf, off, size)\n\nconst nanNull = value => isNaN(value) ? null : value\n\nconst decSmallNumber = (buf, off, size) =>\n  nanNull(parseInt(\n    buf.slice(off, off + size)\n      .toString('utf8').replace(/\\0.*$/, '').trim(), 8))\n\n// the maximum encodable as a null-terminated octal, by field size\nconst MAXNUM = {\n  12: 0o77777777777,\n  8: 0o7777777,\n}\n\nconst encNumber = (buf, off, size, number) =>\n  number === null ? false :\n  number > MAXNUM[size] || number < 0\n    ? (large.encode(number, buf.slice(off, off + size)), true)\n    : (encSmallNumber(buf, off, size, number), false)\n\nconst encSmallNumber = (buf, off, size, number) =>\n  buf.write(octalString(number, size), off, size, 'ascii')\n\nconst octalString = (number, size) =>\n  padOctal(Math.floor(number).toString(8), size)\n\nconst padOctal = (string, size) =>\n  (string.length === size - 1 ? string\n  : new Array(size - string.length - 1).join('0') + string + ' ') + '\\0'\n\nconst encDate = (buf, off, size, date) =>\n  date === null ? false :\n  encNumber(buf, off, size, date.getTime() / 1000)\n\n// enough to fill the longest string we've got\nconst NULLS = new Array(156).join('\\0')\n// pad with nulls, return true if it's longer or non-ascii\nconst encString = (buf, off, size, string) =>\n  string === null ? false :\n  (buf.write(string + NULLS, off, size, 'utf8'),\n  string.length !== Buffer.byteLength(string) || string.length > size)\n\nmodule.exports = Header\n","'use strict'\n\n// turn tar(1) style args like `C` into the more verbose things like `cwd`\n\nconst argmap = new Map([\n  ['C', 'cwd'],\n  ['f', 'file'],\n  ['z', 'gzip'],\n  ['P', 'preservePaths'],\n  ['U', 'unlink'],\n  ['strip-components', 'strip'],\n  ['stripComponents', 'strip'],\n  ['keep-newer', 'newer'],\n  ['keepNewer', 'newer'],\n  ['keep-newer-files', 'newer'],\n  ['keepNewerFiles', 'newer'],\n  ['k', 'keep'],\n  ['keep-existing', 'keep'],\n  ['keepExisting', 'keep'],\n  ['m', 'noMtime'],\n  ['no-mtime', 'noMtime'],\n  ['p', 'preserveOwner'],\n  ['L', 'follow'],\n  ['h', 'follow'],\n])\n\nmodule.exports = opt => opt ? Object.keys(opt).map(k => [\n  argmap.has(k) ? argmap.get(k) : k, opt[k],\n]).reduce((set, kv) => (set[kv[0]] = kv[1], set), Object.create(null)) : {}\n","'use strict'\n// Tar can encode large and negative numbers using a leading byte of\n// 0xff for negative, and 0x80 for positive.\n\nconst encode = (num, buf) => {\n  if (!Number.isSafeInteger(num))\n    // The number is so large that javascript cannot represent it with integer\n    // precision.\n    throw Error('cannot encode number outside of javascript safe integer range')\n  else if (num < 0)\n    encodeNegative(num, buf)\n  else\n    encodePositive(num, buf)\n  return buf\n}\n\nconst encodePositive = (num, buf) => {\n  buf[0] = 0x80\n\n  for (var i = buf.length; i > 1; i--) {\n    buf[i - 1] = num & 0xff\n    num = Math.floor(num / 0x100)\n  }\n}\n\nconst encodeNegative = (num, buf) => {\n  buf[0] = 0xff\n  var flipped = false\n  num = num * -1\n  for (var i = buf.length; i > 1; i--) {\n    var byte = num & 0xff\n    num = Math.floor(num / 0x100)\n    if (flipped)\n      buf[i - 1] = onesComp(byte)\n    else if (byte === 0)\n      buf[i - 1] = 0\n    else {\n      flipped = true\n      buf[i - 1] = twosComp(byte)\n    }\n  }\n}\n\nconst parse = (buf) => {\n  const pre = buf[0]\n  const value = pre === 0x80 ? pos(buf.slice(1, buf.length))\n    : pre === 0xff ? twos(buf)\n    : null\n  if (value === null)\n    throw Error('invalid base256 encoding')\n\n  if (!Number.isSafeInteger(value))\n    // The number is so large that javascript cannot represent it with integer\n    // precision.\n    throw Error('parsed number outside of javascript safe integer range')\n\n  return value\n}\n\nconst twos = (buf) => {\n  var len = buf.length\n  var sum = 0\n  var flipped = false\n  for (var i = len - 1; i > -1; i--) {\n    var byte = buf[i]\n    var f\n    if (flipped)\n      f = onesComp(byte)\n    else if (byte === 0)\n      f = byte\n    else {\n      flipped = true\n      f = twosComp(byte)\n    }\n    if (f !== 0)\n      sum -= f * Math.pow(256, len - i - 1)\n  }\n  return sum\n}\n\nconst pos = (buf) => {\n  var len = buf.length\n  var sum = 0\n  for (var i = len - 1; i > -1; i--) {\n    var byte = buf[i]\n    if (byte !== 0)\n      sum += byte * Math.pow(256, len - i - 1)\n  }\n  return sum\n}\n\nconst onesComp = byte => (0xff ^ byte) & 0xff\n\nconst twosComp = byte => ((0xff ^ byte) + 1) & 0xff\n\nmodule.exports = {\n  encode,\n  parse,\n}\n","'use strict'\n\n// XXX: This shares a lot in common with extract.js\n// maybe some DRY opportunity here?\n\n// tar -t\nconst hlo = require('./high-level-opt.js')\nconst Parser = require('./parse.js')\nconst fs = require('fs')\nconst fsm = require('fs-minipass')\nconst path = require('path')\nconst stripSlash = require('./strip-trailing-slashes.js')\n\nmodule.exports = (opt_, files, cb) => {\n  if (typeof opt_ === 'function')\n    cb = opt_, files = null, opt_ = {}\n  else if (Array.isArray(opt_))\n    files = opt_, opt_ = {}\n\n  if (typeof files === 'function')\n    cb = files, files = null\n\n  if (!files)\n    files = []\n  else\n    files = Array.from(files)\n\n  const opt = hlo(opt_)\n\n  if (opt.sync && typeof cb === 'function')\n    throw new TypeError('callback not supported for sync tar functions')\n\n  if (!opt.file && typeof cb === 'function')\n    throw new TypeError('callback only supported with file option')\n\n  if (files.length)\n    filesFilter(opt, files)\n\n  if (!opt.noResume)\n    onentryFunction(opt)\n\n  return opt.file && opt.sync ? listFileSync(opt)\n    : opt.file ? listFile(opt, cb)\n    : list(opt)\n}\n\nconst onentryFunction = opt => {\n  const onentry = opt.onentry\n  opt.onentry = onentry ? e => {\n    onentry(e)\n    e.resume()\n  } : e => e.resume()\n}\n\n// construct a filter that limits the file entries listed\n// include child entries if a dir is included\nconst filesFilter = (opt, files) => {\n  const map = new Map(files.map(f => [stripSlash(f), true]))\n  const filter = opt.filter\n\n  const mapHas = (file, r) => {\n    const root = r || path.parse(file).root || '.'\n    const ret = file === root ? false\n      : map.has(file) ? map.get(file)\n      : mapHas(path.dirname(file), root)\n\n    map.set(file, ret)\n    return ret\n  }\n\n  opt.filter = filter\n    ? (file, entry) => filter(file, entry) && mapHas(stripSlash(file))\n    : file => mapHas(stripSlash(file))\n}\n\nconst listFileSync = opt => {\n  const p = list(opt)\n  const file = opt.file\n  let threw = true\n  let fd\n  try {\n    const stat = fs.statSync(file)\n    const readSize = opt.maxReadSize || 16 * 1024 * 1024\n    if (stat.size < readSize)\n      p.end(fs.readFileSync(file))\n    else {\n      let pos = 0\n      const buf = Buffer.allocUnsafe(readSize)\n      fd = fs.openSync(file, 'r')\n      while (pos < stat.size) {\n        const bytesRead = fs.readSync(fd, buf, 0, readSize, pos)\n        pos += bytesRead\n        p.write(buf.slice(0, bytesRead))\n      }\n      p.end()\n    }\n    threw = false\n  } finally {\n    if (threw && fd) {\n      try {\n        fs.closeSync(fd)\n      } catch (er) {}\n    }\n  }\n}\n\nconst listFile = (opt, cb) => {\n  const parse = new Parser(opt)\n  const readSize = opt.maxReadSize || 16 * 1024 * 1024\n\n  const file = opt.file\n  const p = new Promise((resolve, reject) => {\n    parse.on('error', reject)\n    parse.on('end', resolve)\n\n    fs.stat(file, (er, stat) => {\n      if (er)\n        reject(er)\n      else {\n        const stream = new fsm.ReadStream(file, {\n          readSize: readSize,\n          size: stat.size,\n        })\n        stream.on('error', reject)\n        stream.pipe(parse)\n      }\n    })\n  })\n  return cb ? p.then(cb, cb) : p\n}\n\nconst list = opt => new Parser(opt)\n","'use strict'\n// wrapper around mkdirp for tar's needs.\n\n// TODO: This should probably be a class, not functionally\n// passing around state in a gazillion args.\n\nconst mkdirp = require('mkdirp')\nconst fs = require('fs')\nconst path = require('path')\nconst chownr = require('chownr')\nconst normPath = require('./normalize-windows-path.js')\n\nclass SymlinkError extends Error {\n  constructor (symlink, path) {\n    super('Cannot extract through symbolic link')\n    this.path = path\n    this.symlink = symlink\n  }\n\n  get name () {\n    return 'SylinkError'\n  }\n}\n\nclass CwdError extends Error {\n  constructor (path, code) {\n    super(code + ': Cannot cd into \\'' + path + '\\'')\n    this.path = path\n    this.code = code\n  }\n\n  get name () {\n    return 'CwdError'\n  }\n}\n\nconst cGet = (cache, key) => cache.get(normPath(key))\nconst cSet = (cache, key, val) => cache.set(normPath(key), val)\n\nconst checkCwd = (dir, cb) => {\n  fs.stat(dir, (er, st) => {\n    if (er || !st.isDirectory())\n      er = new CwdError(dir, er && er.code || 'ENOTDIR')\n    cb(er)\n  })\n}\n\nmodule.exports = (dir, opt, cb) => {\n  dir = normPath(dir)\n\n  // if there's any overlap between mask and mode,\n  // then we'll need an explicit chmod\n  const umask = opt.umask\n  const mode = opt.mode | 0o0700\n  const needChmod = (mode & umask) !== 0\n\n  const uid = opt.uid\n  const gid = opt.gid\n  const doChown = typeof uid === 'number' &&\n    typeof gid === 'number' &&\n    (uid !== opt.processUid || gid !== opt.processGid)\n\n  const preserve = opt.preserve\n  const unlink = opt.unlink\n  const cache = opt.cache\n  const cwd = normPath(opt.cwd)\n\n  const done = (er, created) => {\n    if (er)\n      cb(er)\n    else {\n      cSet(cache, dir, true)\n      if (created && doChown)\n        chownr(created, uid, gid, er => done(er))\n      else if (needChmod)\n        fs.chmod(dir, mode, cb)\n      else\n        cb()\n    }\n  }\n\n  if (cache && cGet(cache, dir) === true)\n    return done()\n\n  if (dir === cwd)\n    return checkCwd(dir, done)\n\n  if (preserve)\n    return mkdirp(dir, {mode}).then(made => done(null, made), done)\n\n  const sub = normPath(path.relative(cwd, dir))\n  const parts = sub.split('/')\n  mkdir_(cwd, parts, mode, cache, unlink, cwd, null, done)\n}\n\nconst mkdir_ = (base, parts, mode, cache, unlink, cwd, created, cb) => {\n  if (!parts.length)\n    return cb(null, created)\n  const p = parts.shift()\n  const part = normPath(path.resolve(base + '/' + p))\n  if (cGet(cache, part))\n    return mkdir_(part, parts, mode, cache, unlink, cwd, created, cb)\n  fs.mkdir(part, mode, onmkdir(part, parts, mode, cache, unlink, cwd, created, cb))\n}\n\nconst onmkdir = (part, parts, mode, cache, unlink, cwd, created, cb) => er => {\n  if (er) {\n    fs.lstat(part, (statEr, st) => {\n      if (statEr) {\n        statEr.path = statEr.path && normPath(statEr.path)\n        cb(statEr)\n      } else if (st.isDirectory())\n        mkdir_(part, parts, mode, cache, unlink, cwd, created, cb)\n      else if (unlink) {\n        fs.unlink(part, er => {\n          if (er)\n            return cb(er)\n          fs.mkdir(part, mode, onmkdir(part, parts, mode, cache, unlink, cwd, created, cb))\n        })\n      } else if (st.isSymbolicLink())\n        return cb(new SymlinkError(part, part + '/' + parts.join('/')))\n      else\n        cb(er)\n    })\n  } else {\n    created = created || part\n    mkdir_(part, parts, mode, cache, unlink, cwd, created, cb)\n  }\n}\n\nconst checkCwdSync = dir => {\n  let ok = false\n  let code = 'ENOTDIR'\n  try {\n    ok = fs.statSync(dir).isDirectory()\n  } catch (er) {\n    code = er.code\n  } finally {\n    if (!ok)\n      throw new CwdError(dir, code)\n  }\n}\n\nmodule.exports.sync = (dir, opt) => {\n  dir = normPath(dir)\n  // if there's any overlap between mask and mode,\n  // then we'll need an explicit chmod\n  const umask = opt.umask\n  const mode = opt.mode | 0o0700\n  const needChmod = (mode & umask) !== 0\n\n  const uid = opt.uid\n  const gid = opt.gid\n  const doChown = typeof uid === 'number' &&\n    typeof gid === 'number' &&\n    (uid !== opt.processUid || gid !== opt.processGid)\n\n  const preserve = opt.preserve\n  const unlink = opt.unlink\n  const cache = opt.cache\n  const cwd = normPath(opt.cwd)\n\n  const done = (created) => {\n    cSet(cache, dir, true)\n    if (created && doChown)\n      chownr.sync(created, uid, gid)\n    if (needChmod)\n      fs.chmodSync(dir, mode)\n  }\n\n  if (cache && cGet(cache, dir) === true)\n    return done()\n\n  if (dir === cwd) {\n    checkCwdSync(cwd)\n    return done()\n  }\n\n  if (preserve)\n    return done(mkdirp.sync(dir, mode))\n\n  const sub = normPath(path.relative(cwd, dir))\n  const parts = sub.split('/')\n  let created = null\n  for (let p = parts.shift(), part = cwd;\n    p && (part += '/' + p);\n    p = parts.shift()) {\n    part = normPath(path.resolve(part))\n    if (cGet(cache, part))\n      continue\n\n    try {\n      fs.mkdirSync(part, mode)\n      created = created || part\n      cSet(cache, part, true)\n    } catch (er) {\n      const st = fs.lstatSync(part)\n      if (st.isDirectory()) {\n        cSet(cache, part, true)\n        continue\n      } else if (unlink) {\n        fs.unlinkSync(part)\n        fs.mkdirSync(part, mode)\n        created = created || part\n        cSet(cache, part, true)\n        continue\n      } else if (st.isSymbolicLink())\n        return new SymlinkError(part, part + '/' + parts.join('/'))\n    }\n  }\n\n  return done(created)\n}\n","'use strict'\nmodule.exports = (mode, isDir, portable) => {\n  mode &= 0o7777\n\n  // in portable mode, use the minimum reasonable umask\n  // if this system creates files with 0o664 by default\n  // (as some linux distros do), then we'll write the\n  // archive with 0o644 instead.  Also, don't ever create\n  // a file that is not readable/writable by the owner.\n  if (portable)\n    mode = (mode | 0o600) & ~0o22\n\n  // if dirs are readable, then they should be listable\n  if (isDir) {\n    if (mode & 0o400)\n      mode |= 0o100\n    if (mode & 0o40)\n      mode |= 0o10\n    if (mode & 0o4)\n      mode |= 0o1\n  }\n  return mode\n}\n","// warning: extremely hot code path.\n// This has been meticulously optimized for use\n// within npm install on large package trees.\n// Do not edit without careful benchmarking.\nconst normalizeCache = Object.create(null)\nconst {hasOwnProperty} = Object.prototype\nmodule.exports = s => {\n  if (!hasOwnProperty.call(normalizeCache, s))\n    normalizeCache[s] = s.normalize('NFKD')\n  return normalizeCache[s]\n}\n","// on windows, either \\ or / are valid directory separators.\n// on unix, \\ is a valid character in filenames.\n// so, on windows, and only on windows, we replace all \\ chars with /,\n// so that we can use / as our one and only directory separator char.\n\nconst platform = process.env.TESTING_TAR_FAKE_PLATFORM || process.platform\nmodule.exports = platform !== 'win32' ? p => p\n  : p => p && p.replace(/\\\\/g, '/')\n","'use strict'\n\n// A readable tar stream creator\n// Technically, this is a transform stream that you write paths into,\n// and tar format comes out of.\n// The `add()` method is like `write()` but returns this,\n// and end() return `this` as well, so you can\n// do `new Pack(opt).add('files').add('dir').end().pipe(output)\n// You could also do something like:\n// streamOfPaths().pipe(new Pack()).pipe(new fs.WriteStream('out.tar'))\n\nclass PackJob {\n  constructor (path, absolute) {\n    this.path = path || './'\n    this.absolute = absolute\n    this.entry = null\n    this.stat = null\n    this.readdir = null\n    this.pending = false\n    this.ignore = false\n    this.piped = false\n  }\n}\n\nconst MiniPass = require('minipass')\nconst zlib = require('minizlib')\nconst ReadEntry = require('./read-entry.js')\nconst WriteEntry = require('./write-entry.js')\nconst WriteEntrySync = WriteEntry.Sync\nconst WriteEntryTar = WriteEntry.Tar\nconst Yallist = require('yallist')\nconst EOF = Buffer.alloc(1024)\nconst ONSTAT = Symbol('onStat')\nconst ENDED = Symbol('ended')\nconst QUEUE = Symbol('queue')\nconst CURRENT = Symbol('current')\nconst PROCESS = Symbol('process')\nconst PROCESSING = Symbol('processing')\nconst PROCESSJOB = Symbol('processJob')\nconst JOBS = Symbol('jobs')\nconst JOBDONE = Symbol('jobDone')\nconst ADDFSENTRY = Symbol('addFSEntry')\nconst ADDTARENTRY = Symbol('addTarEntry')\nconst STAT = Symbol('stat')\nconst READDIR = Symbol('readdir')\nconst ONREADDIR = Symbol('onreaddir')\nconst PIPE = Symbol('pipe')\nconst ENTRY = Symbol('entry')\nconst ENTRYOPT = Symbol('entryOpt')\nconst WRITEENTRYCLASS = Symbol('writeEntryClass')\nconst WRITE = Symbol('write')\nconst ONDRAIN = Symbol('ondrain')\n\nconst fs = require('fs')\nconst path = require('path')\nconst warner = require('./warn-mixin.js')\nconst normPath = require('./normalize-windows-path.js')\n\nconst Pack = warner(class Pack extends MiniPass {\n  constructor (opt) {\n    super(opt)\n    opt = opt || Object.create(null)\n    this.opt = opt\n    this.file = opt.file || ''\n    this.cwd = opt.cwd || process.cwd()\n    this.maxReadSize = opt.maxReadSize\n    this.preservePaths = !!opt.preservePaths\n    this.strict = !!opt.strict\n    this.noPax = !!opt.noPax\n    this.prefix = normPath(opt.prefix || '')\n    this.linkCache = opt.linkCache || new Map()\n    this.statCache = opt.statCache || new Map()\n    this.readdirCache = opt.readdirCache || new Map()\n\n    this[WRITEENTRYCLASS] = WriteEntry\n    if (typeof opt.onwarn === 'function')\n      this.on('warn', opt.onwarn)\n\n    this.portable = !!opt.portable\n    this.zip = null\n    if (opt.gzip) {\n      if (typeof opt.gzip !== 'object')\n        opt.gzip = {}\n      if (this.portable)\n        opt.gzip.portable = true\n      this.zip = new zlib.Gzip(opt.gzip)\n      this.zip.on('data', chunk => super.write(chunk))\n      this.zip.on('end', _ => super.end())\n      this.zip.on('drain', _ => this[ONDRAIN]())\n      this.on('resume', _ => this.zip.resume())\n    } else\n      this.on('drain', this[ONDRAIN])\n\n    this.noDirRecurse = !!opt.noDirRecurse\n    this.follow = !!opt.follow\n    this.noMtime = !!opt.noMtime\n    this.mtime = opt.mtime || null\n\n    this.filter = typeof opt.filter === 'function' ? opt.filter : _ => true\n\n    this[QUEUE] = new Yallist()\n    this[JOBS] = 0\n    this.jobs = +opt.jobs || 4\n    this[PROCESSING] = false\n    this[ENDED] = false\n  }\n\n  [WRITE] (chunk) {\n    return super.write(chunk)\n  }\n\n  add (path) {\n    this.write(path)\n    return this\n  }\n\n  end (path) {\n    if (path)\n      this.write(path)\n    this[ENDED] = true\n    this[PROCESS]()\n    return this\n  }\n\n  write (path) {\n    if (this[ENDED])\n      throw new Error('write after end')\n\n    if (path instanceof ReadEntry)\n      this[ADDTARENTRY](path)\n    else\n      this[ADDFSENTRY](path)\n    return this.flowing\n  }\n\n  [ADDTARENTRY] (p) {\n    const absolute = normPath(path.resolve(this.cwd, p.path))\n    // in this case, we don't have to wait for the stat\n    if (!this.filter(p.path, p))\n      p.resume()\n    else {\n      const job = new PackJob(p.path, absolute, false)\n      job.entry = new WriteEntryTar(p, this[ENTRYOPT](job))\n      job.entry.on('end', _ => this[JOBDONE](job))\n      this[JOBS] += 1\n      this[QUEUE].push(job)\n    }\n\n    this[PROCESS]()\n  }\n\n  [ADDFSENTRY] (p) {\n    const absolute = normPath(path.resolve(this.cwd, p))\n    this[QUEUE].push(new PackJob(p, absolute))\n    this[PROCESS]()\n  }\n\n  [STAT] (job) {\n    job.pending = true\n    this[JOBS] += 1\n    const stat = this.follow ? 'stat' : 'lstat'\n    fs[stat](job.absolute, (er, stat) => {\n      job.pending = false\n      this[JOBS] -= 1\n      if (er)\n        this.emit('error', er)\n      else\n        this[ONSTAT](job, stat)\n    })\n  }\n\n  [ONSTAT] (job, stat) {\n    this.statCache.set(job.absolute, stat)\n    job.stat = stat\n\n    // now we have the stat, we can filter it.\n    if (!this.filter(job.path, stat))\n      job.ignore = true\n\n    this[PROCESS]()\n  }\n\n  [READDIR] (job) {\n    job.pending = true\n    this[JOBS] += 1\n    fs.readdir(job.absolute, (er, entries) => {\n      job.pending = false\n      this[JOBS] -= 1\n      if (er)\n        return this.emit('error', er)\n      this[ONREADDIR](job, entries)\n    })\n  }\n\n  [ONREADDIR] (job, entries) {\n    this.readdirCache.set(job.absolute, entries)\n    job.readdir = entries\n    this[PROCESS]()\n  }\n\n  [PROCESS] () {\n    if (this[PROCESSING])\n      return\n\n    this[PROCESSING] = true\n    for (let w = this[QUEUE].head;\n      w !== null && this[JOBS] < this.jobs;\n      w = w.next) {\n      this[PROCESSJOB](w.value)\n      if (w.value.ignore) {\n        const p = w.next\n        this[QUEUE].removeNode(w)\n        w.next = p\n      }\n    }\n\n    this[PROCESSING] = false\n\n    if (this[ENDED] && !this[QUEUE].length && this[JOBS] === 0) {\n      if (this.zip)\n        this.zip.end(EOF)\n      else {\n        super.write(EOF)\n        super.end()\n      }\n    }\n  }\n\n  get [CURRENT] () {\n    return this[QUEUE] && this[QUEUE].head && this[QUEUE].head.value\n  }\n\n  [JOBDONE] (job) {\n    this[QUEUE].shift()\n    this[JOBS] -= 1\n    this[PROCESS]()\n  }\n\n  [PROCESSJOB] (job) {\n    if (job.pending)\n      return\n\n    if (job.entry) {\n      if (job === this[CURRENT] && !job.piped)\n        this[PIPE](job)\n      return\n    }\n\n    if (!job.stat) {\n      if (this.statCache.has(job.absolute))\n        this[ONSTAT](job, this.statCache.get(job.absolute))\n      else\n        this[STAT](job)\n    }\n    if (!job.stat)\n      return\n\n    // filtered out!\n    if (job.ignore)\n      return\n\n    if (!this.noDirRecurse && job.stat.isDirectory() && !job.readdir) {\n      if (this.readdirCache.has(job.absolute))\n        this[ONREADDIR](job, this.readdirCache.get(job.absolute))\n      else\n        this[READDIR](job)\n      if (!job.readdir)\n        return\n    }\n\n    // we know it doesn't have an entry, because that got checked above\n    job.entry = this[ENTRY](job)\n    if (!job.entry) {\n      job.ignore = true\n      return\n    }\n\n    if (job === this[CURRENT] && !job.piped)\n      this[PIPE](job)\n  }\n\n  [ENTRYOPT] (job) {\n    return {\n      onwarn: (code, msg, data) => this.warn(code, msg, data),\n      noPax: this.noPax,\n      cwd: this.cwd,\n      absolute: job.absolute,\n      preservePaths: this.preservePaths,\n      maxReadSize: this.maxReadSize,\n      strict: this.strict,\n      portable: this.portable,\n      linkCache: this.linkCache,\n      statCache: this.statCache,\n      noMtime: this.noMtime,\n      mtime: this.mtime,\n      prefix: this.prefix,\n    }\n  }\n\n  [ENTRY] (job) {\n    this[JOBS] += 1\n    try {\n      return new this[WRITEENTRYCLASS](job.path, this[ENTRYOPT](job))\n        .on('end', () => this[JOBDONE](job))\n        .on('error', er => this.emit('error', er))\n    } catch (er) {\n      this.emit('error', er)\n    }\n  }\n\n  [ONDRAIN] () {\n    if (this[CURRENT] && this[CURRENT].entry)\n      this[CURRENT].entry.resume()\n  }\n\n  // like .pipe() but using super, because our write() is special\n  [PIPE] (job) {\n    job.piped = true\n\n    if (job.readdir) {\n      job.readdir.forEach(entry => {\n        const p = job.path\n        const base = p === './' ? '' : p.replace(/\\/*$/, '/')\n        this[ADDFSENTRY](base + entry)\n      })\n    }\n\n    const source = job.entry\n    const zip = this.zip\n\n    if (zip) {\n      source.on('data', chunk => {\n        if (!zip.write(chunk))\n          source.pause()\n      })\n    } else {\n      source.on('data', chunk => {\n        if (!super.write(chunk))\n          source.pause()\n      })\n    }\n  }\n\n  pause () {\n    if (this.zip)\n      this.zip.pause()\n    return super.pause()\n  }\n})\n\nclass PackSync extends Pack {\n  constructor (opt) {\n    super(opt)\n    this[WRITEENTRYCLASS] = WriteEntrySync\n  }\n\n  // pause/resume are no-ops in sync streams.\n  pause () {}\n  resume () {}\n\n  [STAT] (job) {\n    const stat = this.follow ? 'statSync' : 'lstatSync'\n    this[ONSTAT](job, fs[stat](job.absolute))\n  }\n\n  [READDIR] (job, stat) {\n    this[ONREADDIR](job, fs.readdirSync(job.absolute))\n  }\n\n  // gotta get it all in this tick\n  [PIPE] (job) {\n    const source = job.entry\n    const zip = this.zip\n\n    if (job.readdir) {\n      job.readdir.forEach(entry => {\n        const p = job.path\n        const base = p === './' ? '' : p.replace(/\\/*$/, '/')\n        this[ADDFSENTRY](base + entry)\n      })\n    }\n\n    if (zip) {\n      source.on('data', chunk => {\n        zip.write(chunk)\n      })\n    } else {\n      source.on('data', chunk => {\n        super[WRITE](chunk)\n      })\n    }\n  }\n}\n\nPack.Sync = PackSync\n\nmodule.exports = Pack\n","'use strict'\n\n// this[BUFFER] is the remainder of a chunk if we're waiting for\n// the full 512 bytes of a header to come in.  We will Buffer.concat()\n// it to the next write(), which is a mem copy, but a small one.\n//\n// this[QUEUE] is a Yallist of entries that haven't been emitted\n// yet this can only get filled up if the user keeps write()ing after\n// a write() returns false, or does a write() with more than one entry\n//\n// We don't buffer chunks, we always parse them and either create an\n// entry, or push it into the active entry.  The ReadEntry class knows\n// to throw data away if .ignore=true\n//\n// Shift entry off the buffer when it emits 'end', and emit 'entry' for\n// the next one in the list.\n//\n// At any time, we're pushing body chunks into the entry at WRITEENTRY,\n// and waiting for 'end' on the entry at READENTRY\n//\n// ignored entries get .resume() called on them straight away\n\nconst warner = require('./warn-mixin.js')\nconst Header = require('./header.js')\nconst EE = require('events')\nconst Yallist = require('yallist')\nconst maxMetaEntrySize = 1024 * 1024\nconst Entry = require('./read-entry.js')\nconst Pax = require('./pax.js')\nconst zlib = require('minizlib')\n\nconst gzipHeader = Buffer.from([0x1f, 0x8b])\nconst STATE = Symbol('state')\nconst WRITEENTRY = Symbol('writeEntry')\nconst READENTRY = Symbol('readEntry')\nconst NEXTENTRY = Symbol('nextEntry')\nconst PROCESSENTRY = Symbol('processEntry')\nconst EX = Symbol('extendedHeader')\nconst GEX = Symbol('globalExtendedHeader')\nconst META = Symbol('meta')\nconst EMITMETA = Symbol('emitMeta')\nconst BUFFER = Symbol('buffer')\nconst QUEUE = Symbol('queue')\nconst ENDED = Symbol('ended')\nconst EMITTEDEND = Symbol('emittedEnd')\nconst EMIT = Symbol('emit')\nconst UNZIP = Symbol('unzip')\nconst CONSUMECHUNK = Symbol('consumeChunk')\nconst CONSUMECHUNKSUB = Symbol('consumeChunkSub')\nconst CONSUMEBODY = Symbol('consumeBody')\nconst CONSUMEMETA = Symbol('consumeMeta')\nconst CONSUMEHEADER = Symbol('consumeHeader')\nconst CONSUMING = Symbol('consuming')\nconst BUFFERCONCAT = Symbol('bufferConcat')\nconst MAYBEEND = Symbol('maybeEnd')\nconst WRITING = Symbol('writing')\nconst ABORTED = Symbol('aborted')\nconst DONE = Symbol('onDone')\nconst SAW_VALID_ENTRY = Symbol('sawValidEntry')\nconst SAW_NULL_BLOCK = Symbol('sawNullBlock')\nconst SAW_EOF = Symbol('sawEOF')\n\nconst noop = _ => true\n\nmodule.exports = warner(class Parser extends EE {\n  constructor (opt) {\n    opt = opt || {}\n    super(opt)\n\n    this.file = opt.file || ''\n\n    // set to boolean false when an entry starts.  1024 bytes of \\0\n    // is technically a valid tarball, albeit a boring one.\n    this[SAW_VALID_ENTRY] = null\n\n    // these BADARCHIVE errors can't be detected early. listen on DONE.\n    this.on(DONE, _ => {\n      if (this[STATE] === 'begin' || this[SAW_VALID_ENTRY] === false) {\n        // either less than 1 block of data, or all entries were invalid.\n        // Either way, probably not even a tarball.\n        this.warn('TAR_BAD_ARCHIVE', 'Unrecognized archive format')\n      }\n    })\n\n    if (opt.ondone)\n      this.on(DONE, opt.ondone)\n    else {\n      this.on(DONE, _ => {\n        this.emit('prefinish')\n        this.emit('finish')\n        this.emit('end')\n        this.emit('close')\n      })\n    }\n\n    this.strict = !!opt.strict\n    this.maxMetaEntrySize = opt.maxMetaEntrySize || maxMetaEntrySize\n    this.filter = typeof opt.filter === 'function' ? opt.filter : noop\n\n    // have to set this so that streams are ok piping into it\n    this.writable = true\n    this.readable = false\n\n    this[QUEUE] = new Yallist()\n    this[BUFFER] = null\n    this[READENTRY] = null\n    this[WRITEENTRY] = null\n    this[STATE] = 'begin'\n    this[META] = ''\n    this[EX] = null\n    this[GEX] = null\n    this[ENDED] = false\n    this[UNZIP] = null\n    this[ABORTED] = false\n    this[SAW_NULL_BLOCK] = false\n    this[SAW_EOF] = false\n    if (typeof opt.onwarn === 'function')\n      this.on('warn', opt.onwarn)\n    if (typeof opt.onentry === 'function')\n      this.on('entry', opt.onentry)\n  }\n\n  [CONSUMEHEADER] (chunk, position) {\n    if (this[SAW_VALID_ENTRY] === null)\n      this[SAW_VALID_ENTRY] = false\n    let header\n    try {\n      header = new Header(chunk, position, this[EX], this[GEX])\n    } catch (er) {\n      return this.warn('TAR_ENTRY_INVALID', er)\n    }\n\n    if (header.nullBlock) {\n      if (this[SAW_NULL_BLOCK]) {\n        this[SAW_EOF] = true\n        // ending an archive with no entries.  pointless, but legal.\n        if (this[STATE] === 'begin')\n          this[STATE] = 'header'\n        this[EMIT]('eof')\n      } else {\n        this[SAW_NULL_BLOCK] = true\n        this[EMIT]('nullBlock')\n      }\n    } else {\n      this[SAW_NULL_BLOCK] = false\n      if (!header.cksumValid)\n        this.warn('TAR_ENTRY_INVALID', 'checksum failure', {header})\n      else if (!header.path)\n        this.warn('TAR_ENTRY_INVALID', 'path is required', {header})\n      else {\n        const type = header.type\n        if (/^(Symbolic)?Link$/.test(type) && !header.linkpath)\n          this.warn('TAR_ENTRY_INVALID', 'linkpath required', {header})\n        else if (!/^(Symbolic)?Link$/.test(type) && header.linkpath)\n          this.warn('TAR_ENTRY_INVALID', 'linkpath forbidden', {header})\n        else {\n          const entry = this[WRITEENTRY] = new Entry(header, this[EX], this[GEX])\n\n          // we do this for meta & ignored entries as well, because they\n          // are still valid tar, or else we wouldn't know to ignore them\n          if (!this[SAW_VALID_ENTRY]) {\n            if (entry.remain) {\n              // this might be the one!\n              const onend = () => {\n                if (!entry.invalid)\n                  this[SAW_VALID_ENTRY] = true\n              }\n              entry.on('end', onend)\n            } else\n              this[SAW_VALID_ENTRY] = true\n          }\n\n          if (entry.meta) {\n            if (entry.size > this.maxMetaEntrySize) {\n              entry.ignore = true\n              this[EMIT]('ignoredEntry', entry)\n              this[STATE] = 'ignore'\n              entry.resume()\n            } else if (entry.size > 0) {\n              this[META] = ''\n              entry.on('data', c => this[META] += c)\n              this[STATE] = 'meta'\n            }\n          } else {\n            this[EX] = null\n            entry.ignore = entry.ignore || !this.filter(entry.path, entry)\n\n            if (entry.ignore) {\n              // probably valid, just not something we care about\n              this[EMIT]('ignoredEntry', entry)\n              this[STATE] = entry.remain ? 'ignore' : 'header'\n              entry.resume()\n            } else {\n              if (entry.remain)\n                this[STATE] = 'body'\n              else {\n                this[STATE] = 'header'\n                entry.end()\n              }\n\n              if (!this[READENTRY]) {\n                this[QUEUE].push(entry)\n                this[NEXTENTRY]()\n              } else\n                this[QUEUE].push(entry)\n            }\n          }\n        }\n      }\n    }\n  }\n\n  [PROCESSENTRY] (entry) {\n    let go = true\n\n    if (!entry) {\n      this[READENTRY] = null\n      go = false\n    } else if (Array.isArray(entry))\n      this.emit.apply(this, entry)\n    else {\n      this[READENTRY] = entry\n      this.emit('entry', entry)\n      if (!entry.emittedEnd) {\n        entry.on('end', _ => this[NEXTENTRY]())\n        go = false\n      }\n    }\n\n    return go\n  }\n\n  [NEXTENTRY] () {\n    do {} while (this[PROCESSENTRY](this[QUEUE].shift()))\n\n    if (!this[QUEUE].length) {\n      // At this point, there's nothing in the queue, but we may have an\n      // entry which is being consumed (readEntry).\n      // If we don't, then we definitely can handle more data.\n      // If we do, and either it's flowing, or it has never had any data\n      // written to it, then it needs more.\n      // The only other possibility is that it has returned false from a\n      // write() call, so we wait for the next drain to continue.\n      const re = this[READENTRY]\n      const drainNow = !re || re.flowing || re.size === re.remain\n      if (drainNow) {\n        if (!this[WRITING])\n          this.emit('drain')\n      } else\n        re.once('drain', _ => this.emit('drain'))\n    }\n  }\n\n  [CONSUMEBODY] (chunk, position) {\n    // write up to but no  more than writeEntry.blockRemain\n    const entry = this[WRITEENTRY]\n    const br = entry.blockRemain\n    const c = (br >= chunk.length && position === 0) ? chunk\n      : chunk.slice(position, position + br)\n\n    entry.write(c)\n\n    if (!entry.blockRemain) {\n      this[STATE] = 'header'\n      this[WRITEENTRY] = null\n      entry.end()\n    }\n\n    return c.length\n  }\n\n  [CONSUMEMETA] (chunk, position) {\n    const entry = this[WRITEENTRY]\n    const ret = this[CONSUMEBODY](chunk, position)\n\n    // if we finished, then the entry is reset\n    if (!this[WRITEENTRY])\n      this[EMITMETA](entry)\n\n    return ret\n  }\n\n  [EMIT] (ev, data, extra) {\n    if (!this[QUEUE].length && !this[READENTRY])\n      this.emit(ev, data, extra)\n    else\n      this[QUEUE].push([ev, data, extra])\n  }\n\n  [EMITMETA] (entry) {\n    this[EMIT]('meta', this[META])\n    switch (entry.type) {\n      case 'ExtendedHeader':\n      case 'OldExtendedHeader':\n        this[EX] = Pax.parse(this[META], this[EX], false)\n        break\n\n      case 'GlobalExtendedHeader':\n        this[GEX] = Pax.parse(this[META], this[GEX], true)\n        break\n\n      case 'NextFileHasLongPath':\n      case 'OldGnuLongPath':\n        this[EX] = this[EX] || Object.create(null)\n        this[EX].path = this[META].replace(/\\0.*/, '')\n        break\n\n      case 'NextFileHasLongLinkpath':\n        this[EX] = this[EX] || Object.create(null)\n        this[EX].linkpath = this[META].replace(/\\0.*/, '')\n        break\n\n      /* istanbul ignore next */\n      default: throw new Error('unknown meta: ' + entry.type)\n    }\n  }\n\n  abort (error) {\n    this[ABORTED] = true\n    this.emit('abort', error)\n    // always throws, even in non-strict mode\n    this.warn('TAR_ABORT', error, { recoverable: false })\n  }\n\n  write (chunk) {\n    if (this[ABORTED])\n      return\n\n    // first write, might be gzipped\n    if (this[UNZIP] === null && chunk) {\n      if (this[BUFFER]) {\n        chunk = Buffer.concat([this[BUFFER], chunk])\n        this[BUFFER] = null\n      }\n      if (chunk.length < gzipHeader.length) {\n        this[BUFFER] = chunk\n        return true\n      }\n      for (let i = 0; this[UNZIP] === null && i < gzipHeader.length; i++) {\n        if (chunk[i] !== gzipHeader[i])\n          this[UNZIP] = false\n      }\n      if (this[UNZIP] === null) {\n        const ended = this[ENDED]\n        this[ENDED] = false\n        this[UNZIP] = new zlib.Unzip()\n        this[UNZIP].on('data', chunk => this[CONSUMECHUNK](chunk))\n        this[UNZIP].on('error', er => this.abort(er))\n        this[UNZIP].on('end', _ => {\n          this[ENDED] = true\n          this[CONSUMECHUNK]()\n        })\n        this[WRITING] = true\n        const ret = this[UNZIP][ended ? 'end' : 'write'](chunk)\n        this[WRITING] = false\n        return ret\n      }\n    }\n\n    this[WRITING] = true\n    if (this[UNZIP])\n      this[UNZIP].write(chunk)\n    else\n      this[CONSUMECHUNK](chunk)\n    this[WRITING] = false\n\n    // return false if there's a queue, or if the current entry isn't flowing\n    const ret =\n      this[QUEUE].length ? false :\n      this[READENTRY] ? this[READENTRY].flowing :\n      true\n\n    // if we have no queue, then that means a clogged READENTRY\n    if (!ret && !this[QUEUE].length)\n      this[READENTRY].once('drain', _ => this.emit('drain'))\n\n    return ret\n  }\n\n  [BUFFERCONCAT] (c) {\n    if (c && !this[ABORTED])\n      this[BUFFER] = this[BUFFER] ? Buffer.concat([this[BUFFER], c]) : c\n  }\n\n  [MAYBEEND] () {\n    if (this[ENDED] &&\n        !this[EMITTEDEND] &&\n        !this[ABORTED] &&\n        !this[CONSUMING]) {\n      this[EMITTEDEND] = true\n      const entry = this[WRITEENTRY]\n      if (entry && entry.blockRemain) {\n        // truncated, likely a damaged file\n        const have = this[BUFFER] ? this[BUFFER].length : 0\n        this.warn('TAR_BAD_ARCHIVE', `Truncated input (needed ${\n          entry.blockRemain} more bytes, only ${have} available)`, {entry})\n        if (this[BUFFER])\n          entry.write(this[BUFFER])\n        entry.end()\n      }\n      this[EMIT](DONE)\n    }\n  }\n\n  [CONSUMECHUNK] (chunk) {\n    if (this[CONSUMING])\n      this[BUFFERCONCAT](chunk)\n    else if (!chunk && !this[BUFFER])\n      this[MAYBEEND]()\n    else {\n      this[CONSUMING] = true\n      if (this[BUFFER]) {\n        this[BUFFERCONCAT](chunk)\n        const c = this[BUFFER]\n        this[BUFFER] = null\n        this[CONSUMECHUNKSUB](c)\n      } else\n        this[CONSUMECHUNKSUB](chunk)\n\n      while (this[BUFFER] &&\n          this[BUFFER].length >= 512 &&\n          !this[ABORTED] &&\n          !this[SAW_EOF]) {\n        const c = this[BUFFER]\n        this[BUFFER] = null\n        this[CONSUMECHUNKSUB](c)\n      }\n      this[CONSUMING] = false\n    }\n\n    if (!this[BUFFER] || this[ENDED])\n      this[MAYBEEND]()\n  }\n\n  [CONSUMECHUNKSUB] (chunk) {\n    // we know that we are in CONSUMING mode, so anything written goes into\n    // the buffer.  Advance the position and put any remainder in the buffer.\n    let position = 0\n    const length = chunk.length\n    while (position + 512 <= length && !this[ABORTED] && !this[SAW_EOF]) {\n      switch (this[STATE]) {\n        case 'begin':\n        case 'header':\n          this[CONSUMEHEADER](chunk, position)\n          position += 512\n          break\n\n        case 'ignore':\n        case 'body':\n          position += this[CONSUMEBODY](chunk, position)\n          break\n\n        case 'meta':\n          position += this[CONSUMEMETA](chunk, position)\n          break\n\n        /* istanbul ignore next */\n        default:\n          throw new Error('invalid state: ' + this[STATE])\n      }\n    }\n\n    if (position < length) {\n      if (this[BUFFER])\n        this[BUFFER] = Buffer.concat([chunk.slice(position), this[BUFFER]])\n      else\n        this[BUFFER] = chunk.slice(position)\n    }\n  }\n\n  end (chunk) {\n    if (!this[ABORTED]) {\n      if (this[UNZIP])\n        this[UNZIP].end(chunk)\n      else {\n        this[ENDED] = true\n        this.write(chunk)\n      }\n    }\n  }\n})\n","// A path exclusive reservation system\n// reserve([list, of, paths], fn)\n// When the fn is first in line for all its paths, it\n// is called with a cb that clears the reservation.\n//\n// Used by async unpack to avoid clobbering paths in use,\n// while still allowing maximal safe parallelization.\n\nconst assert = require('assert')\nconst normalize = require('./normalize-unicode.js')\nconst stripSlashes = require('./strip-trailing-slashes.js')\nconst { join } = require('path')\n\nconst platform = process.env.TESTING_TAR_FAKE_PLATFORM || process.platform\nconst isWindows = platform === 'win32'\n\nmodule.exports = () => {\n  // path => [function or Set]\n  // A Set object means a directory reservation\n  // A fn is a direct reservation on that path\n  const queues = new Map()\n\n  // fn => {paths:[path,...], dirs:[path, ...]}\n  const reservations = new Map()\n\n  // return a set of parent dirs for a given path\n  // '/a/b/c/d' -> ['/', '/a', '/a/b', '/a/b/c', '/a/b/c/d']\n  const getDirs = path => {\n    const dirs = path.split('/').slice(0, -1).reduce((set, path) => {\n      if (set.length)\n        path = join(set[set.length - 1], path)\n      set.push(path || '/')\n      return set\n    }, [])\n    return dirs\n  }\n\n  // functions currently running\n  const running = new Set()\n\n  // return the queues for each path the function cares about\n  // fn => {paths, dirs}\n  const getQueues = fn => {\n    const res = reservations.get(fn)\n    /* istanbul ignore if - unpossible */\n    if (!res)\n      throw new Error('function does not have any path reservations')\n    return {\n      paths: res.paths.map(path => queues.get(path)),\n      dirs: [...res.dirs].map(path => queues.get(path)),\n    }\n  }\n\n  // check if fn is first in line for all its paths, and is\n  // included in the first set for all its dir queues\n  const check = fn => {\n    const {paths, dirs} = getQueues(fn)\n    return paths.every(q => q[0] === fn) &&\n      dirs.every(q => q[0] instanceof Set && q[0].has(fn))\n  }\n\n  // run the function if it's first in line and not already running\n  const run = fn => {\n    if (running.has(fn) || !check(fn))\n      return false\n    running.add(fn)\n    fn(() => clear(fn))\n    return true\n  }\n\n  const clear = fn => {\n    if (!running.has(fn))\n      return false\n\n    const { paths, dirs } = reservations.get(fn)\n    const next = new Set()\n\n    paths.forEach(path => {\n      const q = queues.get(path)\n      assert.equal(q[0], fn)\n      if (q.length === 1)\n        queues.delete(path)\n      else {\n        q.shift()\n        if (typeof q[0] === 'function')\n          next.add(q[0])\n        else\n          q[0].forEach(fn => next.add(fn))\n      }\n    })\n\n    dirs.forEach(dir => {\n      const q = queues.get(dir)\n      assert(q[0] instanceof Set)\n      if (q[0].size === 1 && q.length === 1)\n        queues.delete(dir)\n      else if (q[0].size === 1) {\n        q.shift()\n\n        // must be a function or else the Set would've been reused\n        next.add(q[0])\n      } else\n        q[0].delete(fn)\n    })\n    running.delete(fn)\n\n    next.forEach(fn => run(fn))\n    return true\n  }\n\n  const reserve = (paths, fn) => {\n    // collide on matches across case and unicode normalization\n    // On windows, thanks to the magic of 8.3 shortnames, it is fundamentally\n    // impossible to determine whether two paths refer to the same thing on\n    // disk, without asking the kernel for a shortname.\n    // So, we just pretend that every path matches every other path here,\n    // effectively removing all parallelization on windows.\n    paths = isWindows ? ['win32 parallelization disabled'] : paths.map(p => {\n      // don't need normPath, because we skip this entirely for windows\n      return normalize(stripSlashes(join(p))).toLowerCase()\n    })\n\n    const dirs = new Set(\n      paths.map(path => getDirs(path)).reduce((a, b) => a.concat(b))\n    )\n    reservations.set(fn, {dirs, paths})\n    paths.forEach(path => {\n      const q = queues.get(path)\n      if (!q)\n        queues.set(path, [fn])\n      else\n        q.push(fn)\n    })\n    dirs.forEach(dir => {\n      const q = queues.get(dir)\n      if (!q)\n        queues.set(dir, [new Set([fn])])\n      else if (q[q.length - 1] instanceof Set)\n        q[q.length - 1].add(fn)\n      else\n        q.push(new Set([fn]))\n    })\n\n    return run(fn)\n  }\n\n  return { check, reserve }\n}\n","'use strict'\nconst Header = require('./header.js')\nconst path = require('path')\n\nclass Pax {\n  constructor (obj, global) {\n    this.atime = obj.atime || null\n    this.charset = obj.charset || null\n    this.comment = obj.comment || null\n    this.ctime = obj.ctime || null\n    this.gid = obj.gid || null\n    this.gname = obj.gname || null\n    this.linkpath = obj.linkpath || null\n    this.mtime = obj.mtime || null\n    this.path = obj.path || null\n    this.size = obj.size || null\n    this.uid = obj.uid || null\n    this.uname = obj.uname || null\n    this.dev = obj.dev || null\n    this.ino = obj.ino || null\n    this.nlink = obj.nlink || null\n    this.global = global || false\n  }\n\n  encode () {\n    const body = this.encodeBody()\n    if (body === '')\n      return null\n\n    const bodyLen = Buffer.byteLength(body)\n    // round up to 512 bytes\n    // add 512 for header\n    const bufLen = 512 * Math.ceil(1 + bodyLen / 512)\n    const buf = Buffer.allocUnsafe(bufLen)\n\n    // 0-fill the header section, it might not hit every field\n    for (let i = 0; i < 512; i++)\n      buf[i] = 0\n\n    new Header({\n      // XXX split the path\n      // then the path should be PaxHeader + basename, but less than 99,\n      // prepend with the dirname\n      path: ('PaxHeader/' + path.basename(this.path)).slice(0, 99),\n      mode: this.mode || 0o644,\n      uid: this.uid || null,\n      gid: this.gid || null,\n      size: bodyLen,\n      mtime: this.mtime || null,\n      type: this.global ? 'GlobalExtendedHeader' : 'ExtendedHeader',\n      linkpath: '',\n      uname: this.uname || '',\n      gname: this.gname || '',\n      devmaj: 0,\n      devmin: 0,\n      atime: this.atime || null,\n      ctime: this.ctime || null,\n    }).encode(buf)\n\n    buf.write(body, 512, bodyLen, 'utf8')\n\n    // null pad after the body\n    for (let i = bodyLen + 512; i < buf.length; i++)\n      buf[i] = 0\n\n    return buf\n  }\n\n  encodeBody () {\n    return (\n      this.encodeField('path') +\n      this.encodeField('ctime') +\n      this.encodeField('atime') +\n      this.encodeField('dev') +\n      this.encodeField('ino') +\n      this.encodeField('nlink') +\n      this.encodeField('charset') +\n      this.encodeField('comment') +\n      this.encodeField('gid') +\n      this.encodeField('gname') +\n      this.encodeField('linkpath') +\n      this.encodeField('mtime') +\n      this.encodeField('size') +\n      this.encodeField('uid') +\n      this.encodeField('uname')\n    )\n  }\n\n  encodeField (field) {\n    if (this[field] === null || this[field] === undefined)\n      return ''\n    const v = this[field] instanceof Date ? this[field].getTime() / 1000\n      : this[field]\n    const s = ' ' +\n      (field === 'dev' || field === 'ino' || field === 'nlink'\n        ? 'SCHILY.' : '') +\n      field + '=' + v + '\\n'\n    const byteLen = Buffer.byteLength(s)\n    // the digits includes the length of the digits in ascii base-10\n    // so if it's 9 characters, then adding 1 for the 9 makes it 10\n    // which makes it 11 chars.\n    let digits = Math.floor(Math.log(byteLen) / Math.log(10)) + 1\n    if (byteLen + digits >= Math.pow(10, digits))\n      digits += 1\n    const len = digits + byteLen\n    return len + s\n  }\n}\n\nPax.parse = (string, ex, g) => new Pax(merge(parseKV(string), ex), g)\n\nconst merge = (a, b) =>\n  b ? Object.keys(a).reduce((s, k) => (s[k] = a[k], s), b) : a\n\nconst parseKV = string =>\n  string\n    .replace(/\\n$/, '')\n    .split('\\n')\n    .reduce(parseKVLine, Object.create(null))\n\nconst parseKVLine = (set, line) => {\n  const n = parseInt(line, 10)\n\n  // XXX Values with \\n in them will fail this.\n  // Refactor to not be a naive line-by-line parse.\n  if (n !== Buffer.byteLength(line) + 1)\n    return set\n\n  line = line.substr((n + ' ').length)\n  const kv = line.split('=')\n  const k = kv.shift().replace(/^SCHILY\\.(dev|ino|nlink)/, '$1')\n  if (!k)\n    return set\n\n  const v = kv.join('=')\n  set[k] = /^([A-Z]+\\.)?([mac]|birth|creation)time$/.test(k)\n    ? new Date(v * 1000)\n    : /^[0-9]+$/.test(v) ? +v\n    : v\n  return set\n}\n\nmodule.exports = Pax\n","'use strict'\nconst MiniPass = require('minipass')\nconst normPath = require('./normalize-windows-path.js')\n\nconst SLURP = Symbol('slurp')\nmodule.exports = class ReadEntry extends MiniPass {\n  constructor (header, ex, gex) {\n    super()\n    // read entries always start life paused.  this is to avoid the\n    // situation where Minipass's auto-ending empty streams results\n    // in an entry ending before we're ready for it.\n    this.pause()\n    this.extended = ex\n    this.globalExtended = gex\n    this.header = header\n    this.startBlockSize = 512 * Math.ceil(header.size / 512)\n    this.blockRemain = this.startBlockSize\n    this.remain = header.size\n    this.type = header.type\n    this.meta = false\n    this.ignore = false\n    switch (this.type) {\n      case 'File':\n      case 'OldFile':\n      case 'Link':\n      case 'SymbolicLink':\n      case 'CharacterDevice':\n      case 'BlockDevice':\n      case 'Directory':\n      case 'FIFO':\n      case 'ContiguousFile':\n      case 'GNUDumpDir':\n        break\n\n      case 'NextFileHasLongLinkpath':\n      case 'NextFileHasLongPath':\n      case 'OldGnuLongPath':\n      case 'GlobalExtendedHeader':\n      case 'ExtendedHeader':\n      case 'OldExtendedHeader':\n        this.meta = true\n        break\n\n      // NOTE: gnutar and bsdtar treat unrecognized types as 'File'\n      // it may be worth doing the same, but with a warning.\n      default:\n        this.ignore = true\n    }\n\n    this.path = normPath(header.path)\n    this.mode = header.mode\n    if (this.mode)\n      this.mode = this.mode & 0o7777\n    this.uid = header.uid\n    this.gid = header.gid\n    this.uname = header.uname\n    this.gname = header.gname\n    this.size = header.size\n    this.mtime = header.mtime\n    this.atime = header.atime\n    this.ctime = header.ctime\n    this.linkpath = normPath(header.linkpath)\n    this.uname = header.uname\n    this.gname = header.gname\n\n    if (ex)\n      this[SLURP](ex)\n    if (gex)\n      this[SLURP](gex, true)\n  }\n\n  write (data) {\n    const writeLen = data.length\n    if (writeLen > this.blockRemain)\n      throw new Error('writing more to entry than is appropriate')\n\n    const r = this.remain\n    const br = this.blockRemain\n    this.remain = Math.max(0, r - writeLen)\n    this.blockRemain = Math.max(0, br - writeLen)\n    if (this.ignore)\n      return true\n\n    if (r >= writeLen)\n      return super.write(data)\n\n    // r < writeLen\n    return super.write(data.slice(0, r))\n  }\n\n  [SLURP] (ex, global) {\n    for (const k in ex) {\n      // we slurp in everything except for the path attribute in\n      // a global extended header, because that's weird.\n      if (ex[k] !== null && ex[k] !== undefined &&\n          !(global && k === 'path'))\n        this[k] = k === 'path' || k === 'linkpath' ? normPath(ex[k]) : ex[k]\n    }\n  }\n}\n","'use strict'\n\n// tar -r\nconst hlo = require('./high-level-opt.js')\nconst Pack = require('./pack.js')\nconst fs = require('fs')\nconst fsm = require('fs-minipass')\nconst t = require('./list.js')\nconst path = require('path')\n\n// starting at the head of the file, read a Header\n// If the checksum is invalid, that's our position to start writing\n// If it is, jump forward by the specified size (round up to 512)\n// and try again.\n// Write the new Pack stream starting there.\n\nconst Header = require('./header.js')\n\nmodule.exports = (opt_, files, cb) => {\n  const opt = hlo(opt_)\n\n  if (!opt.file)\n    throw new TypeError('file is required')\n\n  if (opt.gzip)\n    throw new TypeError('cannot append to compressed archives')\n\n  if (!files || !Array.isArray(files) || !files.length)\n    throw new TypeError('no files or directories specified')\n\n  files = Array.from(files)\n\n  return opt.sync ? replaceSync(opt, files)\n    : replace(opt, files, cb)\n}\n\nconst replaceSync = (opt, files) => {\n  const p = new Pack.Sync(opt)\n\n  let threw = true\n  let fd\n  let position\n\n  try {\n    try {\n      fd = fs.openSync(opt.file, 'r+')\n    } catch (er) {\n      if (er.code === 'ENOENT')\n        fd = fs.openSync(opt.file, 'w+')\n      else\n        throw er\n    }\n\n    const st = fs.fstatSync(fd)\n    const headBuf = Buffer.alloc(512)\n\n    POSITION: for (position = 0; position < st.size; position += 512) {\n      for (let bufPos = 0, bytes = 0; bufPos < 512; bufPos += bytes) {\n        bytes = fs.readSync(\n          fd, headBuf, bufPos, headBuf.length - bufPos, position + bufPos\n        )\n\n        if (position === 0 && headBuf[0] === 0x1f && headBuf[1] === 0x8b)\n          throw new Error('cannot append to compressed archives')\n\n        if (!bytes)\n          break POSITION\n      }\n\n      const h = new Header(headBuf)\n      if (!h.cksumValid)\n        break\n      const entryBlockSize = 512 * Math.ceil(h.size / 512)\n      if (position + entryBlockSize + 512 > st.size)\n        break\n      // the 512 for the header we just parsed will be added as well\n      // also jump ahead all the blocks for the body\n      position += entryBlockSize\n      if (opt.mtimeCache)\n        opt.mtimeCache.set(h.path, h.mtime)\n    }\n    threw = false\n\n    streamSync(opt, p, position, fd, files)\n  } finally {\n    if (threw) {\n      try {\n        fs.closeSync(fd)\n      } catch (er) {}\n    }\n  }\n}\n\nconst streamSync = (opt, p, position, fd, files) => {\n  const stream = new fsm.WriteStreamSync(opt.file, {\n    fd: fd,\n    start: position,\n  })\n  p.pipe(stream)\n  addFilesSync(p, files)\n}\n\nconst replace = (opt, files, cb) => {\n  files = Array.from(files)\n  const p = new Pack(opt)\n\n  const getPos = (fd, size, cb_) => {\n    const cb = (er, pos) => {\n      if (er)\n        fs.close(fd, _ => cb_(er))\n      else\n        cb_(null, pos)\n    }\n\n    let position = 0\n    if (size === 0)\n      return cb(null, 0)\n\n    let bufPos = 0\n    const headBuf = Buffer.alloc(512)\n    const onread = (er, bytes) => {\n      if (er)\n        return cb(er)\n      bufPos += bytes\n      if (bufPos < 512 && bytes) {\n        return fs.read(\n          fd, headBuf, bufPos, headBuf.length - bufPos,\n          position + bufPos, onread\n        )\n      }\n\n      if (position === 0 && headBuf[0] === 0x1f && headBuf[1] === 0x8b)\n        return cb(new Error('cannot append to compressed archives'))\n\n      // truncated header\n      if (bufPos < 512)\n        return cb(null, position)\n\n      const h = new Header(headBuf)\n      if (!h.cksumValid)\n        return cb(null, position)\n\n      const entryBlockSize = 512 * Math.ceil(h.size / 512)\n      if (position + entryBlockSize + 512 > size)\n        return cb(null, position)\n\n      position += entryBlockSize + 512\n      if (position >= size)\n        return cb(null, position)\n\n      if (opt.mtimeCache)\n        opt.mtimeCache.set(h.path, h.mtime)\n      bufPos = 0\n      fs.read(fd, headBuf, 0, 512, position, onread)\n    }\n    fs.read(fd, headBuf, 0, 512, position, onread)\n  }\n\n  const promise = new Promise((resolve, reject) => {\n    p.on('error', reject)\n    let flag = 'r+'\n    const onopen = (er, fd) => {\n      if (er && er.code === 'ENOENT' && flag === 'r+') {\n        flag = 'w+'\n        return fs.open(opt.file, flag, onopen)\n      }\n\n      if (er)\n        return reject(er)\n\n      fs.fstat(fd, (er, st) => {\n        if (er)\n          return fs.close(fd, () => reject(er))\n\n        getPos(fd, st.size, (er, position) => {\n          if (er)\n            return reject(er)\n          const stream = new fsm.WriteStream(opt.file, {\n            fd: fd,\n            start: position,\n          })\n          p.pipe(stream)\n          stream.on('error', reject)\n          stream.on('close', resolve)\n          addFilesAsync(p, files)\n        })\n      })\n    }\n    fs.open(opt.file, flag, onopen)\n  })\n\n  return cb ? promise.then(cb, cb) : promise\n}\n\nconst addFilesSync = (p, files) => {\n  files.forEach(file => {\n    if (file.charAt(0) === '@') {\n      t({\n        file: path.resolve(p.cwd, file.substr(1)),\n        sync: true,\n        noResume: true,\n        onentry: entry => p.add(entry),\n      })\n    } else\n      p.add(file)\n  })\n  p.end()\n}\n\nconst addFilesAsync = (p, files) => {\n  while (files.length) {\n    const file = files.shift()\n    if (file.charAt(0) === '@') {\n      return t({\n        file: path.resolve(p.cwd, file.substr(1)),\n        noResume: true,\n        onentry: entry => p.add(entry),\n      }).then(_ => addFilesAsync(p, files))\n    } else\n      p.add(file)\n  }\n  p.end()\n}\n","// unix absolute paths are also absolute on win32, so we use this for both\nconst { isAbsolute, parse } = require('path').win32\n\n// returns [root, stripped]\n// Note that windows will think that //x/y/z/a has a \"root\" of //x/y, and in\n// those cases, we want to sanitize it to x/y/z/a, not z/a, so we strip /\n// explicitly if it's the first character.\n// drive-specific relative paths on Windows get their root stripped off even\n// though they are not absolute, so `c:../foo` becomes ['c:', '../foo']\nmodule.exports = path => {\n  let r = ''\n\n  let parsed = parse(path)\n  while (isAbsolute(path) || parsed.root) {\n    // windows will think that //x/y/z has a \"root\" of //x/y/\n    // but strip the //?/C:/ off of //?/C:/path\n    const root = path.charAt(0) === '/' && path.slice(0, 4) !== '//?/' ? '/'\n      : parsed.root\n    path = path.substr(root.length)\n    r += root\n    parsed = parse(path)\n  }\n  return [r, path]\n}\n","// warning: extremely hot code path.\n// This has been meticulously optimized for use\n// within npm install on large package trees.\n// Do not edit without careful benchmarking.\nmodule.exports = str => {\n  let i = str.length - 1\n  let slashesStart = -1\n  while (i > -1 && str.charAt(i) === '/') {\n    slashesStart = i\n    i--\n  }\n  return slashesStart === -1 ? str : str.slice(0, slashesStart)\n}\n","'use strict'\n// map types from key to human-friendly name\nexports.name = new Map([\n  ['0', 'File'],\n  // same as File\n  ['', 'OldFile'],\n  ['1', 'Link'],\n  ['2', 'SymbolicLink'],\n  // Devices and FIFOs aren't fully supported\n  // they are parsed, but skipped when unpacking\n  ['3', 'CharacterDevice'],\n  ['4', 'BlockDevice'],\n  ['5', 'Directory'],\n  ['6', 'FIFO'],\n  // same as File\n  ['7', 'ContiguousFile'],\n  // pax headers\n  ['g', 'GlobalExtendedHeader'],\n  ['x', 'ExtendedHeader'],\n  // vendor-specific stuff\n  // skip\n  ['A', 'SolarisACL'],\n  // like 5, but with data, which should be skipped\n  ['D', 'GNUDumpDir'],\n  // metadata only, skip\n  ['I', 'Inode'],\n  // data = link path of next file\n  ['K', 'NextFileHasLongLinkpath'],\n  // data = path of next file\n  ['L', 'NextFileHasLongPath'],\n  // skip\n  ['M', 'ContinuationFile'],\n  // like L\n  ['N', 'OldGnuLongPath'],\n  // skip\n  ['S', 'SparseFile'],\n  // skip\n  ['V', 'TapeVolumeHeader'],\n  // like x\n  ['X', 'OldExtendedHeader'],\n])\n\n// map the other direction\nexports.code = new Map(Array.from(exports.name).map(kv => [kv[1], kv[0]]))\n","'use strict'\n\n// the PEND/UNPEND stuff tracks whether we're ready to emit end/close yet.\n// but the path reservations are required to avoid race conditions where\n// parallelized unpack ops may mess with one another, due to dependencies\n// (like a Link depending on its target) or destructive operations (like\n// clobbering an fs object to create one of a different type.)\n\nconst assert = require('assert')\nconst Parser = require('./parse.js')\nconst fs = require('fs')\nconst fsm = require('fs-minipass')\nconst path = require('path')\nconst mkdir = require('./mkdir.js')\nconst wc = require('./winchars.js')\nconst pathReservations = require('./path-reservations.js')\nconst stripAbsolutePath = require('./strip-absolute-path.js')\nconst normPath = require('./normalize-windows-path.js')\nconst stripSlash = require('./strip-trailing-slashes.js')\nconst normalize = require('./normalize-unicode.js')\n\nconst ONENTRY = Symbol('onEntry')\nconst CHECKFS = Symbol('checkFs')\nconst CHECKFS2 = Symbol('checkFs2')\nconst PRUNECACHE = Symbol('pruneCache')\nconst ISREUSABLE = Symbol('isReusable')\nconst MAKEFS = Symbol('makeFs')\nconst FILE = Symbol('file')\nconst DIRECTORY = Symbol('directory')\nconst LINK = Symbol('link')\nconst SYMLINK = Symbol('symlink')\nconst HARDLINK = Symbol('hardlink')\nconst UNSUPPORTED = Symbol('unsupported')\nconst CHECKPATH = Symbol('checkPath')\nconst MKDIR = Symbol('mkdir')\nconst ONERROR = Symbol('onError')\nconst PENDING = Symbol('pending')\nconst PEND = Symbol('pend')\nconst UNPEND = Symbol('unpend')\nconst ENDED = Symbol('ended')\nconst MAYBECLOSE = Symbol('maybeClose')\nconst SKIP = Symbol('skip')\nconst DOCHOWN = Symbol('doChown')\nconst UID = Symbol('uid')\nconst GID = Symbol('gid')\nconst CHECKED_CWD = Symbol('checkedCwd')\nconst crypto = require('crypto')\nconst getFlag = require('./get-write-flag.js')\nconst platform = process.env.TESTING_TAR_FAKE_PLATFORM || process.platform\nconst isWindows = platform === 'win32'\n\n// Unlinks on Windows are not atomic.\n//\n// This means that if you have a file entry, followed by another\n// file entry with an identical name, and you cannot re-use the file\n// (because it's a hardlink, or because unlink:true is set, or it's\n// Windows, which does not have useful nlink values), then the unlink\n// will be committed to the disk AFTER the new file has been written\n// over the old one, deleting the new file.\n//\n// To work around this, on Windows systems, we rename the file and then\n// delete the renamed file.  It's a sloppy kludge, but frankly, I do not\n// know of a better way to do this, given windows' non-atomic unlink\n// semantics.\n//\n// See: https://github.com/npm/node-tar/issues/183\n/* istanbul ignore next */\nconst unlinkFile = (path, cb) => {\n  if (!isWindows)\n    return fs.unlink(path, cb)\n\n  const name = path + '.DELETE.' + crypto.randomBytes(16).toString('hex')\n  fs.rename(path, name, er => {\n    if (er)\n      return cb(er)\n    fs.unlink(name, cb)\n  })\n}\n\n/* istanbul ignore next */\nconst unlinkFileSync = path => {\n  if (!isWindows)\n    return fs.unlinkSync(path)\n\n  const name = path + '.DELETE.' + crypto.randomBytes(16).toString('hex')\n  fs.renameSync(path, name)\n  fs.unlinkSync(name)\n}\n\n// this.gid, entry.gid, this.processUid\nconst uint32 = (a, b, c) =>\n  a === a >>> 0 ? a\n  : b === b >>> 0 ? b\n  : c\n\n// clear the cache if it's a case-insensitive unicode-squashing match.\n// we can't know if the current file system is case-sensitive or supports\n// unicode fully, so we check for similarity on the maximally compatible\n// representation.  Err on the side of pruning, since all it's doing is\n// preventing lstats, and it's not the end of the world if we get a false\n// positive.\n// Note that on windows, we always drop the entire cache whenever a\n// symbolic link is encountered, because 8.3 filenames are impossible\n// to reason about, and collisions are hazards rather than just failures.\nconst cacheKeyNormalize = path => normalize(stripSlash(normPath(path)))\n  .toLowerCase()\n\nconst pruneCache = (cache, abs) => {\n  abs = cacheKeyNormalize(abs)\n  for (const path of cache.keys()) {\n    const pnorm = cacheKeyNormalize(path)\n    if (pnorm === abs || pnorm.indexOf(abs + '/') === 0)\n      cache.delete(path)\n  }\n}\n\nconst dropCache = cache => {\n  for (const key of cache.keys())\n    cache.delete(key)\n}\n\nclass Unpack extends Parser {\n  constructor (opt) {\n    if (!opt)\n      opt = {}\n\n    opt.ondone = _ => {\n      this[ENDED] = true\n      this[MAYBECLOSE]()\n    }\n\n    super(opt)\n\n    this[CHECKED_CWD] = false\n\n    this.reservations = pathReservations()\n\n    this.transform = typeof opt.transform === 'function' ? opt.transform : null\n\n    this.writable = true\n    this.readable = false\n\n    this[PENDING] = 0\n    this[ENDED] = false\n\n    this.dirCache = opt.dirCache || new Map()\n\n    if (typeof opt.uid === 'number' || typeof opt.gid === 'number') {\n      // need both or neither\n      if (typeof opt.uid !== 'number' || typeof opt.gid !== 'number')\n        throw new TypeError('cannot set owner without number uid and gid')\n      if (opt.preserveOwner) {\n        throw new TypeError(\n          'cannot preserve owner in archive and also set owner explicitly')\n      }\n      this.uid = opt.uid\n      this.gid = opt.gid\n      this.setOwner = true\n    } else {\n      this.uid = null\n      this.gid = null\n      this.setOwner = false\n    }\n\n    // default true for root\n    if (opt.preserveOwner === undefined && typeof opt.uid !== 'number')\n      this.preserveOwner = process.getuid && process.getuid() === 0\n    else\n      this.preserveOwner = !!opt.preserveOwner\n\n    this.processUid = (this.preserveOwner || this.setOwner) && process.getuid ?\n      process.getuid() : null\n    this.processGid = (this.preserveOwner || this.setOwner) && process.getgid ?\n      process.getgid() : null\n\n    // mostly just for testing, but useful in some cases.\n    // Forcibly trigger a chown on every entry, no matter what\n    this.forceChown = opt.forceChown === true\n\n    // turn ><?| in filenames into 0xf000-higher encoded forms\n    this.win32 = !!opt.win32 || isWindows\n\n    // do not unpack over files that are newer than what's in the archive\n    this.newer = !!opt.newer\n\n    // do not unpack over ANY files\n    this.keep = !!opt.keep\n\n    // do not set mtime/atime of extracted entries\n    this.noMtime = !!opt.noMtime\n\n    // allow .., absolute path entries, and unpacking through symlinks\n    // without this, warn and skip .., relativize absolutes, and error\n    // on symlinks in extraction path\n    this.preservePaths = !!opt.preservePaths\n\n    // unlink files and links before writing. This breaks existing hard\n    // links, and removes symlink directories rather than erroring\n    this.unlink = !!opt.unlink\n\n    this.cwd = normPath(path.resolve(opt.cwd || process.cwd()))\n    this.strip = +opt.strip || 0\n    // if we're not chmodding, then we don't need the process umask\n    this.processUmask = opt.noChmod ? 0 : process.umask()\n    this.umask = typeof opt.umask === 'number' ? opt.umask : this.processUmask\n\n    // default mode for dirs created as parents\n    this.dmode = opt.dmode || (0o0777 & (~this.umask))\n    this.fmode = opt.fmode || (0o0666 & (~this.umask))\n\n    this.on('entry', entry => this[ONENTRY](entry))\n  }\n\n  // a bad or damaged archive is a warning for Parser, but an error\n  // when extracting.  Mark those errors as unrecoverable, because\n  // the Unpack contract cannot be met.\n  warn (code, msg, data = {}) {\n    if (code === 'TAR_BAD_ARCHIVE' || code === 'TAR_ABORT')\n      data.recoverable = false\n    return super.warn(code, msg, data)\n  }\n\n  [MAYBECLOSE] () {\n    if (this[ENDED] && this[PENDING] === 0) {\n      this.emit('prefinish')\n      this.emit('finish')\n      this.emit('end')\n      this.emit('close')\n    }\n  }\n\n  [CHECKPATH] (entry) {\n    if (this.strip) {\n      const parts = normPath(entry.path).split('/')\n      if (parts.length < this.strip)\n        return false\n      entry.path = parts.slice(this.strip).join('/')\n\n      if (entry.type === 'Link') {\n        const linkparts = normPath(entry.linkpath).split('/')\n        if (linkparts.length >= this.strip)\n          entry.linkpath = linkparts.slice(this.strip).join('/')\n        else\n          return false\n      }\n    }\n\n    if (!this.preservePaths) {\n      const p = normPath(entry.path)\n      const parts = p.split('/')\n      if (parts.includes('..') || isWindows && /^[a-z]:\\.\\.$/i.test(parts[0])) {\n        this.warn('TAR_ENTRY_ERROR', `path contains '..'`, {\n          entry,\n          path: p,\n        })\n        return false\n      }\n\n      // strip off the root\n      const [root, stripped] = stripAbsolutePath(p)\n      if (root) {\n        entry.path = stripped\n        this.warn('TAR_ENTRY_INFO', `stripping ${root} from absolute path`, {\n          entry,\n          path: p,\n        })\n      }\n    }\n\n    if (path.isAbsolute(entry.path))\n      entry.absolute = normPath(path.resolve(entry.path))\n    else\n      entry.absolute = normPath(path.resolve(this.cwd, entry.path))\n\n    // if we somehow ended up with a path that escapes the cwd, and we are\n    // not in preservePaths mode, then something is fishy!  This should have\n    // been prevented above, so ignore this for coverage.\n    /* istanbul ignore if - defense in depth */\n    if (!this.preservePaths &&\n        entry.absolute.indexOf(this.cwd + '/') !== 0 &&\n        entry.absolute !== this.cwd) {\n      this.warn('TAR_ENTRY_ERROR', 'path escaped extraction target', {\n        entry,\n        path: normPath(entry.path),\n        resolvedPath: entry.absolute,\n        cwd: this.cwd,\n      })\n      return false\n    }\n\n    // an archive can set properties on the extraction directory, but it\n    // may not replace the cwd with a different kind of thing entirely.\n    if (entry.absolute === this.cwd &&\n        entry.type !== 'Directory' &&\n        entry.type !== 'GNUDumpDir')\n      return false\n\n    // only encode : chars that aren't drive letter indicators\n    if (this.win32) {\n      const { root: aRoot } = path.win32.parse(entry.absolute)\n      entry.absolute = aRoot + wc.encode(entry.absolute.substr(aRoot.length))\n      const { root: pRoot } = path.win32.parse(entry.path)\n      entry.path = pRoot + wc.encode(entry.path.substr(pRoot.length))\n    }\n\n    return true\n  }\n\n  [ONENTRY] (entry) {\n    if (!this[CHECKPATH](entry))\n      return entry.resume()\n\n    assert.equal(typeof entry.absolute, 'string')\n\n    switch (entry.type) {\n      case 'Directory':\n      case 'GNUDumpDir':\n        if (entry.mode)\n          entry.mode = entry.mode | 0o700\n\n      case 'File':\n      case 'OldFile':\n      case 'ContiguousFile':\n      case 'Link':\n      case 'SymbolicLink':\n        return this[CHECKFS](entry)\n\n      case 'CharacterDevice':\n      case 'BlockDevice':\n      case 'FIFO':\n      default:\n        return this[UNSUPPORTED](entry)\n    }\n  }\n\n  [ONERROR] (er, entry) {\n    // Cwd has to exist, or else nothing works. That's serious.\n    // Other errors are warnings, which raise the error in strict\n    // mode, but otherwise continue on.\n    if (er.name === 'CwdError')\n      this.emit('error', er)\n    else {\n      this.warn('TAR_ENTRY_ERROR', er, {entry})\n      this[UNPEND]()\n      entry.resume()\n    }\n  }\n\n  [MKDIR] (dir, mode, cb) {\n    mkdir(normPath(dir), {\n      uid: this.uid,\n      gid: this.gid,\n      processUid: this.processUid,\n      processGid: this.processGid,\n      umask: this.processUmask,\n      preserve: this.preservePaths,\n      unlink: this.unlink,\n      cache: this.dirCache,\n      cwd: this.cwd,\n      mode: mode,\n      noChmod: this.noChmod,\n    }, cb)\n  }\n\n  [DOCHOWN] (entry) {\n    // in preserve owner mode, chown if the entry doesn't match process\n    // in set owner mode, chown if setting doesn't match process\n    return this.forceChown ||\n      this.preserveOwner &&\n      (typeof entry.uid === 'number' && entry.uid !== this.processUid ||\n        typeof entry.gid === 'number' && entry.gid !== this.processGid)\n      ||\n      (typeof this.uid === 'number' && this.uid !== this.processUid ||\n        typeof this.gid === 'number' && this.gid !== this.processGid)\n  }\n\n  [UID] (entry) {\n    return uint32(this.uid, entry.uid, this.processUid)\n  }\n\n  [GID] (entry) {\n    return uint32(this.gid, entry.gid, this.processGid)\n  }\n\n  [FILE] (entry, fullyDone) {\n    const mode = entry.mode & 0o7777 || this.fmode\n    const stream = new fsm.WriteStream(entry.absolute, {\n      flags: getFlag(entry.size),\n      mode: mode,\n      autoClose: false,\n    })\n    stream.on('error', er => {\n      if (stream.fd)\n        fs.close(stream.fd, () => {})\n\n      // flush all the data out so that we aren't left hanging\n      // if the error wasn't actually fatal.  otherwise the parse\n      // is blocked, and we never proceed.\n      stream.write = () => true\n      this[ONERROR](er, entry)\n      fullyDone()\n    })\n\n    let actions = 1\n    const done = er => {\n      if (er) {\n        /* istanbul ignore else - we should always have a fd by now */\n        if (stream.fd)\n          fs.close(stream.fd, () => {})\n\n        this[ONERROR](er, entry)\n        fullyDone()\n        return\n      }\n\n      if (--actions === 0) {\n        fs.close(stream.fd, er => {\n          if (er)\n            this[ONERROR](er, entry)\n          else\n            this[UNPEND]()\n          fullyDone()\n        })\n      }\n    }\n\n    stream.on('finish', _ => {\n      // if futimes fails, try utimes\n      // if utimes fails, fail with the original error\n      // same for fchown/chown\n      const abs = entry.absolute\n      const fd = stream.fd\n\n      if (entry.mtime && !this.noMtime) {\n        actions++\n        const atime = entry.atime || new Date()\n        const mtime = entry.mtime\n        fs.futimes(fd, atime, mtime, er =>\n          er ? fs.utimes(abs, atime, mtime, er2 => done(er2 && er))\n          : done())\n      }\n\n      if (this[DOCHOWN](entry)) {\n        actions++\n        const uid = this[UID](entry)\n        const gid = this[GID](entry)\n        fs.fchown(fd, uid, gid, er =>\n          er ? fs.chown(abs, uid, gid, er2 => done(er2 && er))\n          : done())\n      }\n\n      done()\n    })\n\n    const tx = this.transform ? this.transform(entry) || entry : entry\n    if (tx !== entry) {\n      tx.on('error', er => {\n        this[ONERROR](er, entry)\n        fullyDone()\n      })\n      entry.pipe(tx)\n    }\n    tx.pipe(stream)\n  }\n\n  [DIRECTORY] (entry, fullyDone) {\n    const mode = entry.mode & 0o7777 || this.dmode\n    this[MKDIR](entry.absolute, mode, er => {\n      if (er) {\n        this[ONERROR](er, entry)\n        fullyDone()\n        return\n      }\n\n      let actions = 1\n      const done = _ => {\n        if (--actions === 0) {\n          fullyDone()\n          this[UNPEND]()\n          entry.resume()\n        }\n      }\n\n      if (entry.mtime && !this.noMtime) {\n        actions++\n        fs.utimes(entry.absolute, entry.atime || new Date(), entry.mtime, done)\n      }\n\n      if (this[DOCHOWN](entry)) {\n        actions++\n        fs.chown(entry.absolute, this[UID](entry), this[GID](entry), done)\n      }\n\n      done()\n    })\n  }\n\n  [UNSUPPORTED] (entry) {\n    entry.unsupported = true\n    this.warn('TAR_ENTRY_UNSUPPORTED',\n      `unsupported entry type: ${entry.type}`, {entry})\n    entry.resume()\n  }\n\n  [SYMLINK] (entry, done) {\n    this[LINK](entry, entry.linkpath, 'symlink', done)\n  }\n\n  [HARDLINK] (entry, done) {\n    const linkpath = normPath(path.resolve(this.cwd, entry.linkpath))\n    this[LINK](entry, linkpath, 'link', done)\n  }\n\n  [PEND] () {\n    this[PENDING]++\n  }\n\n  [UNPEND] () {\n    this[PENDING]--\n    this[MAYBECLOSE]()\n  }\n\n  [SKIP] (entry) {\n    this[UNPEND]()\n    entry.resume()\n  }\n\n  // Check if we can reuse an existing filesystem entry safely and\n  // overwrite it, rather than unlinking and recreating\n  // Windows doesn't report a useful nlink, so we just never reuse entries\n  [ISREUSABLE] (entry, st) {\n    return entry.type === 'File' &&\n      !this.unlink &&\n      st.isFile() &&\n      st.nlink <= 1 &&\n      !isWindows\n  }\n\n  // check if a thing is there, and if so, try to clobber it\n  [CHECKFS] (entry) {\n    this[PEND]()\n    const paths = [entry.path]\n    if (entry.linkpath)\n      paths.push(entry.linkpath)\n    this.reservations.reserve(paths, done => this[CHECKFS2](entry, done))\n  }\n\n  [PRUNECACHE] (entry) {\n    // if we are not creating a directory, and the path is in the dirCache,\n    // then that means we are about to delete the directory we created\n    // previously, and it is no longer going to be a directory, and neither\n    // is any of its children.\n    // If a symbolic link is encountered, all bets are off.  There is no\n    // reasonable way to sanitize the cache in such a way we will be able to\n    // avoid having filesystem collisions.  If this happens with a non-symlink\n    // entry, it'll just fail to unpack, but a symlink to a directory, using an\n    // 8.3 shortname or certain unicode attacks, can evade detection and lead\n    // to arbitrary writes to anywhere on the system.\n    if (entry.type === 'SymbolicLink')\n      dropCache(this.dirCache)\n    else if (entry.type !== 'Directory')\n      pruneCache(this.dirCache, entry.absolute)\n  }\n\n  [CHECKFS2] (entry, fullyDone) {\n    this[PRUNECACHE](entry)\n\n    const done = er => {\n      this[PRUNECACHE](entry)\n      fullyDone(er)\n    }\n\n    const checkCwd = () => {\n      this[MKDIR](this.cwd, this.dmode, er => {\n        if (er) {\n          this[ONERROR](er, entry)\n          done()\n          return\n        }\n        this[CHECKED_CWD] = true\n        start()\n      })\n    }\n\n    const start = () => {\n      if (entry.absolute !== this.cwd) {\n        const parent = normPath(path.dirname(entry.absolute))\n        if (parent !== this.cwd) {\n          return this[MKDIR](parent, this.dmode, er => {\n            if (er) {\n              this[ONERROR](er, entry)\n              done()\n              return\n            }\n            afterMakeParent()\n          })\n        }\n      }\n      afterMakeParent()\n    }\n\n    const afterMakeParent = () => {\n      fs.lstat(entry.absolute, (lstatEr, st) => {\n        if (st && (this.keep || this.newer && st.mtime > entry.mtime)) {\n          this[SKIP](entry)\n          done()\n          return\n        }\n        if (lstatEr || this[ISREUSABLE](entry, st))\n          return this[MAKEFS](null, entry, done)\n\n        if (st.isDirectory()) {\n          if (entry.type === 'Directory') {\n            const needChmod = !this.noChmod &&\n              entry.mode &&\n              (st.mode & 0o7777) !== entry.mode\n            const afterChmod = er => this[MAKEFS](er, entry, done)\n            if (!needChmod)\n              return afterChmod()\n            return fs.chmod(entry.absolute, entry.mode, afterChmod)\n          }\n          // Not a dir entry, have to remove it.\n          // NB: the only way to end up with an entry that is the cwd\n          // itself, in such a way that == does not detect, is a\n          // tricky windows absolute path with UNC or 8.3 parts (and\n          // preservePaths:true, or else it will have been stripped).\n          // In that case, the user has opted out of path protections\n          // explicitly, so if they blow away the cwd, c'est la vie.\n          if (entry.absolute !== this.cwd) {\n            return fs.rmdir(entry.absolute, er =>\n              this[MAKEFS](er, entry, done))\n          }\n        }\n\n        // not a dir, and not reusable\n        // don't remove if the cwd, we want that error\n        if (entry.absolute === this.cwd)\n          return this[MAKEFS](null, entry, done)\n\n        unlinkFile(entry.absolute, er =>\n          this[MAKEFS](er, entry, done))\n      })\n    }\n\n    if (this[CHECKED_CWD])\n      start()\n    else\n      checkCwd()\n  }\n\n  [MAKEFS] (er, entry, done) {\n    if (er) {\n      this[ONERROR](er, entry)\n      done()\n      return\n    }\n\n    switch (entry.type) {\n      case 'File':\n      case 'OldFile':\n      case 'ContiguousFile':\n        return this[FILE](entry, done)\n\n      case 'Link':\n        return this[HARDLINK](entry, done)\n\n      case 'SymbolicLink':\n        return this[SYMLINK](entry, done)\n\n      case 'Directory':\n      case 'GNUDumpDir':\n        return this[DIRECTORY](entry, done)\n    }\n  }\n\n  [LINK] (entry, linkpath, link, done) {\n    // XXX: get the type ('symlink' or 'junction') for windows\n    fs[link](linkpath, entry.absolute, er => {\n      if (er)\n        this[ONERROR](er, entry)\n      else {\n        this[UNPEND]()\n        entry.resume()\n      }\n      done()\n    })\n  }\n}\n\nconst callSync = fn => {\n  try {\n    return [null, fn()]\n  } catch (er) {\n    return [er, null]\n  }\n}\nclass UnpackSync extends Unpack {\n  [MAKEFS] (er, entry) {\n    return super[MAKEFS](er, entry, () => {})\n  }\n\n  [CHECKFS] (entry) {\n    this[PRUNECACHE](entry)\n\n    if (!this[CHECKED_CWD]) {\n      const er = this[MKDIR](this.cwd, this.dmode)\n      if (er)\n        return this[ONERROR](er, entry)\n      this[CHECKED_CWD] = true\n    }\n\n    // don't bother to make the parent if the current entry is the cwd,\n    // we've already checked it.\n    if (entry.absolute !== this.cwd) {\n      const parent = normPath(path.dirname(entry.absolute))\n      if (parent !== this.cwd) {\n        const mkParent = this[MKDIR](parent, this.dmode)\n        if (mkParent)\n          return this[ONERROR](mkParent, entry)\n      }\n    }\n\n    const [lstatEr, st] = callSync(() => fs.lstatSync(entry.absolute))\n    if (st && (this.keep || this.newer && st.mtime > entry.mtime))\n      return this[SKIP](entry)\n\n    if (lstatEr || this[ISREUSABLE](entry, st))\n      return this[MAKEFS](null, entry)\n\n    if (st.isDirectory()) {\n      if (entry.type === 'Directory') {\n        const needChmod = !this.noChmod &&\n          entry.mode &&\n          (st.mode & 0o7777) !== entry.mode\n        const [er] = needChmod ? callSync(() => {\n          fs.chmodSync(entry.absolute, entry.mode)\n        }) : []\n        return this[MAKEFS](er, entry)\n      }\n      // not a dir entry, have to remove it\n      const [er] = callSync(() => fs.rmdirSync(entry.absolute))\n      this[MAKEFS](er, entry)\n    }\n\n    // not a dir, and not reusable.\n    // don't remove if it's the cwd, since we want that error.\n    const [er] = entry.absolute === this.cwd ? []\n      : callSync(() => unlinkFileSync(entry.absolute))\n    this[MAKEFS](er, entry)\n  }\n\n  [FILE] (entry, done) {\n    const mode = entry.mode & 0o7777 || this.fmode\n\n    const oner = er => {\n      let closeError\n      try {\n        fs.closeSync(fd)\n      } catch (e) {\n        closeError = e\n      }\n      if (er || closeError)\n        this[ONERROR](er || closeError, entry)\n      done()\n    }\n\n    let fd\n    try {\n      fd = fs.openSync(entry.absolute, getFlag(entry.size), mode)\n    } catch (er) {\n      return oner(er)\n    }\n    const tx = this.transform ? this.transform(entry) || entry : entry\n    if (tx !== entry) {\n      tx.on('error', er => this[ONERROR](er, entry))\n      entry.pipe(tx)\n    }\n\n    tx.on('data', chunk => {\n      try {\n        fs.writeSync(fd, chunk, 0, chunk.length)\n      } catch (er) {\n        oner(er)\n      }\n    })\n\n    tx.on('end', _ => {\n      let er = null\n      // try both, falling futimes back to utimes\n      // if either fails, handle the first error\n      if (entry.mtime && !this.noMtime) {\n        const atime = entry.atime || new Date()\n        const mtime = entry.mtime\n        try {\n          fs.futimesSync(fd, atime, mtime)\n        } catch (futimeser) {\n          try {\n            fs.utimesSync(entry.absolute, atime, mtime)\n          } catch (utimeser) {\n            er = futimeser\n          }\n        }\n      }\n\n      if (this[DOCHOWN](entry)) {\n        const uid = this[UID](entry)\n        const gid = this[GID](entry)\n\n        try {\n          fs.fchownSync(fd, uid, gid)\n        } catch (fchowner) {\n          try {\n            fs.chownSync(entry.absolute, uid, gid)\n          } catch (chowner) {\n            er = er || fchowner\n          }\n        }\n      }\n\n      oner(er)\n    })\n  }\n\n  [DIRECTORY] (entry, done) {\n    const mode = entry.mode & 0o7777 || this.dmode\n    const er = this[MKDIR](entry.absolute, mode)\n    if (er) {\n      this[ONERROR](er, entry)\n      done()\n      return\n    }\n    if (entry.mtime && !this.noMtime) {\n      try {\n        fs.utimesSync(entry.absolute, entry.atime || new Date(), entry.mtime)\n      } catch (er) {}\n    }\n    if (this[DOCHOWN](entry)) {\n      try {\n        fs.chownSync(entry.absolute, this[UID](entry), this[GID](entry))\n      } catch (er) {}\n    }\n    done()\n    entry.resume()\n  }\n\n  [MKDIR] (dir, mode) {\n    try {\n      return mkdir.sync(normPath(dir), {\n        uid: this.uid,\n        gid: this.gid,\n        processUid: this.processUid,\n        processGid: this.processGid,\n        umask: this.processUmask,\n        preserve: this.preservePaths,\n        unlink: this.unlink,\n        cache: this.dirCache,\n        cwd: this.cwd,\n        mode: mode,\n      })\n    } catch (er) {\n      return er\n    }\n  }\n\n  [LINK] (entry, linkpath, link, done) {\n    try {\n      fs[link + 'Sync'](linkpath, entry.absolute)\n      done()\n      entry.resume()\n    } catch (er) {\n      return this[ONERROR](er, entry)\n    }\n  }\n}\n\nUnpack.Sync = UnpackSync\nmodule.exports = Unpack\n","'use strict'\n\n// tar -u\n\nconst hlo = require('./high-level-opt.js')\nconst r = require('./replace.js')\n// just call tar.r with the filter and mtimeCache\n\nmodule.exports = (opt_, files, cb) => {\n  const opt = hlo(opt_)\n\n  if (!opt.file)\n    throw new TypeError('file is required')\n\n  if (opt.gzip)\n    throw new TypeError('cannot append to compressed archives')\n\n  if (!files || !Array.isArray(files) || !files.length)\n    throw new TypeError('no files or directories specified')\n\n  files = Array.from(files)\n\n  mtimeFilter(opt)\n  return r(opt, files, cb)\n}\n\nconst mtimeFilter = opt => {\n  const filter = opt.filter\n\n  if (!opt.mtimeCache)\n    opt.mtimeCache = new Map()\n\n  opt.filter = filter ? (path, stat) =>\n    filter(path, stat) && !(opt.mtimeCache.get(path) > stat.mtime)\n    : (path, stat) => !(opt.mtimeCache.get(path) > stat.mtime)\n}\n","'use strict'\nmodule.exports = Base => class extends Base {\n  warn (code, message, data = {}) {\n    if (this.file)\n      data.file = this.file\n    if (this.cwd)\n      data.cwd = this.cwd\n    data.code = message instanceof Error && message.code || code\n    data.tarCode = code\n    if (!this.strict && data.recoverable !== false) {\n      if (message instanceof Error) {\n        data = Object.assign(message, data)\n        message = message.message\n      }\n      this.emit('warn', data.tarCode, message, data)\n    } else if (message instanceof Error)\n      this.emit('error', Object.assign(message, data))\n    else\n      this.emit('error', Object.assign(new Error(`${code}: ${message}`), data))\n  }\n}\n","'use strict'\n\n// When writing files on Windows, translate the characters to their\n// 0xf000 higher-encoded versions.\n\nconst raw = [\n  '|',\n  '<',\n  '>',\n  '?',\n  ':',\n]\n\nconst win = raw.map(char =>\n  String.fromCharCode(0xf000 + char.charCodeAt(0)))\n\nconst toWin = new Map(raw.map((char, i) => [char, win[i]]))\nconst toRaw = new Map(win.map((char, i) => [char, raw[i]]))\n\nmodule.exports = {\n  encode: s => raw.reduce((s, c) => s.split(c).join(toWin.get(c)), s),\n  decode: s => win.reduce((s, c) => s.split(c).join(toRaw.get(c)), s),\n}\n","'use strict'\nconst MiniPass = require('minipass')\nconst Pax = require('./pax.js')\nconst Header = require('./header.js')\nconst fs = require('fs')\nconst path = require('path')\nconst normPath = require('./normalize-windows-path.js')\nconst stripSlash = require('./strip-trailing-slashes.js')\n\nconst prefixPath = (path, prefix) => {\n  if (!prefix)\n    return normPath(path)\n  path = normPath(path).replace(/^\\.(\\/|$)/, '')\n  return stripSlash(prefix) + '/' + path\n}\n\nconst maxReadSize = 16 * 1024 * 1024\nconst PROCESS = Symbol('process')\nconst FILE = Symbol('file')\nconst DIRECTORY = Symbol('directory')\nconst SYMLINK = Symbol('symlink')\nconst HARDLINK = Symbol('hardlink')\nconst HEADER = Symbol('header')\nconst READ = Symbol('read')\nconst LSTAT = Symbol('lstat')\nconst ONLSTAT = Symbol('onlstat')\nconst ONREAD = Symbol('onread')\nconst ONREADLINK = Symbol('onreadlink')\nconst OPENFILE = Symbol('openfile')\nconst ONOPENFILE = Symbol('onopenfile')\nconst CLOSE = Symbol('close')\nconst MODE = Symbol('mode')\nconst AWAITDRAIN = Symbol('awaitDrain')\nconst ONDRAIN = Symbol('ondrain')\nconst PREFIX = Symbol('prefix')\nconst HAD_ERROR = Symbol('hadError')\nconst warner = require('./warn-mixin.js')\nconst winchars = require('./winchars.js')\nconst stripAbsolutePath = require('./strip-absolute-path.js')\n\nconst modeFix = require('./mode-fix.js')\n\nconst WriteEntry = warner(class WriteEntry extends MiniPass {\n  constructor (p, opt) {\n    opt = opt || {}\n    super(opt)\n    if (typeof p !== 'string')\n      throw new TypeError('path is required')\n    this.path = normPath(p)\n    // suppress atime, ctime, uid, gid, uname, gname\n    this.portable = !!opt.portable\n    // until node has builtin pwnam functions, this'll have to do\n    this.myuid = process.getuid && process.getuid() || 0\n    this.myuser = process.env.USER || ''\n    this.maxReadSize = opt.maxReadSize || maxReadSize\n    this.linkCache = opt.linkCache || new Map()\n    this.statCache = opt.statCache || new Map()\n    this.preservePaths = !!opt.preservePaths\n    this.cwd = normPath(opt.cwd || process.cwd())\n    this.strict = !!opt.strict\n    this.noPax = !!opt.noPax\n    this.noMtime = !!opt.noMtime\n    this.mtime = opt.mtime || null\n    this.prefix = opt.prefix ? normPath(opt.prefix) : null\n\n    this.fd = null\n    this.blockLen = null\n    this.blockRemain = null\n    this.buf = null\n    this.offset = null\n    this.length = null\n    this.pos = null\n    this.remain = null\n\n    if (typeof opt.onwarn === 'function')\n      this.on('warn', opt.onwarn)\n\n    let pathWarn = false\n    if (!this.preservePaths) {\n      const [root, stripped] = stripAbsolutePath(this.path)\n      if (root) {\n        this.path = stripped\n        pathWarn = root\n      }\n    }\n\n    this.win32 = !!opt.win32 || process.platform === 'win32'\n    if (this.win32) {\n      // force the \\ to / normalization, since we might not *actually*\n      // be on windows, but want \\ to be considered a path separator.\n      this.path = winchars.decode(this.path.replace(/\\\\/g, '/'))\n      p = p.replace(/\\\\/g, '/')\n    }\n\n    this.absolute = normPath(opt.absolute || path.resolve(this.cwd, p))\n\n    if (this.path === '')\n      this.path = './'\n\n    if (pathWarn) {\n      this.warn('TAR_ENTRY_INFO', `stripping ${pathWarn} from absolute path`, {\n        entry: this,\n        path: pathWarn + this.path,\n      })\n    }\n\n    if (this.statCache.has(this.absolute))\n      this[ONLSTAT](this.statCache.get(this.absolute))\n    else\n      this[LSTAT]()\n  }\n\n  emit (ev, ...data) {\n    if (ev === 'error')\n      this[HAD_ERROR] = true\n    return super.emit(ev, ...data)\n  }\n\n  [LSTAT] () {\n    fs.lstat(this.absolute, (er, stat) => {\n      if (er)\n        return this.emit('error', er)\n      this[ONLSTAT](stat)\n    })\n  }\n\n  [ONLSTAT] (stat) {\n    this.statCache.set(this.absolute, stat)\n    this.stat = stat\n    if (!stat.isFile())\n      stat.size = 0\n    this.type = getType(stat)\n    this.emit('stat', stat)\n    this[PROCESS]()\n  }\n\n  [PROCESS] () {\n    switch (this.type) {\n      case 'File': return this[FILE]()\n      case 'Directory': return this[DIRECTORY]()\n      case 'SymbolicLink': return this[SYMLINK]()\n      // unsupported types are ignored.\n      default: return this.end()\n    }\n  }\n\n  [MODE] (mode) {\n    return modeFix(mode, this.type === 'Directory', this.portable)\n  }\n\n  [PREFIX] (path) {\n    return prefixPath(path, this.prefix)\n  }\n\n  [HEADER] () {\n    if (this.type === 'Directory' && this.portable)\n      this.noMtime = true\n\n    this.header = new Header({\n      path: this[PREFIX](this.path),\n      // only apply the prefix to hard links.\n      linkpath: this.type === 'Link' ? this[PREFIX](this.linkpath)\n      : this.linkpath,\n      // only the permissions and setuid/setgid/sticky bitflags\n      // not the higher-order bits that specify file type\n      mode: this[MODE](this.stat.mode),\n      uid: this.portable ? null : this.stat.uid,\n      gid: this.portable ? null : this.stat.gid,\n      size: this.stat.size,\n      mtime: this.noMtime ? null : this.mtime || this.stat.mtime,\n      type: this.type,\n      uname: this.portable ? null :\n      this.stat.uid === this.myuid ? this.myuser : '',\n      atime: this.portable ? null : this.stat.atime,\n      ctime: this.portable ? null : this.stat.ctime,\n    })\n\n    if (this.header.encode() && !this.noPax) {\n      super.write(new Pax({\n        atime: this.portable ? null : this.header.atime,\n        ctime: this.portable ? null : this.header.ctime,\n        gid: this.portable ? null : this.header.gid,\n        mtime: this.noMtime ? null : this.mtime || this.header.mtime,\n        path: this[PREFIX](this.path),\n        linkpath: this.type === 'Link' ? this[PREFIX](this.linkpath)\n        : this.linkpath,\n        size: this.header.size,\n        uid: this.portable ? null : this.header.uid,\n        uname: this.portable ? null : this.header.uname,\n        dev: this.portable ? null : this.stat.dev,\n        ino: this.portable ? null : this.stat.ino,\n        nlink: this.portable ? null : this.stat.nlink,\n      }).encode())\n    }\n    super.write(this.header.block)\n  }\n\n  [DIRECTORY] () {\n    if (this.path.substr(-1) !== '/')\n      this.path += '/'\n    this.stat.size = 0\n    this[HEADER]()\n    this.end()\n  }\n\n  [SYMLINK] () {\n    fs.readlink(this.absolute, (er, linkpath) => {\n      if (er)\n        return this.emit('error', er)\n      this[ONREADLINK](linkpath)\n    })\n  }\n\n  [ONREADLINK] (linkpath) {\n    this.linkpath = normPath(linkpath)\n    this[HEADER]()\n    this.end()\n  }\n\n  [HARDLINK] (linkpath) {\n    this.type = 'Link'\n    this.linkpath = normPath(path.relative(this.cwd, linkpath))\n    this.stat.size = 0\n    this[HEADER]()\n    this.end()\n  }\n\n  [FILE] () {\n    if (this.stat.nlink > 1) {\n      const linkKey = this.stat.dev + ':' + this.stat.ino\n      if (this.linkCache.has(linkKey)) {\n        const linkpath = this.linkCache.get(linkKey)\n        if (linkpath.indexOf(this.cwd) === 0)\n          return this[HARDLINK](linkpath)\n      }\n      this.linkCache.set(linkKey, this.absolute)\n    }\n\n    this[HEADER]()\n    if (this.stat.size === 0)\n      return this.end()\n\n    this[OPENFILE]()\n  }\n\n  [OPENFILE] () {\n    fs.open(this.absolute, 'r', (er, fd) => {\n      if (er)\n        return this.emit('error', er)\n      this[ONOPENFILE](fd)\n    })\n  }\n\n  [ONOPENFILE] (fd) {\n    this.fd = fd\n    if (this[HAD_ERROR])\n      return this[CLOSE]()\n\n    this.blockLen = 512 * Math.ceil(this.stat.size / 512)\n    this.blockRemain = this.blockLen\n    const bufLen = Math.min(this.blockLen, this.maxReadSize)\n    this.buf = Buffer.allocUnsafe(bufLen)\n    this.offset = 0\n    this.pos = 0\n    this.remain = this.stat.size\n    this.length = this.buf.length\n    this[READ]()\n  }\n\n  [READ] () {\n    const { fd, buf, offset, length, pos } = this\n    fs.read(fd, buf, offset, length, pos, (er, bytesRead) => {\n      if (er) {\n        // ignoring the error from close(2) is a bad practice, but at\n        // this point we already have an error, don't need another one\n        return this[CLOSE](() => this.emit('error', er))\n      }\n      this[ONREAD](bytesRead)\n    })\n  }\n\n  [CLOSE] (cb) {\n    fs.close(this.fd, cb)\n  }\n\n  [ONREAD] (bytesRead) {\n    if (bytesRead <= 0 && this.remain > 0) {\n      const er = new Error('encountered unexpected EOF')\n      er.path = this.absolute\n      er.syscall = 'read'\n      er.code = 'EOF'\n      return this[CLOSE](() => this.emit('error', er))\n    }\n\n    if (bytesRead > this.remain) {\n      const er = new Error('did not encounter expected EOF')\n      er.path = this.absolute\n      er.syscall = 'read'\n      er.code = 'EOF'\n      return this[CLOSE](() => this.emit('error', er))\n    }\n\n    // null out the rest of the buffer, if we could fit the block padding\n    // at the end of this loop, we've incremented bytesRead and this.remain\n    // to be incremented up to the blockRemain level, as if we had expected\n    // to get a null-padded file, and read it until the end.  then we will\n    // decrement both remain and blockRemain by bytesRead, and know that we\n    // reached the expected EOF, without any null buffer to append.\n    if (bytesRead === this.remain) {\n      for (let i = bytesRead; i < this.length && bytesRead < this.blockRemain; i++) {\n        this.buf[i + this.offset] = 0\n        bytesRead++\n        this.remain++\n      }\n    }\n\n    const writeBuf = this.offset === 0 && bytesRead === this.buf.length ?\n      this.buf : this.buf.slice(this.offset, this.offset + bytesRead)\n\n    const flushed = this.write(writeBuf)\n    if (!flushed)\n      this[AWAITDRAIN](() => this[ONDRAIN]())\n    else\n      this[ONDRAIN]()\n  }\n\n  [AWAITDRAIN] (cb) {\n    this.once('drain', cb)\n  }\n\n  write (writeBuf) {\n    if (this.blockRemain < writeBuf.length) {\n      const er = new Error('writing more data than expected')\n      er.path = this.absolute\n      return this.emit('error', er)\n    }\n    this.remain -= writeBuf.length\n    this.blockRemain -= writeBuf.length\n    this.pos += writeBuf.length\n    this.offset += writeBuf.length\n    return super.write(writeBuf)\n  }\n\n  [ONDRAIN] () {\n    if (!this.remain) {\n      if (this.blockRemain)\n        super.write(Buffer.alloc(this.blockRemain))\n      return this[CLOSE](er => er ? this.emit('error', er) : this.end())\n    }\n\n    if (this.offset >= this.length) {\n      // if we only have a smaller bit left to read, alloc a smaller buffer\n      // otherwise, keep it the same length it was before.\n      this.buf = Buffer.allocUnsafe(Math.min(this.blockRemain, this.buf.length))\n      this.offset = 0\n    }\n    this.length = this.buf.length - this.offset\n    this[READ]()\n  }\n})\n\nclass WriteEntrySync extends WriteEntry {\n  [LSTAT] () {\n    this[ONLSTAT](fs.lstatSync(this.absolute))\n  }\n\n  [SYMLINK] () {\n    this[ONREADLINK](fs.readlinkSync(this.absolute))\n  }\n\n  [OPENFILE] () {\n    this[ONOPENFILE](fs.openSync(this.absolute, 'r'))\n  }\n\n  [READ] () {\n    let threw = true\n    try {\n      const { fd, buf, offset, length, pos } = this\n      const bytesRead = fs.readSync(fd, buf, offset, length, pos)\n      this[ONREAD](bytesRead)\n      threw = false\n    } finally {\n      // ignoring the error from close(2) is a bad practice, but at\n      // this point we already have an error, don't need another one\n      if (threw) {\n        try {\n          this[CLOSE](() => {})\n        } catch (er) {}\n      }\n    }\n  }\n\n  [AWAITDRAIN] (cb) {\n    cb()\n  }\n\n  [CLOSE] (cb) {\n    fs.closeSync(this.fd)\n    cb()\n  }\n}\n\nconst WriteEntryTar = warner(class WriteEntryTar extends MiniPass {\n  constructor (readEntry, opt) {\n    opt = opt || {}\n    super(opt)\n    this.preservePaths = !!opt.preservePaths\n    this.portable = !!opt.portable\n    this.strict = !!opt.strict\n    this.noPax = !!opt.noPax\n    this.noMtime = !!opt.noMtime\n\n    this.readEntry = readEntry\n    this.type = readEntry.type\n    if (this.type === 'Directory' && this.portable)\n      this.noMtime = true\n\n    this.prefix = opt.prefix || null\n\n    this.path = normPath(readEntry.path)\n    this.mode = this[MODE](readEntry.mode)\n    this.uid = this.portable ? null : readEntry.uid\n    this.gid = this.portable ? null : readEntry.gid\n    this.uname = this.portable ? null : readEntry.uname\n    this.gname = this.portable ? null : readEntry.gname\n    this.size = readEntry.size\n    this.mtime = this.noMtime ? null : opt.mtime || readEntry.mtime\n    this.atime = this.portable ? null : readEntry.atime\n    this.ctime = this.portable ? null : readEntry.ctime\n    this.linkpath = normPath(readEntry.linkpath)\n\n    if (typeof opt.onwarn === 'function')\n      this.on('warn', opt.onwarn)\n\n    let pathWarn = false\n    if (!this.preservePaths) {\n      const [root, stripped] = stripAbsolutePath(this.path)\n      if (root) {\n        this.path = stripped\n        pathWarn = root\n      }\n    }\n\n    this.remain = readEntry.size\n    this.blockRemain = readEntry.startBlockSize\n\n    this.header = new Header({\n      path: this[PREFIX](this.path),\n      linkpath: this.type === 'Link' ? this[PREFIX](this.linkpath)\n      : this.linkpath,\n      // only the permissions and setuid/setgid/sticky bitflags\n      // not the higher-order bits that specify file type\n      mode: this.mode,\n      uid: this.portable ? null : this.uid,\n      gid: this.portable ? null : this.gid,\n      size: this.size,\n      mtime: this.noMtime ? null : this.mtime,\n      type: this.type,\n      uname: this.portable ? null : this.uname,\n      atime: this.portable ? null : this.atime,\n      ctime: this.portable ? null : this.ctime,\n    })\n\n    if (pathWarn) {\n      this.warn('TAR_ENTRY_INFO', `stripping ${pathWarn} from absolute path`, {\n        entry: this,\n        path: pathWarn + this.path,\n      })\n    }\n\n    if (this.header.encode() && !this.noPax) {\n      super.write(new Pax({\n        atime: this.portable ? null : this.atime,\n        ctime: this.portable ? null : this.ctime,\n        gid: this.portable ? null : this.gid,\n        mtime: this.noMtime ? null : this.mtime,\n        path: this[PREFIX](this.path),\n        linkpath: this.type === 'Link' ? this[PREFIX](this.linkpath)\n        : this.linkpath,\n        size: this.size,\n        uid: this.portable ? null : this.uid,\n        uname: this.portable ? null : this.uname,\n        dev: this.portable ? null : this.readEntry.dev,\n        ino: this.portable ? null : this.readEntry.ino,\n        nlink: this.portable ? null : this.readEntry.nlink,\n      }).encode())\n    }\n\n    super.write(this.header.block)\n    readEntry.pipe(this)\n  }\n\n  [PREFIX] (path) {\n    return prefixPath(path, this.prefix)\n  }\n\n  [MODE] (mode) {\n    return modeFix(mode, this.type === 'Directory', this.portable)\n  }\n\n  write (data) {\n    const writeLen = data.length\n    if (writeLen > this.blockRemain)\n      throw new Error('writing more to entry than is appropriate')\n    this.blockRemain -= writeLen\n    return super.write(data)\n  }\n\n  end () {\n    if (this.blockRemain)\n      super.write(Buffer.alloc(this.blockRemain))\n    return super.end()\n  }\n})\n\nWriteEntry.Sync = WriteEntrySync\nWriteEntry.Tar = WriteEntryTar\n\nconst getType = stat =>\n  stat.isFile() ? 'File'\n  : stat.isDirectory() ? 'Directory'\n  : stat.isSymbolicLink() ? 'SymbolicLink'\n  : 'Unsupported'\n\nmodule.exports = WriteEntry\n","'use strict';\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0x00) {  // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {  // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0  // overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {  // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80 ||  // overlong\n        buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0  // surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {  // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80 ||  // overlong\n        buf[i] === 0xf4 && buf[i + 1] > 0x8f || buf[i] > 0xf4  // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nmodule.exports = isValidUTF8;\n","'use strict';\n\ntry {\n  module.exports = require('node-gyp-build')(__dirname);\n} catch (e) {\n  module.exports = require('./fallback');\n}\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) return target.slice(0, offset);\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.byteLength === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = Buffer.from(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\ntry {\n  const bufferUtil = require('bufferutil');\n\n  module.exports = {\n    concat,\n    mask(source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    },\n    toArrayBuffer,\n    toBuffer,\n    unmask(buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    }\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    concat,\n    mask: _mask,\n    toArrayBuffer,\n    toBuffer,\n    unmask: _unmask\n  };\n}\n","'use strict';\n\nmodule.exports = {\n  BINARY_TYPES: ['nodebuffer', 'arraybuffer', 'fragments'],\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {Function} listener The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, listener, options = {}) {\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        listener.call(this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = listener;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {Function} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) data = data.slice(0, data.length - 4);\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._state = GET_INFO;\n    this._loop = false;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = buf.slice(n);\n      return buf.slice(0, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = buf.slice(n);\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    let err;\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          err = this.getInfo();\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          err = this.getPayloadLength16();\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          err = this.getPayloadLength64();\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          err = this.getData(cb);\n          break;\n        default:\n          // `INFLATING`\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    cb(err);\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getInfo() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (!this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n      }\n\n      if (compressed) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n      }\n\n      if (this._payloadLength > 0x7d) {\n        this._loop = false;\n        return error(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      }\n    } else {\n      this._loop = false;\n      return error(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n      }\n    } else if (this._masked) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength16() {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    return this.haveLength();\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  getPayloadLength64() {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      this._loop = false;\n      return error(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    return this.haveLength();\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @return {(RangeError|undefined)} A possible error\n   * @private\n   */\n  haveLength() {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        this._loop = false;\n        return error(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) return this.controlMessage(data);\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    return this.dataMessage();\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          return cb(\n            error(\n              RangeError,\n              'Max payload size exceeded',\n              false,\n              1009,\n              'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n            )\n          );\n        }\n\n        this._fragments.push(buf);\n      }\n\n      const er = this.dataMessage();\n      if (er) return cb(er);\n\n      this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @return {(Error|undefined)} A possible error\n   * @private\n   */\n  dataMessage() {\n    if (this._fin) {\n      const messageLength = this._messageLength;\n      const fragments = this._fragments;\n\n      this._totalPayloadLength = 0;\n      this._messageLength = 0;\n      this._fragmented = 0;\n      this._fragments = [];\n\n      if (this._opcode === 2) {\n        let data;\n\n        if (this._binaryType === 'nodebuffer') {\n          data = concat(fragments, messageLength);\n        } else if (this._binaryType === 'arraybuffer') {\n          data = toArrayBuffer(concat(fragments, messageLength));\n        } else {\n          data = fragments;\n        }\n\n        this.emit('message', data, true);\n      } else {\n        const buf = concat(fragments, messageLength);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          this._loop = false;\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('message', buf, false);\n      }\n    }\n\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data) {\n    if (this._opcode === 0x08) {\n      this._loop = false;\n\n      if (data.length === 0) {\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else if (data.length === 1) {\n        return error(\n          RangeError,\n          'invalid payload length 1',\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          return error(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n        }\n\n        const buf = data.slice(2);\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          return error(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n        }\n\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n    } else if (this._opcode === 0x09) {\n      this.emit('ping', data);\n    } else {\n      this.emit('pong', data);\n    }\n\n    this._state = GET_INFO;\n  }\n}\n\nmodule.exports = Receiver;\n\n/**\n * Builds an error object.\n *\n * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n * @param {String} message The error message\n * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n *     `message`\n * @param {Number} statusCode The status code\n * @param {String} errorCode The exposed error code\n * @return {(Error|RangeError)} The error\n * @private\n */\nfunction error(ErrorCtor, message, prefix, statusCode, errorCode) {\n  const err = new ErrorCtor(\n    prefix ? `Invalid WebSocket frame: ${message}` : message\n  );\n\n  Error.captureStackTrace(err, error);\n  err.code = errorCode;\n  err[kStatusCode] = statusCode;\n  return err;\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls$\" }] */\n\n'use strict';\n\nconst net = require('net');\nconst tls = require('tls');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER } = require('./constants');\nconst { isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._deflating = false;\n    this._queue = [];\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        randomFillSync(mask, 0, 4);\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (this._deflating) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    if (perMessageDeflate) {\n      const opts = {\n        [kByteLength]: byteLength,\n        fin: options.fin,\n        generateMask: this._generateMask,\n        mask: options.mask,\n        maskBuffer: this._maskBuffer,\n        opcode,\n        readOnly,\n        rsv1\n      };\n\n      if (this._deflating) {\n        this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n      } else {\n        this.dispatch(data, this._compress, opts, cb);\n      }\n    } else {\n      this.sendFrame(\n        Sender.frame(data, {\n          [kByteLength]: byteLength,\n          fin: options.fin,\n          generateMask: this._generateMask,\n          mask: options.mask,\n          maskBuffer: this._maskBuffer,\n          opcode,\n          readOnly,\n          rsv1: false\n        }),\n        cb\n      );\n    }\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._deflating = true;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        if (typeof cb === 'function') cb(err);\n\n        for (let i = 0; i < this._queue.length; i++) {\n          const params = this._queue[i];\n          const callback = params[params.length - 1];\n\n          if (typeof callback === 'function') callback(err);\n        }\n\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._deflating = false;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (!this._deflating && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","'use strict';\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\ntry {\n  const isValidUTF8 = require('utf-8-validate');\n\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8(buf) {\n      return buf.length < 150 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    },\n    tokenChars\n  };\n} catch (e) /* istanbul ignore next */ {\n  module.exports = {\n    isValidStatusCode,\n    isValidUTF8: _isValidUTF8,\n    tokenChars\n  };\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^net|tls|https$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst https = require('https');\nconst net = require('net');\nconst tls = require('tls');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key =\n      req.headers['sec-websocket-key'] !== undefined\n        ? req.headers['sec-websocket-key']\n        : false;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (\n      req.method !== 'GET' ||\n      req.headers.upgrade.toLowerCase() !== 'websocket' ||\n      !key ||\n      !keyRegex.test(key) ||\n      (version !== 8 && version !== 13) ||\n      !this.shouldHandle(req)\n    ) {\n      return abortHandshake(socket, 400);\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        return abortHandshake(socket, 400);\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle premature socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {(net.Socket|tls.Socket)} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  if (socket.writable) {\n    message = message || http.STATUS_CODES[code];\n    headers = {\n      Connection: 'close',\n      'Content-Type': 'text/html',\n      'Content-Length': Buffer.byteLength(message),\n      ...headers\n    };\n\n    socket.write(\n      `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n        Object.keys(headers)\n          .map((h) => `${h}: ${headers[h]}`)\n          .join('\\r\\n') +\n        '\\r\\n\\r\\n' +\n        message\n    );\n  }\n\n  socket.removeListener('error', socketOnError);\n  socket.destroy();\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Readable$\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\nconst protocolVersions = [8, 13];\nconst closeTimeout = 30 * 1000;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * This deviates from the WHATWG interface since ws doesn't support the\n   * required default \"blob\" type (instead we define a custom \"nodebuffer\"\n   * type).\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {(net.Socket|tls.Socket)} socket The network socket between the\n   *     server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    this._sender = new Sender(socket, this._extensions, options.generateMask);\n    this._receiver = receiver;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    socket.setTimeout(0);\n    socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    //\n    // Specify a timeout for the closing handshake to complete.\n    //\n    this._closeTimer = setTimeout(\n      this._socket.destroy.bind(this._socket),\n      closeTimeout\n    );\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      return abortHandshake(this, this._req, msg);\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    createConnection: undefined,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: undefined,\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n    websocket._url = address.href;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n\n    websocket._url = address;\n  }\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isUnixSocket = parsedUrl.protocol === 'ws+unix:';\n  let invalidURLMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isUnixSocket) {\n    invalidURLMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", or \"ws+unix:\"';\n  } else if (isUnixSocket && !parsedUrl.pathname) {\n    invalidURLMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidURLMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidURLMessage) {\n    const err = new SyntaxError(invalidURLMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const get = isSecure ? https.get : http.get;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection = isSecure ? tlsConnect : netConnect;\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket',\n    ...opts.headers\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isUnixSocket) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalHost = parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (parsedUrl.host !== websocket._originalHost) {\n      //\n      // Match curl 7.77.0 behavior and drop the following headers. These\n      // headers are also dropped when following a redirect to a subdomain.\n      //\n      delete opts.headers.authorization;\n      delete opts.headers.cookie;\n      delete opts.headers.host;\n      opts.auth = undefined;\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n  }\n\n  let req = (websocket._req = get(opts));\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req.aborted) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the `upgrade`\n    // event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n}\n\n/**\n * Emit the `'error'` and `'close'` event.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    stream.once('abort', websocket.emitClose.bind(websocket));\n    websocket.emit('error', err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    cb(err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  websocket.emit('error', err);\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  websocket.pong(data, !websocket._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The listener of the `net.Socket` `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the `net.Socket` `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the `net.Socket` `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","'use strict'\nmodule.exports = function (Yallist) {\n  Yallist.prototype[Symbol.iterator] = function* () {\n    for (let walker = this.head; walker; walker = walker.next) {\n      yield walker.value\n    }\n  }\n}\n","'use strict'\nmodule.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n\n  return next\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.splice = function (start, deleteCount, ...nodes) {\n  if (start > this.length) {\n    start = this.length - 1\n  }\n  if (start < 0) {\n    start = this.length + start;\n  }\n\n  for (var i = 0, walker = this.head; walker !== null && i < start; i++) {\n    walker = walker.next\n  }\n\n  var ret = []\n  for (var i = 0; walker && i < deleteCount; i++) {\n    ret.push(walker.value)\n    walker = this.removeNode(walker)\n  }\n  if (walker === null) {\n    walker = this.tail\n  }\n\n  if (walker !== this.head && walker !== this.tail) {\n    walker = walker.prev\n  }\n\n  for (var i = 0; i < nodes.length; i++) {\n    walker = insert(this, walker, nodes[i])\n  }\n  return ret;\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction insert (self, node, value) {\n  var inserted = node === self.head ?\n    new Node(value, null, node, self) :\n    new Node(value, node, node.next, self)\n\n  if (inserted.next === null) {\n    self.tail = inserted\n  }\n  if (inserted.prev === null) {\n    self.head = inserted\n  }\n\n  self.length++\n\n  return inserted\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\ntry {\n  // add if support for Symbol.iterator is present\n  require('./iterator.js')(Yallist)\n} catch (er) {}\n","module.exports = require(\"assert\");","module.exports = require(\"buffer\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"fs\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"stream\");","module.exports = require(\"string_decoder\");","module.exports = require(\"tls\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"process\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"electron\");","const __WEBPACK_NAMESPACE_OBJECT__ = require(\"child_process\");","import createWebSocketStream from './lib/stream.js';\nimport Receiver from './lib/receiver.js';\nimport Sender from './lib/sender.js';\nimport WebSocket from './lib/websocket.js';\nimport WebSocketServer from './lib/websocket-server.js';\n\nexport { createWebSocketStream, Receiver, Sender, WebSocket, WebSocketServer };\nexport default WebSocket;\n","export class BaseError extends Error {\n\tconstructor(name: string, wrapErr: Error, message: string,\n\t\targs?: {[key: string]: any}) {\n\n\t\tsuper()\n\n\t\tif (args) {\n\t\t\tfor (let key in args) {\n\t\t\t\tmessage += \" \" + key + \"=\" + args[key]\n\t\t\t}\n\t\t}\n\n\t\tif (wrapErr) {\n\t\t\tmessage += \"\\n\" + wrapErr\n\t\t}\n\n\t\tthis.name = name\n\t\tthis.message = message\n\t\tif (wrapErr) {\n\t\t\tthis.stack = wrapErr.stack\n\t\t}\n\t}\n}\n\nexport class ReadError extends BaseError {\n\tconstructor(wrapErr: Error, message: string, args?: {[key: string]: any}) {\n\t\tsuper(\"ReadError\", wrapErr, message, args)\n\t}\n}\n\nexport class WriteError extends BaseError {\n\tconstructor(wrapErr: Error, message: string, args?: {[key: string]: any}) {\n\t\tsuper(\"WriteError\", wrapErr, message, args)\n\t}\n}\n\nexport class RequestError extends BaseError {\n\tconstructor(wrapErr: Error, message: string, args?: {[key: string]: any}) {\n\t\tsuper(\"RequestError\", wrapErr, message, args)\n\t}\n}\n","import fs from \"fs\"\nimport path from \"path\"\nimport electron from \"electron\"\nimport * as Errors from \"./Errors\"\n\nfunction push(level: string, msg: string): void {\n\tlet time = new Date()\n\tmsg = \"[\" + time.getFullYear() + \"-\" + (time.getMonth() + 1) + \"-\" +\n\t\ttime.getDate() + \" \" + time.getHours() + \":\" + time.getMinutes() + \":\" +\n\t\ttime.getSeconds() + \"][\" + level  + \"] \" + msg + \"\\n\"\n\n\tconsole.error(msg)\n\n\tlet logPath = path.join(electron.app.getPath(\"userData\"), \"pritunl.log\")\n\n\tfs.appendFile(logPath, msg, (err: Error): void => {\n\t\tif (err) {\n\t\t\terr = new Errors.WriteError(err, \"Logger: Failed to write log\")\n\t\t\tconsole.error(err)\n\t\t}\n\t})\n}\n\nexport function info(msg: string): void {\n\tpush(\"INFO\", msg)\n}\n\nexport function warning(msg: string): void {\n\tpush(\"WARN\", msg)\n}\n\nexport function error(msg: string): void {\n\tpush(\"ERROR\", msg)\n}\n","import http from \"http\"\nimport https from \"https\"\nimport * as Logger from \"./Logger\"\nimport * as Errors from \"./Errors\"\n\nexport var DefaultTimeout = 20\n\nexport class Response {\n\tresponse: http.IncomingMessage\n\theaders: Map<string, string>\n\tstatus: number\n\tmessage: string\n\tdata: string\n\n\tconstructor(res: http.IncomingMessage) {\n\t\tthis.response = res\n\t\tthis.status = res.statusCode\n\t\tthis.message = res.statusMessage\n\t}\n\n\tget(key: string): string {\n\t\tif (this.headers) {\n\t\t\treturn this.headers.get(key)\n\t\t}\n\n\t\tlet curKey: string = null\n\t\tlet headers = new Map<string, string>()\n\n\t\tfor (let item of this.response.rawHeaders) {\n\t\t\tif (curKey) {\n\t\t\t\theaders.set(curKey, item)\n\t\t\t\tcurKey = null\n\t\t\t} else {\n\t\t\t\tcurKey = item\n\t\t\t}\n\t\t}\n\n\t\tthis.headers = headers\n\n\t\treturn this.headers.get(key)\n\t}\n\n\tjson(): object {\n\t\treturn JSON.parse(this.data || null)\n\t}\n\n\tjsonPassive(): object {\n\t\ttry {\n\t\t\treturn JSON.parse(this.data || null)\n\t\t} catch {\n\t\t\treturn null\n\t\t}\n\t}\n\n\tstring(): string {\n\t\treturn this.data\n\t}\n}\n\nexport class Request {\n\tssl: boolean\n\thostname: string\n\tport: number\n\tsocketPath: string\n\tttl: number\n\tmethod: string\n\tpath: string\n\theaders: Map<string, string>\n\tdata: string\n\n\tconstructor() {\n\t\tthis.headers = new Map<string, string>()\n\t}\n\n\ttcp(host: string): Request {\n\t\tlet hosts = host.split(\"://\")\n\n\t\tthis.ssl = hosts[0] === \"https\"\n\n\t\thosts = hosts[1].split(\":\")\n\n\t\tif (hosts.length > 1) {\n\t\t\tthis.port = parseInt(hosts.pop(), 10)\n\t\t} else {\n\t\t\tthis.port = 80\n\t\t}\n\n\t\tthis.hostname = hosts.join(\":\")\n\n\t\treturn this\n\t}\n\n\tunix(path: string): Request {\n\t\tthis.socketPath = path\n\t\treturn this\n\t}\n\n\ttimeout(timeout: number) {\n\t\tthis.ttl = timeout * 1000\n\t}\n\n\tget(path: string): Request {\n\t\tthis.method = \"GET\"\n\t\tthis.path = path\n\t\treturn this\n\t}\n\n\tput(path: string): Request {\n\t\tthis.method = \"PUT\"\n\t\tthis.path = path\n\t\treturn this\n\t}\n\n\tpost(path: string): Request {\n\t\tthis.method = \"POST\"\n\t\tthis.path = path\n\t\treturn this\n\t}\n\n\tdelete(path: string): Request {\n\t\tthis.method = \"DELETE\"\n\t\tthis.path = path\n\t\treturn this\n\t}\n\n\tset(key: string, value: string): Request {\n\t\tthis.headers.set(key, value)\n\t\treturn this\n\t}\n\n\tsend(data: string|object): Request {\n\t\tif (typeof data === \"string\") {\n\t\t\tthis.data = data\n\t\t} else {\n\t\t\tthis.headers.set(\"Content-Type\", \"application/json\")\n\t\t\tthis.data = JSON.stringify(data)\n\t\t}\n\n\t\treturn this\n\t}\n\n\tend(): Promise<Response> {\n\t\treturn new Promise<Response>((resolve, reject): void => {\n\t\t\ttry {\n\t\t\t\tlet options: http.RequestOptions = {\n\t\t\t\t\tpath: this.path,\n\t\t\t\t\tmethod: this.method,\n\t\t\t\t\theaders: Object.fromEntries(this.headers)\n\t\t\t\t}\n\n\t\t\t\tif (this.socketPath) {\n\t\t\t\t\toptions.socketPath = this.socketPath\n\t\t\t\t} else {\n\t\t\t\t\toptions.hostname = this.hostname\n\t\t\t\t\toptions.port = this.port\n\t\t\t\t}\n\n\t\t\t\toptions.timeout = this.ttl || (DefaultTimeout * 1000)\n\n\t\t\t\tlet callback = (nodeResp: http.IncomingMessage) => {\n\t\t\t\t\tlet resp = new Response(nodeResp)\n\n\t\t\t\t\tnodeResp.on(\"data\", (data) => {\n\t\t\t\t\t\tif (data) {\n\t\t\t\t\t\t\tresp.data = data.toString()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t\tnodeResp.on(\"end\", () => {\n\t\t\t\t\t\tresolve(resp)\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tlet req: http.ClientRequest\n\t\t\t\tif (this.ssl) {\n\t\t\t\t\treq = https.request(options, callback)\n\t\t\t\t} else {\n\t\t\t\t\treq = http.request(options, callback)\n\t\t\t\t}\n\n\t\t\t\treq.on(\"timeout\", () => {\n\t\t\t\t\tlet err = new Errors.RequestError(\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\"Request: Timeout error\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tssl: this.ssl,\n\t\t\t\t\t\t\thostname: this.hostname,\n\t\t\t\t\t\t\tport: this.port,\n\t\t\t\t\t\t\tmethod: this.method,\n\t\t\t\t\t\t\tpath: this.path,\n\t\t\t\t\t\t\tttl: this.ttl,\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t\treq.destroy(err)\n\t\t\t\t\tLogger.error(err.message)\n\t\t\t\t\treject(err)\n\t\t\t\t})\n\n\t\t\t\treq.on(\"error\", (err) => {\n\t\t\t\t\terr = new Errors.RequestError(\n\t\t\t\t\t\terr,\n\t\t\t\t\t\t\"Request: Client error\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tssl: this.ssl,\n\t\t\t\t\t\t\thostname: this.hostname,\n\t\t\t\t\t\t\tport: this.port,\n\t\t\t\t\t\t\tmethod: this.method,\n\t\t\t\t\t\t\tpath: this.path,\n\t\t\t\t\t\t\tttl: this.ttl,\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t\tLogger.error(err.message)\n\t\t\t\t\treject(err)\n\t\t\t\t})\n\n\t\t\t\tif (this.data) {\n\t\t\t\t\treq.write(this.data)\n\t\t\t\t}\n\n\t\t\t\treq.end()\n\t\t\t} catch (err) {\n\t\t\t\terr = new Errors.RequestError(\n\t\t\t\t\terr,\n\t\t\t\t\t\"Request: Exception\",\n\t\t\t\t\t{\n\t\t\t\t\t\tssl: this.ssl,\n\t\t\t\t\t\thostname: this.hostname,\n\t\t\t\t\t\tport: this.port,\n\t\t\t\t\t\tmethod: this.method,\n\t\t\t\t\t\tpath: this.path,\n\t\t\t\t\t\tttl: this.ttl,\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\tLogger.error(err.message)\n\t\t\t\treject(err)\n\t\t\t}\n\t\t})\n\t}\n}\n","/// <reference path=\"./References.d.ts\"/>\n\nexport class BaseError extends Error {\n\tname: string\n\tmessage: string\n\tstack: string\n\n\tconstructor(name: string, wrapErr: Error, message: string,\n\t\targs?: {[key: string]: any}) {\n\n\t\tsuper()\n\n\t\tif (args) {\n\t\t\tfor (let key in args) {\n\t\t\t\tmessage += \" \" + key + \"=\" + args[key]\n\t\t\t}\n\t\t}\n\n\t\tif (wrapErr) {\n\t\t\tmessage += '\\n' + wrapErr\n\t\t}\n\n\t\tthis.name = name\n\t\tthis.message = message\n\t\tif (wrapErr) {\n\t\t\tthis.stack = wrapErr.stack\n\t\t}\n\t}\n}\n\nexport class ReadError extends BaseError {\n\tconstructor(wrapErr: Error, message: string, args?: {[key: string]: any}) {\n\t\tsuper(\"ReadError\", wrapErr, message, args)\n\t}\n}\n\nexport class WriteError extends BaseError {\n\tconstructor(wrapErr: Error, message: string, args?: {[key: string]: any}) {\n\t\tsuper(\"WriteError\", wrapErr, message, args)\n\t}\n}\n\nexport class ParseError extends BaseError {\n\tconstructor(wrapErr: Error, message: string, args?: {[key: string]: any}) {\n\t\tsuper(\"ParseError\", wrapErr, message, args)\n\t}\n}\n\nexport class RequestError extends BaseError {\n\tconstructor(wrapErr: Error, message: string, args?: {[key: string]: any}) {\n\t\tsuper(\"RequestError\", wrapErr, message, args)\n\t}\n}\n\nexport class ExecError extends BaseError {\n\tconstructor(wrapErr: Error, message: string, args?: {[key: string]: any}) {\n\t\tsuper(\"ExecError\", wrapErr, message, args)\n\t}\n}\n","import WebSocket from \"ws\"\nimport fs from \"fs\"\nimport path from \"path\"\nimport process from \"process\"\nimport * as Request from \"./Request\"\nimport * as Logger from \"./Logger\"\nimport electron from \"electron\";\nimport * as MiscUtils from \"../app/utils/MiscUtils\";\n\nexport interface Event {\n\tid: string\n\ttype: string\n\tdata?: any\n}\n\nexport type Callback = (event: Event) => void\n\nlet unix = false\nconst unixPath = \"/var/run/pritunl.sock\"\nconst webHost = \"http://127.0.0.1:9770\"\nconst unixWsHost = \"ws+unix://\" + path.join(\n\tpath.sep, \"var\", \"run\", \"pritunl.sock\") + \":\"\nconst webWsHost = \"ws://127.0.0.1:9770\"\n\nlet showConnect = false\nlet socket: WebSocket.WebSocket\nlet callbacks: Callback[] = []\n\nexport let winDrive = 'C:\\\\';\nlet systemDrv = process.env.SYSTEMDRIVE;\nif (systemDrv) {\n\twinDrive = systemDrv + '\\\\';\n}\n\nif (process.platform === \"linux\" || process.platform === \"darwin\") {\n\tunix = true\n}\n\nfunction getAuthPath(): string {\n\tif (process.argv.indexOf(\"--dev\") !== -1) {\n\t\treturn path.join(__dirname, \"..\", \"..\", \"dev\", \"auth\")\n\t} else {\n\t\tif (process.platform === \"win32\") {\n\t\t\treturn path.join(winDrive, \"ProgramData\", \"Pritunl\", \"auth\")\n\t\t} else {\n\t\t\treturn path.join(path.sep, \"var\", \"run\", \"pritunl.auth\")\n\t\t}\n\t}\n}\n\nfunction getAuthToken(): Promise<string> {\n\treturn new Promise<string>((resolve, reject): void => {\n\t\tfs.readFile(getAuthPath(), \"utf-8\", (err, data: string): void => {\n\t\t\tresolve(data ? data.trim() : \"\")\n\t\t})\n\t})\n}\n\nexport function sync(): Promise<boolean> {\n\treturn new Promise<boolean>(async (resolve) => {\n\t\tlet token: string\n\t\ttry {\n\t\t\ttoken = await getAuthToken()\n\t\t} catch(err) {\n\t\t\tLogger.error(err.message || err)\n\t\t\tresolve(false)\n\t\t\treturn\n\t\t}\n\n\t\tlet req = new Request.Request()\n\n\t\tif (unix) {\n\t\t\treq.unix(unixPath)\n\t\t} else {\n\t\t\treq.tcp(webHost)\n\t\t}\n\n\t\treq.get(\"/status\")\n\t\t\t.set(\"Auth-Token\", token)\n\t\t\t.set(\"User-Agent\", \"pritunl\")\n\t\t\t.end()\n\t\t\t.then((resp: Request.Response) => {\n\t\t\t\tif (resp.status === 200) {\n\t\t\t\t\tlet data = resp.jsonPassive() as any\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tresolve(data.status)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve(false)\n\t\t\t\t\t}\n\t\t\t\t} {\n\t\t\t\t\tresolve(false)\n\t\t\t\t}\n\t\t\t}, (err) => {\n\t\t\t\tLogger.error(err.message)\n\t\t\t\tresolve(false)\n\t\t\t})\n\t})\n}\n\nexport function wakeup(): Promise<boolean> {\n\treturn new Promise<boolean>(async (resolve) => {\n\t\tlet token: string\n\t\ttry {\n\t\t\ttoken = await getAuthToken()\n\t\t} catch(err) {\n\t\t\tLogger.error(err.message || err)\n\t\t\tresolve(false)\n\t\t\treturn\n\t\t}\n\n\t\tlet req = new Request.Request()\n\n\t\tif (unix) {\n\t\t\treq.unix(unixPath)\n\t\t} else {\n\t\t\treq.tcp(webHost)\n\t\t}\n\n\t\treq.post(\"/wakeup\")\n\t\t\t.set(\"Auth-Token\", token)\n\t\t\t.set(\"User-Agent\", \"pritunl\")\n\t\t\t.end()\n\t\t\t.then((resp: Request.Response) => {\n\t\t\t\tif (resp.status === 200) {\n\t\t\t\t\tresolve(true)\n\t\t\t\t} {\n\t\t\t\t\tresolve(false)\n\t\t\t\t}\n\t\t\t}, (err) => {\n\t\t\t\tLogger.error(err.message)\n\t\t\t\tresolve(false)\n\t\t\t})\n\t})\n}\n\nlet authAttempts = 0\nlet connAttempts = 0\nlet dialogShown = false\nlet curSocket = \"\"\n\nexport function connect(dev: boolean): Promise<void> {\n\tlet socketId = MiscUtils.uuid()\n\tcurSocket = socketId\n\n\treturn new Promise<void>(async (resolve, reject) => {\n\t\tlet token: string\n\t\ttry {\n\t\t\ttoken = await getAuthToken()\n\t\t} catch(err) {\n\t\t\ttoken = \"\"\n\t\t}\n\n\t\tif (!token) {\n\t\t\tif (authAttempts > 10) {\n\t\t\t\tif (!dialogShown) {\n\t\t\t\t\tdialogShown = true\n\t\t\t\t\telectron.dialog.showMessageBox(null, {\n\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\tbuttons: [\"Retry\", \"Exit\"],\n\t\t\t\t\t\ttitle: \"Pritunl - Service Error (6729\",\n\t\t\t\t\t\tmessage: \"Unable to authenticate communication with \" +\n\t\t\t\t\t\t\t\"background service, try restarting computer\",\n\t\t\t\t\t}).then(function(evt) {\n\t\t\t\t\t\tif (evt.response == 0) {\n\t\t\t\t\t\t\tauthAttempts = 0\n\t\t\t\t\t\t\tconnAttempts = 0\n\t\t\t\t\t\t\tdialogShown = false\n\t\t\t\t\t\t\tconnect(dev)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\telectron.app.quit()\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tauthAttempts += 1\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconnect(dev)\n\t\t\t\t}, 500)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\n\t\tresolve()\n\n\t\tlet reconnected = false\n\t\tlet wsHost = \"\"\n\t\tlet headers = {\n\t\t\t\"User-Agent\": \"pritunl\",\n\t\t\t\"Auth-Token\": token,\n\t\t} as any\n\n\t\tif (unix) {\n\t\t\twsHost = unixWsHost\n\t\t\theaders[\"Host\"] = \"unix\"\n\t\t} else {\n\t\t\twsHost = webWsHost\n\t\t}\n\n\t\tlet reconnect = (): void => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (reconnected) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treconnected = true\n\n\t\t\t\tif (connAttempts > 10) {\n\t\t\t\t\tif (!dialogShown) {\n\t\t\t\t\t\tdialogShown = true\n\t\t\t\t\t\telectron.dialog.showMessageBox(null, {\n\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\tbuttons: [\"Retry\", \"Exit\"],\n\t\t\t\t\t\t\ttitle: \"Pritunl - Service Error (8362)\",\n\t\t\t\t\t\t\tmessage: \"Unable to establish communication with \" +\n\t\t\t\t\t\t\t\t\"background service, try restarting computer\",\n\t\t\t\t\t\t}).then(function (evt) {\n\t\t\t\t\t\t\tif (evt.response == 0) {\n\t\t\t\t\t\t\t\tauthAttempts = 0\n\t\t\t\t\t\t\t\tconnAttempts = 0\n\t\t\t\t\t\t\t\tdialogShown = false\n\t\t\t\t\t\t\t\tconnect(dev)\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telectron.app.quit()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconnAttempts += 1\n\t\t\t\t}\n\t\t\t\tconnect(dev)\n\t\t\t}, 1000)\n\t\t}\n\n\t\tsocket = new WebSocket(wsHost + \"/events\", {\n\t\t\theaders: headers,\n\t\t})\n\n\t\tsocket.on(\"open\", (): void => {\n\t\t\tif (socketId !== curSocket) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconnAttempts = 0\n\t\t\tif (showConnect) {\n\t\t\t\tshowConnect = false\n\t\t\t\tconsole.log(\"Events: Service reconnected\")\n\t\t\t}\n\t\t})\n\n\t\tsocket.on(\"error\", (err: Error) => {\n\t\t\tif (socketId !== curSocket) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconsole.error(\"Events: Socket error \" + err)\n\t\t\tshowConnect = true\n\t\t\treconnect()\n\t\t})\n\n\t\tsocket.on(\"onerror\", (err) => {\n\t\t\tif (socketId !== curSocket) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconsole.error(\"Events: Socket error \" + err)\n\t\t\tshowConnect = true\n\t\t\treconnect()\n\t\t})\n\n\t\tsocket.on(\"close\", () => {\n\t\t\tif (socketId !== curSocket) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tshowConnect = true\n\t\t\treconnect()\n\t\t})\n\n\t\tsocket.on(\"message\", (dataBuf: Buffer): void => {\n\t\t\tif (socketId !== curSocket) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlet data = JSON.parse(dataBuf.toString())\n\t\t\tfor (let callback of callbacks) {\n\t\t\t\tcallback(data as Event)\n\t\t\t}\n\t\t})\n\t})\n}\n\nexport function send(msg: string) {\n\tif (socket) {\n\t\tsocket.send(msg)\n\t}\n}\n\nexport function subscribe(callback: Callback) {\n\tcallbacks.push(callback)\n}\n","/// <reference path=\"../References.d.ts\"/>\nimport * as Errors from \"../Errors\"\nimport fs from \"fs\";\nimport tar from \"tar\";\nimport childProcess from \"child_process\";\nimport electron from \"electron\";\n\nexport function uuid(): string {\n\treturn (+new Date() + Math.floor(Math.random() * 999999)).toString(36);\n}\n\nexport function uuidRand(): string {\n\tlet id = \"\"\n\n\tfor (let i = 0; i < 4; i++) {\n\t\tid += Math.floor((1 + Math.random()) * 0x10000).toString(\n\t\t\t16).substring(1);\n\t}\n\n\treturn id;\n}\n\nexport function nonce(): string {\n\tlet nonce = ''\n\n\tfor (let i = 0; i < 8; i++) {\n\t\tnonce += Math.floor((1 + Math.random()) * 0x10000).toString(\n\t\t\t16).substring(1)\n\t}\n\n\treturn nonce\n}\n\nexport function shuffle(n: any[]): any[] {\n\tlet i = n.length, j\n\twhile (i != 0) {\n\t\tj = Math.floor(Math.random() * i)\n\t\ti--\n\t\t[n[i], n[j]] = [n[j], n[i]]\n\t}\n\treturn n\n}\n\nexport function objectIdNil(objId: string): boolean {\n\treturn !objId || objId == '000000000000000000000000';\n}\n\nexport function zeroPad(num: number, width: number): string {\n\tif (num < Math.pow(10, width)) {\n\t\treturn ('0'.repeat(width - 1) + num).slice(-width);\n\t}\n\treturn num.toString();\n}\n\nexport function capitalize(str: string): string {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function formatAmount(amount: number): string {\n\tif (!amount) {\n\t\treturn '-';\n\t}\n\treturn '$' + (amount / 100).toFixed(2);\n}\n\nexport function formatDate(dateData: any): string {\n\tif (!dateData || dateData === '0001-01-01T00:00:00Z') {\n\t\treturn '';\n\t}\n\n\tlet date: Date;\n\tif (dateData instanceof String) {\n\t\tdate = new Date(dateData as string);\n\t} else {\n\t\tdate = new Date(0)\n\t\tdate.setUTCSeconds(dateData as number)\n\t}\n\n\tlet str = '';\n\n\tlet hours = date.getHours();\n\tlet period = 'AM';\n\n\tif (hours > 12) {\n\t\tperiod = 'PM';\n\t\thours -= 12;\n\t} else if (hours === 0) {\n\t\thours = 12;\n\t}\n\n\tlet day;\n\tswitch (date.getDay()) {\n\t\tcase 0:\n\t\t\tday = 'Sun';\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tday = 'Mon';\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tday = 'Tue';\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tday = 'Wed';\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tday = 'Thu';\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\tday = 'Fri';\n\t\t\tbreak;\n\t\tcase 6:\n\t\t\tday = 'Sat';\n\t\t\tbreak;\n\t}\n\n\tlet month;\n\tswitch (date.getMonth()) {\n\t\tcase 0:\n\t\t\tmonth = 'Jan';\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tmonth = 'Feb';\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tmonth = 'Mar';\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tmonth = 'Apr';\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tmonth = 'May';\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\tmonth = 'Jun';\n\t\t\tbreak;\n\t\tcase 6:\n\t\t\tmonth = 'Jul';\n\t\t\tbreak;\n\t\tcase 7:\n\t\t\tmonth = 'Aug';\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\tmonth = 'Sep';\n\t\t\tbreak;\n\t\tcase 9:\n\t\t\tmonth = 'Oct';\n\t\t\tbreak;\n\t\tcase 10:\n\t\t\tmonth = 'Nov';\n\t\t\tbreak;\n\t\tcase 11:\n\t\t\tmonth = 'Dec';\n\t\t\tbreak;\n\t}\n\n\tstr += day + ' ';\n\tstr += date.getDate() + ' ';\n\tstr += month + ' ';\n\tstr += date.getFullYear() + ', ';\n\tstr += hours + ':';\n\tstr += zeroPad(date.getMinutes(), 2) + ':';\n\tstr += zeroPad(date.getSeconds(), 2) + ' ';\n\tstr += period;\n\n\treturn str;\n}\n\nexport function formatDateLess(dateData: any): string {\n\tif (!dateData || dateData === '0001-01-01T00:00:00Z') {\n\t\treturn '';\n\t}\n\n\tlet date: Date;\n\tif (dateData instanceof String) {\n\t\tdate = new Date(dateData as string);\n\t} else {\n\t\tdate = new Date(0)\n\t\tdate.setUTCSeconds(dateData as number)\n\t}\n\n\tlet str = '';\n\n\tlet hours = date.getHours();\n\tlet period = 'AM';\n\n\tif (hours > 12) {\n\t\tperiod = 'PM';\n\t\thours -= 12;\n\t} else if (hours === 0) {\n\t\thours = 12;\n\t}\n\n\tlet month;\n\tswitch (date.getMonth()) {\n\t\tcase 0:\n\t\t\tmonth = 'Jan';\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tmonth = 'Feb';\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tmonth = 'Mar';\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tmonth = 'Apr';\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tmonth = 'May';\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\tmonth = 'Jun';\n\t\t\tbreak;\n\t\tcase 6:\n\t\t\tmonth = 'Jul';\n\t\t\tbreak;\n\t\tcase 7:\n\t\t\tmonth = 'Aug';\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\tmonth = 'Sep';\n\t\t\tbreak;\n\t\tcase 9:\n\t\t\tmonth = 'Oct';\n\t\t\tbreak;\n\t\tcase 10:\n\t\t\tmonth = 'Nov';\n\t\t\tbreak;\n\t\tcase 11:\n\t\t\tmonth = 'Dec';\n\t\t\tbreak;\n\t}\n\n\tstr += month + ' ';\n\tstr += date.getDate() + ' ';\n\tstr += date.getFullYear() + ', ';\n\tstr += hours + ':';\n\tstr += zeroPad(date.getMinutes(), 2);\n\tstr += period;\n\n\treturn str;\n}\n\nexport function formatDateShort(dateData: any): string {\n\tif (!dateData || dateData === '0001-01-01T00:00:00Z') {\n\t\treturn '';\n\t}\n\n\tlet date: Date\n\tif (dateData instanceof String) {\n\t\tdate = new Date(dateData as string)\n\t} else {\n\t\tdate = new Date(0)\n\t\tdate.setUTCSeconds(dateData as number)\n\t}\n\n\tlet curDate = new Date();\n\n\tlet month;\n\tswitch (date.getMonth()) {\n\t\tcase 0:\n\t\t\tmonth = 'Jan';\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tmonth = 'Feb';\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tmonth = 'Mar';\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tmonth = 'Apr';\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tmonth = 'May';\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\tmonth = 'Jun';\n\t\t\tbreak;\n\t\tcase 6:\n\t\t\tmonth = 'Jul';\n\t\t\tbreak;\n\t\tcase 7:\n\t\t\tmonth = 'Aug';\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\tmonth = 'Sep';\n\t\t\tbreak;\n\t\tcase 9:\n\t\t\tmonth = 'Oct';\n\t\t\tbreak;\n\t\tcase 10:\n\t\t\tmonth = 'Nov';\n\t\t\tbreak;\n\t\tcase 11:\n\t\t\tmonth = 'Dec';\n\t\t\tbreak;\n\t}\n\n\tlet str = month + ' ' + date.getDate();\n\n\tif (date.getFullYear() !== curDate.getFullYear()) {\n\t\tstr += ' ' + date.getFullYear();\n\t}\n\n\treturn str;\n}\n\nexport function formatDateShortTime(dateData: any): string {\n\tif (!dateData || dateData === '0001-01-01T00:00:00Z') {\n\t\treturn '';\n\t}\n\n\tlet date: Date\n\tif (dateData instanceof String) {\n\t\tdate = new Date(dateData as string)\n\t} else {\n\t\tdate = new Date(0)\n\t\tdate.setUTCSeconds(dateData as number)\n\t}\n\n\tlet curDate = new Date();\n\n\tlet month;\n\tswitch (date.getMonth()) {\n\t\tcase 0:\n\t\t\tmonth = 'Jan';\n\t\t\tbreak;\n\t\tcase 1:\n\t\t\tmonth = 'Feb';\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tmonth = 'Mar';\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tmonth = 'Apr';\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tmonth = 'May';\n\t\t\tbreak;\n\t\tcase 5:\n\t\t\tmonth = 'Jun';\n\t\t\tbreak;\n\t\tcase 6:\n\t\t\tmonth = 'Jul';\n\t\t\tbreak;\n\t\tcase 7:\n\t\t\tmonth = 'Aug';\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\tmonth = 'Sep';\n\t\t\tbreak;\n\t\tcase 9:\n\t\t\tmonth = 'Oct';\n\t\t\tbreak;\n\t\tcase 10:\n\t\t\tmonth = 'Nov';\n\t\t\tbreak;\n\t\tcase 11:\n\t\t\tmonth = 'Dec';\n\t\t\tbreak;\n\t}\n\n\tlet str = month + ' ' + date.getDate();\n\n\tif (date.getFullYear() !== curDate.getFullYear()) {\n\t\tstr += ' ' + date.getFullYear();\n\t} else if (date.getMonth() === curDate.getMonth() &&\n\t\t\tdate.getDate() === curDate.getDate()) {\n\t\tlet hours = date.getHours();\n\t\tlet period = 'AM';\n\n\t\tif (hours > 12) {\n\t\t\tperiod = 'PM';\n\t\t\thours -= 12;\n\t\t} else if (hours === 0) {\n\t\t\thours = 12;\n\t\t}\n\n\t\tstr = hours + ':';\n\t\tstr += zeroPad(date.getMinutes(), 2) + ':';\n\t\tstr += zeroPad(date.getSeconds(), 2) + ' ';\n\t\tstr += period;\n\t}\n\n\treturn str;\n}\n\nexport interface ExecOutput {\n\tstdout: string\n\tstderr: string\n\terror: Errors.ExecError\n}\n\nexport function exec(path: string,\n\t...args: string[]): Promise<ExecOutput> {\n\n\treturn new Promise<ExecOutput>((resolve): void => {\n\t\tchildProcess.execFile(path, args, (err, stdout, stderr) => {\n\t\t\tif (err) {\n\t\t\t\terr = new Errors.ExecError(err, \"Utils: Exec error\",\n\t\t\t\t\t{path: path, args: args, stdout: stdout, stderr: stderr});\n\t\t\t}\n\n\t\t\tresolve({\n\t\t\t\tstdout: stdout,\n\t\t\t\tstderr: stderr,\n\t\t\t\terror: err,\n\t\t\t} as ExecOutput)\n\t\t})\n\t})\n}\n\nexport function fileExists(path: string): Promise<boolean> {\n\treturn new Promise<boolean>((resolve): void => {\n\t\tfs.stat(path, (err: Error, stat) => {\n\t\t\tif (!err) {\n\t\t\t\tresolve(true)\n\t\t\t}\telse {\n\t\t\t\tresolve(false)\n\t\t\t}\n\t\t})\n\t})\n}\n\nexport function fileSize(path: string): Promise<number> {\n\treturn new Promise<number>((resolve): void => {\n\t\tfs.stat(path, (err: Error, stat) => {\n\t\t\tif (err || !stat) {\n\t\t\t\tresolve(0)\n\t\t\t}\n\t\t\tresolve(stat.size || 0)\n\t\t})\n\t})\n}\n\nexport function fileDelete(path: string): Promise<void> {\n\treturn new Promise<void>((resolve, reject): void => {\n\t\tfs.exists(path, (exists: boolean): void => {\n\t\t\tif (!exists) {\n\t\t\t\tresolve()\n\t\t\t\treturn\n\t\t\t}\n\t\t\tfs.unlink(path, (err) => {\n\t\t\t\tif (err) {\n\t\t\t\t\terr = new Errors.WriteError(err, \"Utils: Failed to delete file\",\n\t\t\t\t\t\t{path: path});\n\t\t\t\t\treject(err)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tresolve()\n\t\t\t})\n\t\t})\n\t})\n}\n\nexport function fileRead(path: string): Promise<string> {\n\treturn new Promise<string>((resolve, reject): void => {\n\t\tfs.readFile(\n\t\t\tpath, \"utf-8\",\n\t\t\t(err: NodeJS.ErrnoException, data: string): void => {\n\t\t\t\tif (err) {\n\t\t\t\t\terr = new Errors.ReadError(err, \"Utils: Failed to read file\",\n\t\t\t\t\t\t{path: path});\n\t\t\t\t\treject(err)\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\tresolve(data)\n\t\t\t},\n\t\t)\n\t})\n}\n\nexport function fileWrite(path: string, data: string): Promise<void> {\n\treturn new Promise<void>((resolve, reject): void => {\n\t\tfs.writeFile(\n\t\t\tpath, data,\n\t\t\t(err: NodeJS.ErrnoException): void => {\n\t\t\t\tif (err) {\n\t\t\t\t\terr = new Errors.WriteError(err, \"Utils: Failed to write file\",\n\t\t\t\t\t\t{path: path});\n\t\t\t\t\treject(err)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tresolve()\n\t\t\t},\n\t\t)\n\t})\n}\n\nexport function encryptString(decData: string): Promise<string> {\n\treturn new Promise<string>((resolve, reject): void => {\n\t\ttry {\n\t\t\tlet evt = electron.ipcRenderer.invoke(\"processing\", \"encrypt\", decData)\n\n\t\t\tevt.then((resp: [Error, string]) => {\n\t\t\t\tif (!resp) {\n\t\t\t\t\tlet err = new Errors.ParseError(\n\t\t\t\t\t\tnull, \"Utils: Failed to encrypt string e1\");\n\t\t\t\t\treject(err)\n\t\t\t\t} else if (resp[0]) {\n\t\t\t\t\tlet err = new Errors.ParseError(\n\t\t\t\t\t\tresp[0], \"Utils: Failed to encrypt string e2\");\n\t\t\t\t\treject(err)\n\t\t\t\t} else {\n\t\t\t\t\tresolve(resp[1])\n\t\t\t\t}\n\t\t\t}).catch((err) => {\n\t\t\t\terr = new Errors.ParseError(\n\t\t\t\t\terr, \"Utils: Failed to encrypt string e3\");\n\t\t\t\treject(err)\n\t\t\t})\n\t\t} catch (err) {\n\t\t\terr = new Errors.ParseError(\n\t\t\t\terr, \"Utils: Failed to encrypt string e4\");\n\t\t\treject(err)\n\t\t}\n\t})\n}\n\nexport function decryptString(encData: string): Promise<string> {\n\treturn new Promise<string>((resolve, reject): void => {\n\t\ttry {\n\t\t\tlet evt = electron.ipcRenderer.invoke(\"processing\", \"decrypt\", encData)\n\n\t\t\tevt.then((resp: [Error, string]) => {\n\t\t\t\tif (!resp) {\n\t\t\t\t\tlet err = new Errors.ParseError(\n\t\t\t\t\t\tnull, \"Utils: Failed to decrypt string e1\");\n\t\t\t\t\treject(err)\n\t\t\t\t} else if (resp[0]) {\n\t\t\t\t\tlet err = new Errors.ParseError(\n\t\t\t\t\t\tresp[0], \"Utils: Failed to decrypt string e2\");\n\t\t\t\t\treject(err)\n\t\t\t\t} else {\n\t\t\t\t\tresolve(resp[1])\n\t\t\t\t}\n\t\t\t}).catch((err) => {\n\t\t\t\terr = new Errors.ParseError(\n\t\t\t\t\terr, \"Utils: Failed to decrypt string e3\");\n\t\t\t\treject(err)\n\t\t\t})\n\t\t} catch (err) {\n\t\t\terr = new Errors.ParseError(\n\t\t\t\terr, \"Utils: Failed to decrypt string e4\");\n\t\t\treject(err)\n\t\t}\n\t})\n}\n\nexport interface TarData {\n\tpath: string\n\tdata: string\n}\n\nexport function tarRead(path: string): Promise<TarData[]> {\n\treturn new Promise<TarData[]>((resolve, reject): void => {\n\t\ttry {\n\t\t\tlet files: TarData[] = []\n\t\t\tlet parser = new tar.Parse()\n\n\t\t\tfs.createReadStream(path)\n\t\t\t\t.pipe(parser)\n\t\t\t\t.on(\"entry\", (entry) => {\n\t\t\t\t\tlet data = \"\"\n\n\t\t\t\t\tentry.on(\"data\", (content) => {\n\t\t\t\t\t\tdata += content.toString()\n\t\t\t\t\t})\n\t\t\t\t\tentry.on(\"end\", () => {\n\t\t\t\t\t\tfiles.push({\n\t\t\t\t\t\t\tpath: entry.path,\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.on(\"end\", () => {\n\t\t\t\t\tresolve(files)\n\t\t\t\t})\n\t\t} catch(err) {\n\t\t\terr = new Errors.ReadError(err, \"Utils: Failed to read tar file\",\n\t\t\t\t{path: path});\n\t\t\treject(err)\n\t\t}\n\t})\n}\n","import fs from \"fs\"\nimport path from \"path\"\nimport electron from \"electron\"\nimport * as Errors from \"./Errors\"\nimport * as Logger from \"./Logger\"\n\nclass ConfigData {\n\twindow_width = 0\n\twindow_height = 0\n\tdisable_tray_icon = false\n\tclassic_interface = false\n\tframeless: boolean = null\n\ttheme = \"dark\"\n\n\t_load(data: {[key: string]: any}): void {\n\t\tif (data[\"disable_tray_icon\"] !== undefined) {\n\t\t\tthis.disable_tray_icon = data[\"disable_tray_icon\"]\n\t\t}\n\t\tif (data[\"classic_interface\"] !== undefined) {\n\t\t\tthis.classic_interface = data[\"classic_interface\"]\n\t\t}\n\t\tif (data[\"theme\"] !== undefined) {\n\t\t\tthis.theme = data[\"theme\"]\n\t\t}\n\t\tif (data[\"window_width\"] !== undefined) {\n\t\t\tthis.window_width = data[\"window_width\"]\n\t\t}\n\t\tif (data[\"window_height\"] !== undefined) {\n\t\t\tthis.window_height = data[\"window_height\"]\n\t\t}\n\t\tif (data[\"frameless\"] !== undefined) {\n\t\t\tthis.frameless = data[\"frameless\"]\n\t\t}\n\t}\n\n\tpath(): string {\n\t\treturn path.join(electron.app.getPath(\"userData\"), \"pritunl.json\")\n\t}\n\n\tload(): Promise<void> {\n\t\treturn new Promise<void>((resolve): void => {\n\t\t\tfs.readFile(\n\t\t\t\tthis.path(), \"utf-8\",\n\t\t\t\t(err: NodeJS.ErrnoException, data: string): void => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tif (err.code !== \"ENOENT\") {\n\t\t\t\t\t\t\terr = new Errors.ReadError(err, \"Config: Read error\")\n\t\t\t\t\t\t\tLogger.error(err.message)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tlet configData: any = {}\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconfigData = JSON.parse(data)\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\terr = new Errors.ReadError(err, \"Config: Parse error\")\n\t\t\t\t\t\t\tLogger.error(err.message)\n\n\t\t\t\t\t\t\tconfigData = {}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._load(configData)\n\n\t\t\t\t\tresolve()\n\t\t\t\t},\n\t\t\t)\n\t\t})\n\t}\n\n\tsave(opts: {[key: string]: any}): Promise<void> {\n\t\tlet data = {\n\t\t\tdisable_tray_icon: opts[\"disable_tray_icon\"],\n\t\t\tclassic_interface: opts[\"classic_interface\"],\n\t\t\twindow_width: opts[\"window_width\"],\n\t\t\twindow_height: opts[\"window_height\"],\n\t\t\tframeless: opts[\"frameless\"],\n\t\t\ttheme: opts[\"theme\"],\n\t\t}\n\n\t\treturn new Promise<void>((resolve, reject): void => {\n\t\t\tthis.load().then((): void => {\n\t\t\t\tif (data.disable_tray_icon === undefined) {\n\t\t\t\t\tdata.disable_tray_icon = this.disable_tray_icon\n\t\t\t\t}\n\t\t\t\tif (data.classic_interface === undefined) {\n\t\t\t\t\tdata.classic_interface = this.classic_interface\n\t\t\t\t}\n\t\t\t\tif (data.window_width === undefined) {\n\t\t\t\t\tdata.window_width = this.window_width\n\t\t\t\t}\n\t\t\t\tif (data.theme === undefined) {\n\t\t\t\t\tdata.theme = this.theme\n\t\t\t\t}\n\t\t\t\tif (data.frameless === undefined) {\n\t\t\t\t\tdata.frameless = this.frameless\n\t\t\t\t}\n\n\t\t\t\tthis._load(data)\n\n\t\t\t\tfs.writeFile(\n\t\t\t\t\tthis.path(), JSON.stringify(data),\n\t\t\t\t\t(err: NodeJS.ErrnoException): void => {\n\t\t\t\t\t\tif (err) {\n\t\t\t\t\t\t\terr = new Errors.ReadError(err, \"Config: Write error\")\n\t\t\t\t\t\t\tLogger.error(err.message)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t})\n\t\t})\n\t}\n}\n\nconst Config = new ConfigData()\nexport default Config\n","import process from \"process\"\nimport path from \"path\"\nimport fs from \"fs\"\nimport childprocess from \"child_process\"\nimport electron from \"electron\"\nimport * as Utils from \"./Utils\";\nimport * as Service from \"./Service\"\nimport Config from \"./Config\"\nimport * as Errors from \"../app/Errors\";\n\nlet tray: electron.Tray\nlet awaken: boolean\nlet ready: boolean\nlet readyError: string\nlet main: Main\nlet windowSize: number[];\n\nif (electron.app.dock) {\n\telectron.app.dock.hide()\n}\n\nprocess.on(\"uncaughtException\", function (error) {\n\tlet errorMsg: string\n\tif (error && error.stack) {\n\t\terrorMsg = error.stack\n\t} else {\n\t\terrorMsg = String(error)\n\t}\n\n\tif (!ready) {\n\t\treadyError = errorMsg\n\t\treturn\n\t}\n\n\telectron.dialog.showMessageBox(null, {\n\t\ttype: \"error\",\n\t\tbuttons: [\"Exit\"],\n\t\ttitle: \"Pritunl Client - Process Error\",\n\t\tmessage: \"Error occured in main process:\\n\\n\" + errorMsg,\n\t}).then(function() {\n\t\telectron.app.quit()\n\t})\n})\n\nprocess.on(\"unhandledRejection\", function (error) {\n\tlet errorMsg: string = String(error)\n\n\tif (!ready) {\n\t\treadyError = errorMsg\n\t\treturn\n\t}\n\n\telectron.dialog.showMessageBox(null, {\n\t\ttype: \"error\",\n\t\tbuttons: [\"Exit\"],\n\t\ttitle: \"Pritunl Client - Process Error\",\n\t\tmessage: \"Error occured in main process:\\n\\n\" + errorMsg,\n\t}).then(function() {\n\t\telectron.app.quit()\n\t})\n})\n\nelectron.ipcMain.handle(\n\t\"processing\",\n\t(evt: electron.IpcMainEvent, msg: string, data: string) => {\n\t\tif (msg === \"encrypt\") {\n\t\t\tlet encData = electron.safeStorage.encryptString(\n\t\t\t\tdata).toString(\"base64\")\n\t\t\treturn [null, encData]\n\t\t} else if (msg === \"decrypt\") {\n\t\t\tlet encData = new Buffer(data, \"base64\")\n\t\t\tlet decData = electron.safeStorage.decryptString(\n\t\t\t\tencData)\n\t\t\treturn [null, decData]\n\t\t}\n\t\tlet err = new Errors.ParseError(null, \"Main: Unknown handler type\");\n\t\treturn [err, null]\n\t},\n)\n\nelectron.ipcMain.on(\n\t\"control\",\n\t(evt: electron.IpcMainEvent, msg: string, data: string) => {\n\t\tif (msg === \"service-auth-error\") {\n\t\t\telectron.dialog.showMessageBox(null, {\n\t\t\t\ttype: \"error\",\n\t\t\t\tbuttons: [\"Exit\"],\n\t\t\t\ttitle: \"Pritunl - Service Error (4827)\",\n\t\t\t\tmessage: \"Failed to load service key. Restart \" +\n\t\t\t\t\t\"computer and verify background service is running\",\n\t\t\t}).then(function() {\n\t\t\t\telectron.app.quit()\n\t\t\t})\n\t\t} else if (msg === \"service-conn-error\") {\n\t\t\telectron.dialog.showMessageBox(null, {\n\t\t\t\ttype: \"error\",\n\t\t\t\tbuttons: [\"Exit\"],\n\t\t\t\ttitle: \"Pritunl - Service Error (2754)\",\n\t\t\t\tmessage: \"Unable to establish communication with \" +\n\t\t\t\t\t\"background service, try restarting computer\",\n\t\t\t}).then(function() {\n\t\t\t\telectron.app.quit()\n\t\t\t})\n\t\t} else if (msg === \"dev-tools\") {\n\t\t\tif (main && main.window) {\n\t\t\t\tmain.window.webContents.openDevTools({\n\t\t\t\t\t\"mode\": \"undocked\",\n\t\t\t\t})\n\t\t\t}\n\t\t} else if (msg === \"reload\") {\n\t\t\tif (main && main.window) {\n\t\t\t\tmain.window.reload()\n\t\t\t}\n\t\t} else if (msg === \"minimize\") {\n\t\t\tif (main && main.window) {\n\t\t\t\tmain.window.minimize()\n\t\t\t}\n\t\t} else if (msg === \"download-update\") {\n\t\t\tUtils.openLink(\"https://client.pritunl.com/#install\")\n\t\t}\n\t},\n)\n\nService.wakeup().then((awake: boolean) => {\n\tawaken = awake\n\tif (ready) {\n\t\tinit()\n\t}\n})\n\nclass Main {\n\twindow: electron.BrowserWindow\n\n\tshowWindow(): void {\n\t\tthis.window.show()\n\t}\n\n\tcreateWindow(): void {\n\t\tlet frameless = false\n\t\tlet titleBarStyle: string\n\t\tlet framelessClient = false\n\t\tlet width = 424\n\t\tlet height = 528\n\t\tlet minWidth = 405\n\t\tlet minHeight = 440\n\t\tlet maxWidth = 670\n\t\tlet maxHeight = 800\n\t\tlet classicIface = Config.classic_interface\n\n\t\tif ((process.platform === \"win32\" && !classicIface) ||\n\t\t\t(Config.frameless && !classicIface)) {\n\n\t\t\tframeless = true\n\t\t\tframelessClient = true\n\t\t\twidth = 430\n\t\t\tminWidth = 430\n\n\t\t\tif (process.platform === \"win32\") {\n\t\t\t\tframeless = false\n\t\t\t\ttitleBarStyle = \"hidden\"\n\t\t\t}\n\t\t}\n\n\t\tif (Config.window_width && Config.window_height) {\n\t\t\twidth = Config.window_width\n\t\t\tif (width < minWidth) {\n\t\t\t\twidth = minWidth\n\t\t\t}\n\t\t\theight = Config.window_height\n\t\t\tif (height < minHeight) {\n\t\t\t\theight = minHeight\n\t\t\t}\n\t\t}\n\n\t\tlet zoomFactor = 1\n\t\tif (process.platform === \"darwin\" && classicIface) {\n\t\t\tzoomFactor = 0.8\n\t\t}\n\n\t\tif (zoomFactor !== 1) {\n\t\t\twidth = Math.round(width * zoomFactor)\n\t\t\theight = Math.round(height * zoomFactor)\n\t\t\tminWidth = Math.round(minWidth * zoomFactor)\n\t\t\tminHeight = Math.round(minHeight * zoomFactor)\n\t\t\tmaxWidth = Math.round(maxWidth * zoomFactor)\n\t\t\tmaxHeight = Math.round(maxHeight * zoomFactor)\n\t\t}\n\n\t\tthis.window = new electron.BrowserWindow({\n\t\t\ttitle: \"Pritunl Client\",\n\t\t\ticon: path.join(__dirname, \"..\", \"logo.png\"),\n\t\t\ttitleBarStyle: titleBarStyle as any,\n\t\t\tframe: !frameless,\n\t\t\tautoHideMenuBar: true,\n\t\t\tfullscreen: false,\n\t\t\tshow: false,\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tminWidth: minWidth,\n\t\t\tminHeight: minHeight,\n\t\t\tmaxWidth: maxWidth,\n\t\t\tmaxHeight: maxHeight,\n\t\t\tbackgroundColor: \"#151719\",\n\t\t\twebPreferences: {\n\t\t\t\tzoomFactor: zoomFactor,\n\t\t\t\tdevTools: true,\n\t\t\t\tnodeIntegration: true,\n\t\t\t\tcontextIsolation: false,\n\t\t\t}\n\t\t})\n\n\t\tthis.window.on(\"close\", (): void => {\n\t\t\ttry {\n\t\t\t\twindowSize = this.window.getSize()\n\t\t\t} catch {}\n\t\t})\n\n\t\tthis.window.on(\"closed\", async (): Promise<void> => {\n\t\t\tmain = null\n\t\t})\n\n\t\tlet shown = false\n\t\tthis.window.on(\"ready-to-show\", (): void => {\n\t\t\tif (shown) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tshown = true\n\t\t\tthis.window.show()\n\n\t\t\tif (process.argv.indexOf(\"--dev-tools\") !== -1) {\n\t\t\t\tthis.window.webContents.openDevTools({\n\t\t\t\t\t\"mode\": \"undocked\",\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t\tsetTimeout((): void => {\n\t\t\tif (shown) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tshown = true\n\t\t\tthis.window.show()\n\n\t\t\tif (process.argv.indexOf(\"--dev-tools\") !== -1) {\n\t\t\t\tthis.window.webContents.openDevTools({\n\t\t\t\t\t\"mode\": \"undocked\",\n\t\t\t\t})\n\t\t\t}\n\t\t}, 800)\n\n\t\tlet indexUrl = \"\"\n\t\tif (classicIface) {\n\t\t\tindexUrl = \"file://\" + path.join(__dirname, \"..\",\n\t\t\t\t\"index_orig.html\")\n\t\t} else {\n\t\t\tindexUrl = \"file://\" + path.join(__dirname, \"..\",\n\t\t\t\t\"index.html\")\n\t\t}\n\t\tindexUrl += \"?dev=\" + (process.argv.indexOf(\"--dev\") !== -1 ?\n\t\t\t\"true\" : \"false\")\n\t\tindexUrl += \"&dataPath=\" + encodeURIComponent(\n\t\t\telectron.app.getPath(\"userData\"))\n\t\tindexUrl += \"&frameless=\" + (framelessClient ? \"true\" : \"false\")\n\n\t\tthis.window.loadURL(indexUrl, {\n\t\t\tuserAgent: \"pritunl\",\n\t\t})\n\n\t\tif (electron.app.dock) {\n\t\t\telectron.app.dock.show()\n\t\t}\n\t}\n\n\trun(): void {\n\t\tif (main) {\n\t\t\tmain.showWindow()\n\t\t\treturn\n\t\t}\n\n\t\tthis.createWindow()\n\t\tmain = this\n\t}\n}\n\nfunction initTray() {\n\ttray = new electron.Tray(getTrayIcon(false))\n\n\ttray.on(\"click\", function() {\n\t\tlet main = new Main()\n\t\tmain.run()\n\t})\n\ttray.on(\"double-click\", function() {\n\t\tlet main = new Main()\n\t\tmain.run()\n\t})\n\n\tlet trayMenu = electron.Menu.buildFromTemplate([\n\t\t{\n\t\t\tlabel: \"Open Pritunl Client\",\n\t\t\tclick: function () {\n\t\t\t\tlet main = new Main()\n\t\t\t\tmain.run()\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\tlabel: \"Exit\",\n\t\t\tclick: function() {\n\t\t\t\telectron.app.quit()\n\t\t\t}\n\t\t}\n\t])\n\n\ttray.setToolTip(\"Pritunl Client\")\n\ttray.setContextMenu(trayMenu)\n\n\tService.sync().then((status: boolean): void => {\n\t\ttray.setImage(getTrayIcon(status))\n\t})\n}\n\nfunction initAppMenu() {\n\tlet appMenu = electron.Menu.buildFromTemplate([\n\t\t{\n\t\t\tlabel: \"Pritunl\",\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Pritunl Client\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Close\",\n\t\t\t\t\taccelerator: \"CmdOrCtrl+Q\",\n\t\t\t\t\trole: \"close\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Exit\",\n\t\t\t\t\tclick: function() {\n\t\t\t\t\t\telectron.app.quit()\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tlabel: \"Edit\",\n\t\t\tsubmenu: [\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Undo\",\n\t\t\t\t\taccelerator: \"CmdOrCtrl+Z\",\n\t\t\t\t\trole: \"undo\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Redo\",\n\t\t\t\t\taccelerator: \"Shift+CmdOrCtrl+Z\",\n\t\t\t\t\trole: \"redo\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttype: \"separator\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Cut\",\n\t\t\t\t\taccelerator: \"CmdOrCtrl+X\",\n\t\t\t\t\trole: \"cut\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Copy\",\n\t\t\t\t\taccelerator: \"CmdOrCtrl+C\",\n\t\t\t\t\trole: \"copy\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Paste\",\n\t\t\t\t\taccelerator: \"CmdOrCtrl+V\",\n\t\t\t\t\trole: \"paste\",\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: \"Select All\",\n\t\t\t\t\taccelerator: \"CmdOrCtrl+A\",\n\t\t\t\t\trole: \"selectall\",\n\t\t\t\t},\n\t\t\t],\n\t\t}\n\t] as any)\n\telectron.Menu.setApplicationMenu(appMenu)\n}\n\nfunction init() {\n\tif (awaken === undefined) {\n\t\treturn\n\t} else if (awaken) {\n\t\telectron.app.quit()\n\t\treturn\n\t}\n\n\tConfig.load().then(() => {\n\t\tService.connect(process.argv.indexOf(\"--dev\") !== -1).then(() => {\n\t\t\tif (process.argv.indexOf(\"--no-main\") !== -1) {\n\t\t\t\tif (Config.disable_tray_icon) {\n\t\t\t\t\telectron.app.quit()\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet main = new Main()\n\t\t\t\tmain.run()\n\t\t\t}\n\n\t\t\tinitAppMenu()\n\n\t\t\tif (!Config.disable_tray_icon) {\n\t\t\t\tinitTray()\n\t\t\t}\n\n\t\t\tService.subscribe((event: Service.Event): void => {\n\t\t\t\tif (event.type === \"connected\") {\n\t\t\t\t\tif (tray) {\n\t\t\t\t\t\ttray.setImage(getTrayIcon(true))\n\t\t\t\t\t}\n\t\t\t\t} else if (event.type === \"disconnected\") {\n\t\t\t\t\tif (tray) {\n\t\t\t\t\t\ttray.setImage(getTrayIcon(false))\n\t\t\t\t\t}\n\t\t\t\t} else if (event.type === \"wakeup\") {\n\t\t\t\t\tService.send(\"awake\")\n\n\t\t\t\t\tlet main = new Main()\n\t\t\t\t\tmain.run()\n\t\t\t\t} else if (event.type === \"sso_auth\") {\n\t\t\t\t\t//Utils.openLink(event.data.url)\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\t})\n}\n\nfunction getTrayIcon(state: boolean): string {\n\tlet connTray = \"\"\n\tlet disconnTray = \"\"\n\n\tif (process.platform === \"darwin\") {\n\t\tconnTray = path.join(__dirname, \"..\", \"img\",\n\t\t\t\"tray_connected_osxTemplate.png\")\n\t\tdisconnTray = path.join(__dirname, \"..\", \"img\",\n\t\t\t\"tray_disconnected_osxTemplate.png\")\n\t} else if (process.platform === \"win32\") {\n\t\tconnTray = path.join(__dirname, \"..\", \"img\",\n\t\t\t\"tray_connected_win.png\")\n\t\tdisconnTray = path.join(__dirname, \"..\", \"img\",\n\t\t\t\"tray_disconnected_win.png\")\n\t} else if (process.platform === \"linux\") {\n\t\tconnTray = path.join(__dirname, \"..\", \"img\",\n\t\t\t\"tray_connected_linux_light.png\")\n\t\tdisconnTray = path.join(__dirname, \"..\", \"img\",\n\t\t\t\"tray_disconnected_linux_light.png\")\n\t} else {\n\t\tconnTray = path.join(__dirname, \"..\", \"img\",\n\t\t\t\"tray_connected.png\")\n\t\tdisconnTray = path.join(__dirname, \"..\", \"img\",\n\t\t\t\"tray_disconnected.png\")\n\t}\n\n\tif (state) {\n\t\treturn connTray\n\t} else {\n\t\treturn disconnTray\n\t}\n}\n\nelectron.app.on(\"window-all-closed\", (): void => {\n\ttry {\n\t\tConfig.load().then(async (): Promise<void> => {\n\t\t\tif (windowSize && windowSize.length == 2) {\n\t\t\t\tConfig.window_width = windowSize[0]\n\t\t\t\tConfig.window_height = windowSize[1]\n\t\t\t\tawait Config.save({\n\t\t\t\t\twindow_width: Config.window_width,\n\t\t\t\t\twindow_height: Config.window_height,\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tif (Config.disable_tray_icon || !tray) {\n\t\t\t\telectron.app.quit()\n\t\t\t} else {\n\t\t\t\tif (electron.app.dock) {\n\t\t\t\t\telectron.app.dock.hide()\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t} catch (error) {\n\t\tthrow error\n\t}\n})\n\nelectron.app.on(\"open-file\", (): void => {\n\ttry {\n\t\tlet main = new Main()\n\t\tmain.run()\n\t} catch (error) {\n\t\tthrow error\n\t}\n})\n\nelectron.app.on(\"open-url\", (): void => {\n\ttry {\n\t\tlet main = new Main()\n\t\tmain.run()\n\t} catch (error) {\n\t\tthrow error\n\t}\n})\n\nelectron.app.on(\"activate\", (): void => {\n\ttry {\n\t\tlet main = new Main()\n\t\tmain.run()\n\t} catch (error) {\n\t\tthrow error\n\t}\n})\n\nelectron.app.on(\"quit\", (): void => {\n\ttry {\n\t\telectron.app.quit()\n\t} catch (error) {\n\t\tthrow error\n\t}\n})\n\nelectron.app.on(\"ready\", (): void => {\n\tlet profilesPth = path.join(electron.app.getPath(\"userData\"), \"profiles\")\n\t\tfs.exists(profilesPth, function(exists) {\n\t\tif (!exists) {\n\t\t\tfs.mkdir(profilesPth, function() {})\n\t\t}\n\t})\n\n\ttry {\n\t\tif (readyError) {\n\t\t\telectron.dialog.showMessageBox(null, {\n\t\t\t\ttype: \"error\",\n\t\t\t\tbuttons: [\"Exit\"],\n\t\t\t\ttitle: \"Pritunl Client - Process Error\",\n\t\t\t\tmessage: \"Error occured in main process:\\n\\n\" + readyError,\n\t\t\t}).then(function() {\n\t\t\t\telectron.app.quit()\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\tready = true\n\t\tinit()\n\t} catch (error) {\n\t\tthrow error\n\t}\n})\n","import electron from \"electron\"\nimport process from \"process\";\nimport childprocess from \"child_process\";\n\nexport function openLink(url: string): boolean {\n\tlet u = new URL(url)\n\n\tif (u.protocol !== \"http:\" && u.protocol !== \"https:\") {\n\t\treturn false\n\t}\n\tif (!u.hostname) {\n\t\treturn false\n\t}\n\tif (u.port && Number.isNaN(u.port)) {\n\t\treturn false\n\t}\n\n\tlet urlParsed = u.protocol + \"//\" + u.hostname\n\tif (u.port) {\n\t\turlParsed += \":\" + u.port\n\t}\n\tif (u.pathname) {\n\t\turlParsed += u.pathname\n\t}\n\tif (u.search) {\n\t\turlParsed += u.search\n\t}\n\tif (u.hash) {\n\t\turlParsed += u.hash\n\t}\n\n\tif (process.platform === \"linux\") {\n\t\tchildprocess.execFile(\n\t\t\t\"xdg-open\", [urlParsed],\n\t\t\t(err) => {\n\t\t\t\tif (err) {\n\t\t\t\t\telectron.shell.openExternal(urlParsed)\n\t\t\t\t}\n\t\t\t},\n\t\t)\n\t} else {\n\t\telectron.shell.openExternal(urlParsed)\n\t}\n\n\treturn true\n}\n"],"names":["module","exports","mask","source","output","offset","length","i","unmask","buffer","__dirname","e","fs","path","LCHOWN","lchown","LCHOWNSYNC","lchownSync","needEISDIRHandled","process","version","match","uid","gid","er","code","handleEISDIR","cb","chown","_","__","___","handleEISDirSync","chownSync","nodeVersion","readdir","options","test","cpath","chownrKid","p","child","lstat","resolve","stats","name","isDirectory","chownr","withFileTypes","children","len","errState","then","forEach","chownrSync","readdirSync","lstatSync","chownrKidSync","sync","MiniPass","EE","writev","binding","FSReqWrap","FSReqCallback","fd","iovec","pos","req","oncomplete","bw","writeBuffers","_autoClose","Symbol","_close","_ended","_fd","_finished","_flags","_flush","_handleChunk","_makeBuf","_mode","_needDrain","_onerror","_onopen","_onread","_onwrite","_open","_path","_pos","_queue","_read","_readSize","_reading","_remain","_size","_write","_writing","_defaultFlag","_errored","ReadStream","constructor","opt","super","this","readable","writable","TypeError","readSize","size","Infinity","autoClose","write","end","open","emit","Buffer","allocUnsafe","Math","min","buf","nextTick","read","br","close","ret","slice","ev","data","WriteStream","undefined","mode","start","defaultFlag","flags","enc","from","Error","push","pop","ReadStreamSync","threw","openSync","readSync","closeSync","WriteStreamSync","writeSync","proc","stdout","stderr","Stream","Yallist","SD","EOF","MAYBE_EMIT_END","EMITTED_END","EMITTING_END","EMITTED_ERROR","CLOSED","READ","FLUSH","FLUSHCHUNK","ENCODING","DECODER","FLOWING","PAUSED","RESUME","BUFFERLENGTH","BUFFERPUSH","BUFFERSHIFT","OBJECTMODE","DESTROYED","doIter","global","_MP_NO_ITERATOR_SYMBOLS_","ASYNCITERATOR","asyncIterator","ITERATOR","iterator","isEndish","Minipass","pipes","objectMode","encoding","bufferLength","lastNeed","map","chunk","setEncoding","om","Object","assign","isBuffer","b","ArrayBuffer","isView","byteOffset","byteLength","isArrayBuffer","flowing","n","Array","join","concat","head","value","once","resume","pause","destroyed","paused","shift","noDrain","pipe","dest","opts","ended","ondrain","on","addListener","fn","removeAllListeners","call","emittedEnd","removeListener","args","arguments","apply","collect","dataLength","promise","c","Promise","reject","next","res","done","onerr","ondata","onend","ondestroy","rej","destroy","static","s","realZlibConstants","ZLIB_VERNUM","freeze","create","Z_NO_FLUSH","Z_PARTIAL_FLUSH","Z_SYNC_FLUSH","Z_FULL_FLUSH","Z_FINISH","Z_BLOCK","Z_OK","Z_STREAM_END","Z_NEED_DICT","Z_ERRNO","Z_STREAM_ERROR","Z_DATA_ERROR","Z_MEM_ERROR","Z_BUF_ERROR","Z_VERSION_ERROR","Z_NO_COMPRESSION","Z_BEST_SPEED","Z_BEST_COMPRESSION","Z_DEFAULT_COMPRESSION","Z_FILTERED","Z_HUFFMAN_ONLY","Z_RLE","Z_FIXED","Z_DEFAULT_STRATEGY","DEFLATE","INFLATE","GZIP","GUNZIP","DEFLATERAW","INFLATERAW","UNZIP","BROTLI_DECODE","BROTLI_ENCODE","Z_MIN_WINDOWBITS","Z_MAX_WINDOWBITS","Z_DEFAULT_WINDOWBITS","Z_MIN_CHUNK","Z_MAX_CHUNK","Z_DEFAULT_CHUNK","Z_MIN_MEMLEVEL","Z_MAX_MEMLEVEL","Z_DEFAULT_MEMLEVEL","Z_MIN_LEVEL","Z_MAX_LEVEL","Z_DEFAULT_LEVEL","BROTLI_OPERATION_PROCESS","BROTLI_OPERATION_FLUSH","BROTLI_OPERATION_FINISH","BROTLI_OPERATION_EMIT_METADATA","BROTLI_MODE_GENERIC","BROTLI_MODE_TEXT","BROTLI_MODE_FONT","BROTLI_DEFAULT_MODE","BROTLI_MIN_QUALITY","BROTLI_MAX_QUALITY","BROTLI_DEFAULT_QUALITY","BROTLI_MIN_WINDOW_BITS","BROTLI_MAX_WINDOW_BITS","BROTLI_LARGE_MAX_WINDOW_BITS","BROTLI_DEFAULT_WINDOW","BROTLI_MIN_INPUT_BLOCK_BITS","BROTLI_MAX_INPUT_BLOCK_BITS","BROTLI_PARAM_MODE","BROTLI_PARAM_QUALITY","BROTLI_PARAM_LGWIN","BROTLI_PARAM_LGBLOCK","BROTLI_PARAM_DISABLE_LITERAL_CONTEXT_MODELING","BROTLI_PARAM_SIZE_HINT","BROTLI_PARAM_LARGE_WINDOW","BROTLI_PARAM_NPOSTFIX","BROTLI_PARAM_NDIRECT","BROTLI_DECODER_RESULT_ERROR","BROTLI_DECODER_RESULT_SUCCESS","BROTLI_DECODER_RESULT_NEEDS_MORE_INPUT","BROTLI_DECODER_RESULT_NEEDS_MORE_OUTPUT","BROTLI_DECODER_PARAM_DISABLE_RING_BUFFER_REALLOCATION","BROTLI_DECODER_PARAM_LARGE_WINDOW","BROTLI_DECODER_NO_ERROR","BROTLI_DECODER_SUCCESS","BROTLI_DECODER_NEEDS_MORE_INPUT","BROTLI_DECODER_NEEDS_MORE_OUTPUT","BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_NIBBLE","BROTLI_DECODER_ERROR_FORMAT_RESERVED","BROTLI_DECODER_ERROR_FORMAT_EXUBERANT_META_NIBBLE","BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_ALPHABET","BROTLI_DECODER_ERROR_FORMAT_SIMPLE_HUFFMAN_SAME","BROTLI_DECODER_ERROR_FORMAT_CL_SPACE","BROTLI_DECODER_ERROR_FORMAT_HUFFMAN_SPACE","BROTLI_DECODER_ERROR_FORMAT_CONTEXT_MAP_REPEAT","BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_1","BROTLI_DECODER_ERROR_FORMAT_BLOCK_LENGTH_2","BROTLI_DECODER_ERROR_FORMAT_TRANSFORM","BROTLI_DECODER_ERROR_FORMAT_DICTIONARY","BROTLI_DECODER_ERROR_FORMAT_WINDOW_BITS","BROTLI_DECODER_ERROR_FORMAT_PADDING_1","BROTLI_DECODER_ERROR_FORMAT_PADDING_2","BROTLI_DECODER_ERROR_FORMAT_DISTANCE","BROTLI_DECODER_ERROR_DICTIONARY_NOT_SET","BROTLI_DECODER_ERROR_INVALID_ARGUMENTS","BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MODES","BROTLI_DECODER_ERROR_ALLOC_TREE_GROUPS","BROTLI_DECODER_ERROR_ALLOC_CONTEXT_MAP","BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_1","BROTLI_DECODER_ERROR_ALLOC_RING_BUFFER_2","BROTLI_DECODER_ERROR_ALLOC_BLOCK_TYPE_TREES","BROTLI_DECODER_ERROR_UNREACHABLE","assert","realZlib","constants","OriginalBufferConcat","_superWrite","ZlibError","err","message","errno","captureStackTrace","_opts","_flushFlag","_finishFlushFlag","_fullFlushFlag","_handle","_onError","_sawError","_level","_strategy","ZlibBase","flush","finishFlush","reset","flushFlag","alloc","nativeHandle","originalNativeClose","originalClose","result","writeReturn","_processChunk","isArray","Zlib","level","strategy","params","origFlush","_portable","Brotli","BrotliCompress","BrotliDecompress","Deflate","Inflate","Gzip","portable","Gunzip","DeflateRaw","InflateRaw","Unzip","optsArg","pathArg","mkdirpNative","mkdirpNativeSync","mkdirpManual","mkdirpManualSync","useNative","useNativeSync","mkdirp","native","manual","nativeSync","manualSync","dirname","findMade","parent","statAsync","st","findMadeSync","statSync","made","recursive","mkdirAsync","catch","mkdirSync","promisify","parseInt","mkdir","stat","platform","__TESTING_MKDIRP_PLATFORM__","parse","badWinChars","root","substr","versArr","__TESTING_MKDIRP_NODE_VERSION__","replace","split","hasNative","os","runtimeRequire","vars","config","variables","prebuildsOnly","PREBUILDS_ONLY","abi","versions","modules","runtime","electron","ELECTRON_RUN_AS_NODE","window","type","arch","libc","LIBC","existsSync","isAlpine","armv","ARM_VERSION","arm_version","uv","load","dir","getFirst","filter","files","matchBuild","parseTuple","arr","architectures","every","Boolean","matchTuple","tuple","includes","compareTuples","a","parseTags","file","tags","specificity","tag","napi","matchTags","runtimeAgnostic","compareTags","toUpperCase","release","debug","prebuild","nearby","execPath","target","node","sort","prebuilds","winner","hlo","Pack","fsm","t","opt_","createFileSync","createFile","createSync","Sync","stream","addFilesSync","addFilesAsync","charAt","cwd","noResume","onentry","entry","add","Unpack","stripSlash","filesFilter","extractFileSync","extractFile","extractSync","extract","Map","f","mapHas","r","has","get","set","u","maxReadSize","isWindows","__FAKE_PLATFORM__","__FAKE_TESTING_FS__","O_CREAT","O_TRUNC","O_WRONLY","UV_FS_O_FILEMAP","fMapEnabled","fMapFlag","types","pathModule","large","SLURP","TYPE","splitPrefix","prefixSize","pathSize","pp","prefix","basename","decString","off","toString","decDate","numToDate","decNumber","num","Date","decSmallNumber","nanNull","trim","isNaN","MAXNUM","encNumber","number","encode","encSmallNumber","octalString","padOctal","floor","string","encDate","date","getTime","NULLS","encString","ex","gex","cksumValid","needPax","nullBlock","block","mtime","cksum","linkpath","uname","gname","devmaj","devmin","atime","ctime","decode","sum","k","charCodeAt","typeKey","argmap","keys","reduce","kv","encodePositive","encodeNegative","flipped","byte","onesComp","twosComp","twos","pow","Number","isSafeInteger","pre","Parser","onentryFunction","listFileSync","listFile","list","readFileSync","bytesRead","normPath","SymlinkError","symlink","CwdError","cGet","cache","key","cSet","val","umask","needChmod","doChown","processUid","processGid","preserve","unlink","created","chmod","checkCwd","parts","relative","mkdir_","base","part","onmkdir","statEr","isSymbolicLink","chmodSync","ok","checkCwdSync","unlinkSync","isDir","normalizeCache","hasOwnProperty","prototype","normalize","TESTING_TAR_FAKE_PLATFORM","PackJob","absolute","pending","ignore","piped","zlib","ReadEntry","WriteEntry","WriteEntrySync","WriteEntryTar","Tar","ONSTAT","ENDED","QUEUE","CURRENT","PROCESS","PROCESSING","PROCESSJOB","JOBS","JOBDONE","ADDFSENTRY","ADDTARENTRY","STAT","READDIR","ONREADDIR","PIPE","ENTRY","ENTRYOPT","WRITEENTRYCLASS","WRITE","ONDRAIN","warner","preservePaths","strict","noPax","linkCache","statCache","readdirCache","onwarn","zip","gzip","noDirRecurse","follow","noMtime","jobs","job","entries","w","removeNode","msg","warn","Header","Entry","Pax","gzipHeader","STATE","WRITEENTRY","READENTRY","NEXTENTRY","PROCESSENTRY","EX","GEX","META","EMITMETA","BUFFER","EMITTEDEND","EMIT","CONSUMECHUNK","CONSUMECHUNKSUB","CONSUMEBODY","CONSUMEMETA","CONSUMEHEADER","CONSUMING","BUFFERCONCAT","MAYBEEND","WRITING","ABORTED","DONE","SAW_VALID_ENTRY","SAW_NULL_BLOCK","SAW_EOF","noop","ondone","maxMetaEntrySize","position","header","remain","invalid","meta","go","re","blockRemain","extra","abort","error","recoverable","have","stripSlashes","queues","reservations","running","Set","check","paths","dirs","getQueues","q","run","clear","equal","delete","reserve","toLowerCase","getDirs","obj","charset","comment","dev","ino","nlink","body","encodeBody","bodyLen","bufLen","ceil","encodeField","field","byteLen","digits","log","g","merge","parseKV","parseKVLine","line","v","extended","globalExtended","startBlockSize","writeLen","max","replaceSync","fstatSync","headBuf","POSITION","bufPos","bytes","h","entryBlockSize","mtimeCache","streamSync","flag","onopen","fstat","cb_","onread","getPos","isAbsolute","parsed","str","slashesStart","wc","pathReservations","stripAbsolutePath","ONENTRY","CHECKFS","CHECKFS2","PRUNECACHE","ISREUSABLE","MAKEFS","FILE","DIRECTORY","LINK","SYMLINK","HARDLINK","UNSUPPORTED","CHECKPATH","MKDIR","ONERROR","PENDING","PEND","UNPEND","MAYBECLOSE","SKIP","DOCHOWN","UID","GID","CHECKED_CWD","crypto","getFlag","uint32","cacheKeyNormalize","transform","dirCache","preserveOwner","setOwner","getuid","getgid","forceChown","win32","newer","keep","strip","processUmask","noChmod","dmode","fmode","linkparts","stripped","indexOf","resolvedPath","aRoot","pRoot","fullyDone","actions","abs","futimes","utimes","er2","fchown","tx","unsupported","isFile","dropCache","pnorm","pruneCache","afterMakeParent","lstatEr","afterChmod","rmdir","randomBytes","rename","unlinkFile","link","callSync","mkParent","rmdirSync","renameSync","unlinkFileSync","oner","closeError","futimesSync","futimeser","utimesSync","utimeser","fchownSync","fchowner","chowner","mtimeFilter","Base","tarCode","raw","win","char","String","fromCharCode","toWin","toRaw","prefixPath","HEADER","LSTAT","ONLSTAT","ONREAD","ONREADLINK","OPENFILE","ONOPENFILE","CLOSE","MODE","AWAITDRAIN","PREFIX","HAD_ERROR","winchars","modeFix","myuid","myuser","USER","blockLen","pathWarn","getType","readlink","linkKey","syscall","writeBuf","readEntry","readlinkSync","EMPTY_BUFFER","totalLength","_mask","_unmask","toArrayBuffer","toBuffer","readOnly","bufferUtil","BINARY_TYPES","GUID","kForOnEventAttribute","kListener","kStatusCode","kWebSocket","NOOP","kCode","kData","kError","kMessage","kReason","kTarget","kType","kWasClean","Event","defineProperty","enumerable","CloseEvent","reason","wasClean","ErrorEvent","MessageEvent","EventTarget","addEventListener","listener","wrapper","isBinary","event","_closeFrameReceived","_closeFrameSent","removeEventListener","handler","listeners","tokenChars","elem","format","extensions","extension","configurations","values","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","SyntaxError","token","kDone","kRun","concurrency","Limiter","TRAILER","kPerMessageDeflate","kTotalLength","kCallback","kBuffers","zlibLimiter","deflateOnData","inflateOnData","_maxPayload","RangeError","inflateOnError","_inflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","cleanup","callback","accepted","find","response","isInteger","decompress","fin","_decompress","compress","_compress","endpoint","windowBits","createInflateRaw","zlibInflateOptions","_readableState","endEmitted","createDeflateRaw","zlibDeflateOptions","Writable","PerMessageDeflate","isValidStatusCode","isValidUTF8","ErrorCtor","statusCode","errorCode","_binaryType","binaryType","_extensions","_skipUTF8Validation","skipUTF8Validation","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_state","_loop","startLoop","consume","dst","Uint8Array","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","compressed","haveLength","readUInt16BE","readUInt32BE","controlMessage","dataMessage","messageLength","fragments","randomFillSync","applyMask","kByteLength","maskBuffer","Sender","socket","generateMask","_generateMask","_maskBuffer","_socket","_firstFragment","_deflating","skipMasking","payloadLength","opcode","rsv1","writeUInt16BE","writeUIntBE","enqueue","dispatch","sendFrame","frame","ping","pong","send","perMessageDeflate","binary","dequeue","Reflect","cork","uncork","Duplex","emitClose","duplexOnEnd","_writableState","finished","duplexOnError","listenerCount","ws","terminateOnDestroy","duplex","autoDestroy","writableObjectMode","_destroy","readyState","called","terminate","_final","CONNECTING","isPaused","protocols","protocol","_isValidUTF8","EventEmitter","http","createHash","subprotocol","WebSocket","keyRegex","server","socketOnError","abortHandshake","headers","STATUS_CODES","Connection","handleProtocols","clientTracking","verifyClient","noServer","backlog","host","port","_server","createServer","writeHead","listen","emitConnection","bind","_removeListeners","addListeners","listening","upgrade","handleUpgrade","clients","_shouldEmitClose","address","shouldHandle","index","url","method","secWebSocketProtocol","secWebSocketExtensions","info","origin","secure","authorized","encrypted","verified","completeUpgrade","update","digest","_protocol","setSocket","https","net","tls","Readable","URL","Receiver","readyStates","subprotocolRegex","protocolVersions","_closeCode","_closeMessage","_closeTimer","_paused","_readyState","_receiver","_sender","_bufferedAmount","_redirects","initAsClient","bufferedAmount","onclose","onerror","onmessage","_url","receiver","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","setTimeout","setNoDelay","unshift","socketOnClose","socketOnData","socketOnEnd","OPEN","_req","CLOSING","errorEmitted","sendAfterClose","needDrain","websocket","protocolVersion","followRedirects","maxRedirects","createConnection","socketPath","hostname","timeout","parsedUrl","href","isSecure","isUnixSocket","invalidURLMessage","pathname","hash","emitErrorAndClose","defaultPort","protocolSet","tlsConnect","netConnect","startsWith","Upgrade","search","handshakeTimeout","Origin","username","password","auth","_originalHost","authorization","cookie","aborted","location","addr","serverProt","protError","extensionNames","connect","servername","isIP","setHeader","receiverOnFinish","clearTimeout","property","walker","self","tail","item","l","insert","inserted","Node","prev","unshiftNode","pushNode","thisp","forEachReverse","getReverse","mapReverse","initial","acc","reduceReverse","toArray","toArrayReverse","to","sliceReverse","splice","deleteCount","nodes","reverse","require","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","d","definition","o","prop","BaseError","wrapErr","stack","ReadError","WriteError","RequestError","time","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","console","logPath","Response","status","statusMessage","curKey","rawHeaders","json","JSON","jsonPassive","Request","tcp","hosts","ssl","unix","ttl","put","post","stringify","fromEntries","nodeResp","resp","ParseError","unixPath","webHost","unixWsHost","showConnect","callbacks","winDrive","systemDrv","getAuthToken","authAttempts","connAttempts","dialogShown","curSocket","socketId","random","async","buttons","title","evt","reconnected","wsHost","reconnect","dataBuf","window_width","window_height","disable_tray_icon","classic_interface","frameless","theme","_load","configData","save","tray","awaken","ready","readyError","main","windowSize","errorMsg","encData","webContents","openDevTools","reload","minimize","urlParsed","awake","init","Main","showWindow","show","createWindow","titleBarStyle","framelessClient","width","height","minWidth","minHeight","maxWidth","maxHeight","classicIface","zoomFactor","round","icon","autoHideMenuBar","fullscreen","backgroundColor","webPreferences","devTools","nodeIntegration","contextIsolation","getSize","shown","indexUrl","encodeURIComponent","loadURL","userAgent","initTray","getTrayIcon","trayMenu","label","click","setToolTip","setContextMenu","setImage","appMenu","submenu","accelerator","role","initAppMenu","state","connTray","disconnTray","profilesPth","exists"],"sourceRoot":""}